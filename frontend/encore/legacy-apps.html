<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    
    <title>jQuery и приложения наследования &mdash; Symfony Framework Documentation  documentation</title>
    
    <link rel="stylesheet" href="../../_static/" type="text/css">
    <link rel="stylesheet" href="..\..\_static\pygments.css" type="text/css">
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <link rel="top" title="Symfony Framework Documentation  documentation" href="..\..\index.html">
    <link rel="up" title="Managing CSS and JavaScript" href="..\..\frontend.html">
    <link rel="next" title="Creating Page-Specific CSS/JS" href="page-specific-assets.html">
    <link rel="prev" title="jQuery and Legacy Applications" href="legacy-apps.html">

<link rel="stylesheet" href="..\..\_assets\app.css?v=8d6d457a0820d7c245bddae16bfd4c75">
<script src="..\..\_assets\manifest.js?v=d41d8cd98f00b204e980"></script>
<script src="..\..\_assets\app.js?v=900984040c7cb4dca514"></script>
<style>
    .header__top .container {
        overflow: hidden;
        padding-top: 10px;
        padding-bottom: 10px;
    }
    .header__top .header__logo {
        float: left;
    }
    .header__top .header__support {
        float: right;
    }

    .highlight .k, .highlight .gh, .highlight .gp,
    .highlight .gu, .highlight .kc, .highlight .kd,
    .highlight .kn, .highlight .kr, .highlight .nc,
    .highlight .nd, .highlight .ni, .highlight .nl,
    .highlight .nn, .highlight .nt, .highlight .ow,
    .highlight .se { font-weight: normal; }

    .highlight .c, .highlight .cm, .highlight .c1,
    .highlight .sd, .highlight .si { font-style: normal; }

    .doc { background: none; }
    #demo-warning {
        border: 3px dashed #c00;
        padding: 10px;
        margin-bottom: 30px;
    }
    #demo-warning h4 { font-size: 1.7em;font-weight: bold; }
    #demo-warning p { margin-bottom: 0; }
</style>

<!-- Global Site Tag (gtag.js) - Google Analytics -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-107764519-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-107764519-1');
</script>

<!-- Facebook Pixel Code -->
<script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
        n.callMethod.apply(n,arguments):n.queue.push(arguments)};
        if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
        n.queue=[];t=b.createElement(e);t.async=!0;
        t.src=v;s=b.getElementsByTagName(e)[0];
        s.parentNode.insertBefore(t,s)}(window, document,'script',
        'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '250281335689441');
    fbq('track', 'PageView');
</script>
<img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=250281335689441&ev=PageView&noscript=1">
<!-- End Facebook Pixel Code -->

<script type="text/javascript">!function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="https://vk.com/js/api/openapi.js?159",t.onload=function(){VK.Retargeting.Init("VK-RTRG-279161-8p6Jv"),VK.Retargeting.Hit()},document.head.appendChild(t)}();</script><img src="https://vk.com/rtrg?p=VK-RTRG-279161-8p6Jv" style="position:fixed; left:-999px;" alt="">


  </head>
  <body role="document">

<body class="frontend doc_article doc">

<header>
    <section class="header__top">
        <div class="container">
            <div class="header__logo">
                <a href="..\..\..\..\index.html">
                    <img src="..\..\..\..\_images\header-logo.svg" alt="Symfony.com.ua logo">
                </a>
            </div>
            <div class="header__support hidden-xs">
                <a href="http://playtini.ua/" title="Компания Playtini">
                    <img height="69" src="..\..\..\..\_images\support.png" alt="Symfony is a SensioLabs product">
                </a>
            </div>
        </div>
    </section>
</header>

<div class="container"><div id="page-content">
    <div class="row">
        <div id="sidebar" class="col-sm-3">
            <div id="sidebar-content"><div class="submenu">
    
    
    <ul class="list_submenu list-unstyled">
    
        <li class="first">
            <a href="..\..\index.html">Главная</a>
        </li>
    
        <li>
            <a href="..\..\components\index.html">Компоненты</a>
        </li>
    
        <li>
            <a href="..\..\best_practices\index.html">Лучшие практики</a>
        </li>
    
        <li>
            <a href="..\..\quick_tour\index.html">Быстрый старт</a>
        </li>
    
        <li>
            <a href="..\..\reference\index.html">Справочник</a>
        </li>
    
        <li>
            <a href="..\..\genindex.html">Индекс</a>
        </li>
    
        <li>
            <a href="..\..\contributing\index.html">Участие</a>
        </li>
    
    </ul>
</div>

                <div class="toc"> 
    <h4>Содержание</h4>
    <div class="toc-content">
        <ul>
<li><a class="reference internal" href="#">jQuery и приложения наследования</a><ul>
<li><a class="reference internal" href="#id1">Использование библиотек, ожидающих, что jQuery будет глобальным</a></li>
<li><a class="reference internal" href="#jquery-webpack-javascript">Получение доступа к jQuery извне файлов Webpack JavaScript</a></li>
</ul>
</li>
</ul>

    </div>
</div>
                
            </div>

            <div class="ads m-b-30">
                <h2>Вакансии Playtini</h2>
                <div class="ad m-b-15">
                    <h3>
                        <a href="http://playtini.ua/careers/php-dev">
                            Middle+ PHP Developer/Symfony
                        </a>
                    </h3>
                    <div><b>Playtini</b> активно поддерживает и развивает свои продукты, и профессионализм команды. И на данный момент в поиске специалиста на позицию <b>«Middle+ PHP Developer/Symfony»,</b> который улучшит качество внутренних сервисов компании и увеличит их количество.</div>
                </div>
                <!--
                <div class="ad m-b-15">
                    <h3>
                        <a href="http://playtini.ua/careers/symfony-senior">
                            Senior PHP Developer/Symfony
                        </a>
                    </h3>
                    <div>We are looking for strong, experienced <b>Senior PHP Developer/Symfony.</b> We expect him/her to participate in improving and extending a system built using microservice architecture by means of modern technologies.</div>
                </div>
                -->
                <div class="ad">
                    <h3><a href="http://playtini.ua/careers">
                        Остальные вакансии компании
                        <img src="..\..\..\..\_images\logo-playtini.png" alt="Playtini">
                    </a></h3>
                </div>
            </div>
        </div>

        <div id="main" class="col-sm-9">
            <ol class="breadcrumb">
                
                <li><a href="..\..\index.html">Документация</a></li>
                
                <li><a href="..\..\frontend.html">Managing CSS and JavaScript</a></li>
                
                <li class="active">jQuery и приложения наследования</li>
            </ol>

            <div class="page">
                
  <div class="section" id="jquery">
<h1>jQuery и приложения наследования<a class="headerlink" href="#jquery" title="Permalink to this headline">¶</a></h1>
<p>Внутри Webpack, когда вам нужен модуль, он (обычно) <em>не</em> устанавливает
глобальную переменную. Вместо этого, оно просто возвращает значение:</p>
<div class="literal-block"><div class="highlight-javascript"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// загружает jquery, но *не* устанавливает глобальную переменную $ или jQuery</span>
<span class="kr">const</span> <span class="nx">$</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;jquery&#39;</span><span class="p">);</span>
</pre></div>
</td></tr></table></div></div>
<p>На практике, это вызовет проблемы с некоторыми внешними библиотеками, которые
<em>полагаются</em> на то, чтобы jQuery был глобальным. Это будет проблемой, если
часть <em>вашего</em> JavaScript не обрабатывается через Webpack (например, у вас есть
некоторый JavaScript в ваших шаблонах).</p>
<div class="section" id="id1">
<h2>Использование библиотек, ожидающих, что jQuery будет глобальным<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>Некоторые приложения наследования JavaScript используют практики программирования,
которые плохо совместимы с новыми практиками, рекламируемыми Webpack. Наиболее
распространённой из этих проблем является использование кода (например, плагинов
jQuery), которые предполагают, что jQuery уже доступен через глобальные переменные
<tt class="docutils literal"><code>$</code></tt> или <tt class="docutils literal"><code>jQuery</code></tt>. Если эти переменные не определены, то вы получите такие ошибки:</p>
<div class="literal-block"><div class="highlight-text"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span>Uncaught ReferenceError: $ is not defined at [...]
Uncaught ReferenceError: jQuery is not defined at [...]
</pre></div>
</td></tr></table></div></div>
<p>Вместо того, чтобы всё переписывать, Encore предоставляет вам другое решение.
Благодаря методу <tt class="docutils literal"><code>autoProvidejQuery()</code></tt>, каждый раз, когда файл JavaScript
использует переменные <tt class="docutils literal"><code>$</code></tt> или <tt class="docutils literal"><code>jQuery</code></tt>, Webpack автоматически требует
<tt class="docutils literal"><code>jquery</code></tt> и создаёт эти переменные для вас.</p>
<p>Итак, при работе с приложениями наследования, вам может понадобиться добавить к
<tt class="docutils literal"><code>webpack.config.js</code></tt> следующее:</p>
<div class="literal-block"><div class="highlight-diff"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span>Encore
    // ...
<span class="gi">+     .autoProvidejQuery()</span>
;
</pre></div>
</td></tr></table></div></div>
<p>Внутренне, этот метод <tt class="docutils literal"><code>autoProvidejQuery()</code></tt> вызывает метод <tt class="docutils literal"><code>autoProvideVariables()</code></tt>
из Encore. На практике, это эквивалентно следующему:</p>
<div class="literal-block"><div class="highlight-javascript"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nx">Encore</span>
    <span class="c1">// вы можете использовать этот метод, чтобы предоставить другие общие глобальные переменные</span>
    <span class="c1">// такие, как &#39;_&#39; для библиотеки &#39;underscore&#39;</span>
    <span class="p">.</span><span class="nx">autoProvideVariables</span><span class="p">({</span>
        <span class="nx">$</span><span class="o">:</span> <span class="s1">&#39;jquery&#39;</span><span class="p">,</span>
        <span class="nx">jQuery</span><span class="o">:</span> <span class="s1">&#39;jquery&#39;</span><span class="p">,</span>
        <span class="s1">&#39;window.jQuery&#39;</span><span class="o">:</span> <span class="s1">&#39;jquery&#39;</span><span class="p">,</span>
    <span class="p">})</span>
    <span class="c1">// ...</span>
<span class="p">;</span>
</pre></div>
</td></tr></table></div></div>
</div>
<div class="section" id="jquery-webpack-javascript">
<h2>Получение доступа к jQuery извне файлов Webpack JavaScript<a class="headerlink" href="#jquery-webpack-javascript" title="Permalink to this headline">¶</a></h2>
<p>Если вам также нужно предоставить доступ к переменным <tt class="docutils literal"><code>$</code></tt> и <tt class="docutils literal"><code>jQuery</code></tt> вне файлов
JavaScript, обрабатываемых Webpack (например, JavaScript, который всё ещё живёт в
ваших шаблонах), вам нужно вручную установить их как глобальные переменные в некотором
файле JavaScript, который загружается до вашего кода наследования.</p>
<p>Например, вы можете определить файл <tt class="docutils literal"><code>common.js</code></tt>, который обрабатывается Webpack и
загружается на каждой странице со следующи содержанием:</p>
<div class="literal-block"><div class="highlight-javascript"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// потребовать jQuery нормально</span>
<span class="kr">const</span> <span class="nx">$</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;jquery&#39;</span><span class="p">);</span>

<span class="c1">// создать глобальные переменные $ и jQuery</span>
<span class="nx">global</span><span class="p">.</span><span class="nx">$</span> <span class="o">=</span> <span class="nx">global</span><span class="p">.</span><span class="nx">jQuery</span> <span class="o">=</span> <span class="nx">$</span><span class="p">;</span>
</pre></div>
</td></tr></table></div></div>
<div class="admonition-wrapper">
<div class="tip"></div><div class="admonition admonition-tip"><p class="first admonition-title">Tip</p>
<p class="last">Переменная <tt class="docutils literal"><code>global</code></tt> - это особый способ установки чего-либо в переменной
<tt class="docutils literal"><code>window</code></tt>. В веб-контексте, использование <tt class="docutils literal"><code>global</code></tt> и <tt class="docutils literal"><code>window</code></tt> эквивалентны,
только <tt class="docutils literal"><code>window.jQuery</code></tt> не будет работать при использовании <tt class="docutils literal"><code>autoProvidejQuery()</code></tt>.
Другими словами, используйте <tt class="docutils literal"><code>global</code></tt>.</p>
</div></div>
</div>
</div>


            </div>

            
            <div class="navigation">
                <a href="legacy-apps.html">« jQuery and Legacy Applications</a>
                <span class="separator">|</span>
                <a href="page-specific-assets.html">Creating Page-Specific CSS/JS »</a>
            </div>
            

            <div id="license">
                <p>Эта документация является переводом <a href="http://symfony.com/doc/current/index.html">официальной документации Symfony</a> и предоставляется по свободной лицензии <a rel="license nofollow" href="https://creativecommons.org/licenses/by-sa/3.0/deed.ru">CC BY-SA 3.0</a>.</p>
            </div>
        </div>
    </div>
</div></div>


  </body>
</body></html>