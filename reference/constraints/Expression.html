<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    
    <title>Expression &mdash; Symfony Framework Documentation  documentation</title>
    
    <link rel="stylesheet" href="../../_static/" type="text/css">
    <link rel="stylesheet" href="..\..\_static\pygments.css" type="text/css">
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <link rel="top" title="Symfony Framework Documentation  documentation" href="..\..\index.html">

<link rel="stylesheet" href="..\..\_assets\app.css?v=8d6d457a0820d7c245bddae16bfd4c75">
<script src="..\..\_assets\manifest.js?v=d41d8cd98f00b204e980"></script>
<script src="..\..\_assets\app.js?v=900984040c7cb4dca514"></script>
<style>
    .header__top .container {
        overflow: hidden;
        padding-top: 10px;
        padding-bottom: 10px;
    }
    .header__top .header__logo {
        float: left;
    }
    .header__top .header__support {
        float: right;
    }

    .highlight .k, .highlight .gh, .highlight .gp,
    .highlight .gu, .highlight .kc, .highlight .kd,
    .highlight .kn, .highlight .kr, .highlight .nc,
    .highlight .nd, .highlight .ni, .highlight .nl,
    .highlight .nn, .highlight .nt, .highlight .ow,
    .highlight .se { font-weight: normal; }

    .highlight .c, .highlight .cm, .highlight .c1,
    .highlight .sd, .highlight .si { font-style: normal; }

    .doc { background: none; }
    #demo-warning {
        border: 3px dashed #c00;
        padding: 10px;
        margin-bottom: 30px;
    }
    #demo-warning h4 { font-size: 1.7em;font-weight: bold; }
    #demo-warning p { margin-bottom: 0; }
</style>

<!-- Global Site Tag (gtag.js) - Google Analytics -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-107764519-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-107764519-1');
</script>

<!-- Facebook Pixel Code -->
<script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
        n.callMethod.apply(n,arguments):n.queue.push(arguments)};
        if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
        n.queue=[];t=b.createElement(e);t.async=!0;
        t.src=v;s=b.getElementsByTagName(e)[0];
        s.parentNode.insertBefore(t,s)}(window, document,'script',
        'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '250281335689441');
    fbq('track', 'PageView');
</script>
<img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=250281335689441&ev=PageView&noscript=1">
<!-- End Facebook Pixel Code -->

<script type="text/javascript">!function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="https://vk.com/js/api/openapi.js?159",t.onload=function(){VK.Retargeting.Init("VK-RTRG-279161-8p6Jv"),VK.Retargeting.Hit()},document.head.appendChild(t)}();</script><img src="https://vk.com/rtrg?p=VK-RTRG-279161-8p6Jv" style="position:fixed; left:-999px;" alt="">


  </head>
  <body role="document">

<body class="reference doc_article doc">

<header>
    <section class="header__top">
        <div class="container">
            <div class="header__logo">
                <a href="..\..\..\..\index.html">
                    <img src="..\..\..\..\_images\header-logo.svg" alt="Symfony.com.ua logo">
                </a>
            </div>
            <div class="header__support hidden-xs">
                <a href="http://playtini.ua/" title="Компания Playtini">
                    <img height="69" src="..\..\..\..\_images\support.png" alt="Symfony is a SensioLabs product">
                </a>
            </div>
        </div>
    </section>
</header>

<div class="container"><div id="page-content">
    <div class="row">
        <div id="sidebar" class="col-sm-3">
            <div id="sidebar-content"><div class="submenu">
    
    
    <ul class="list_submenu list-unstyled">
    
        <li class="first">
            <a href="..\..\index.html">Главная</a>
        </li>
    
        <li>
            <a href="..\..\components\index.html">Компоненты</a>
        </li>
    
        <li>
            <a href="..\..\best_practices\index.html">Лучшие практики</a>
        </li>
    
        <li>
            <a href="..\..\quick_tour\index.html">Быстрый старт</a>
        </li>
    
        <li>
            <a href="..\index.html">Справочник</a>
        </li>
    
        <li>
            <a href="..\..\genindex.html">Индекс</a>
        </li>
    
        <li>
            <a href="..\..\contributing\index.html">Участие</a>
        </li>
    
    </ul>
</div>

                <div class="toc"> 
    <h4>Содержание</h4>
    <div class="toc-content">
        <ul>
<li><a class="reference internal" href="#">Expression</a><ul>
<li><a class="reference internal" href="#id1">Базовое применение</a></li>
<li><a class="reference internal" href="#id2">Доступные опции</a><ul>
<li><a class="reference internal" href="#reference-constraint-expression-option-ru">expression</a></li>
<li><a class="reference internal" href="#message">message</a></li>
<li><a class="reference internal" href="#payload">payload</a></li>
</ul>
</li>
</ul>
</li>
</ul>

    </div>
</div>
                
            </div>

            <div class="ads m-b-30">
                <h2>Вакансии Playtini</h2>
                <div class="ad m-b-15">
                    <h3>
                        <a href="http://playtini.ua/careers/php-dev">
                            Middle+ PHP Developer/Symfony
                        </a>
                    </h3>
                    <div><b>Playtini</b> активно поддерживает и развивает свои продукты, и профессионализм команды. И на данный момент в поиске специалиста на позицию <b>«Middle+ PHP Developer/Symfony»,</b> который улучшит качество внутренних сервисов компании и увеличит их количество.</div>
                </div>
                <!--
                <div class="ad m-b-15">
                    <h3>
                        <a href="http://playtini.ua/careers/symfony-senior">
                            Senior PHP Developer/Symfony
                        </a>
                    </h3>
                    <div>We are looking for strong, experienced <b>Senior PHP Developer/Symfony.</b> We expect him/her to participate in improving and extending a system built using microservice architecture by means of modern technologies.</div>
                </div>
                -->
                <div class="ad">
                    <h3><a href="http://playtini.ua/careers">
                        Остальные вакансии компании
                        <img src="..\..\..\..\_images\logo-playtini.png" alt="Playtini">
                    </a></h3>
                </div>
            </div>
        </div>

        <div id="main" class="col-sm-9">
            <ol class="breadcrumb">
                
                <li><a href="..\..\index.html">Документация</a></li>
                
                <li class="active">Expression</li>
            </ol>

            <div class="page">
                
  <div class="section" id="expression">
<h1>Expression<a class="headerlink" href="#expression" title="Permalink to this headline">¶</a></h1>
<p>Это ограничение позволяет вам использовать <a class="reference internal" href="..\..\components\expression_language.html#component-expression-language-examples"><span>выражение</span></a>
для более сложной и динамичной валидации. См. <a class="reference internal" href="#id1">Базовое применение</a>, чтобы увидеть
пример. См. <a class="reference internal" href="Callback.html"><em>Callback</em></a>, чтобы узнать о другом ограничении,
которое даст вам схожую гибкость.</p>
<table border="1" class="docutils">
<colgroup>
<col width="14%">
<col width="86%">
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Применяется к</td>
<td rowspan="2"><blockquote class="first">
<div><a class="reference internal" href="..\..\validation.html#validation-class-target"><span>классу</span></a> или <a class="reference internal" href="..\..\validation.html#validation-property-target"><span>свойству/методу</span></a></div></blockquote>
<dl class="last docutils">
<dt>---------------------------------------------------------------------------------------------=--</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="Expression.html#reference-constraint-expression-option"><span>выражение</span></a></li>
<li><a class="reference internal" href="#message">message</a></li>
<li><a class="reference internal" href="#payload">payload</a></li>
</ul>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td>Опции</td>
</tr>
<tr class="row-odd"><td>Класс</td>
<td><tt class="docutils literal"><code><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/Validator/Constraints/Expression.html" title="Symfony\Component\Validator\Constraints\Expression">Expression</a></code></tt></td>
</tr>
<tr class="row-even"><td>Валидатор</td>
<td><tt class="docutils literal"><code><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/Validator/Constraints/ExpressionValidator.html" title="Symfony\Component\Validator\Constraints\ExpressionValidator">ExpressionValidator</a></code></tt></td>
</tr>
</tbody>
</table>
<div class="section" id="id1">
<h2>Базовое применение<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>Представьте, что у вас есть класс <tt class="docutils literal"><code>BlogPost</code></tt> со свойствами <tt class="docutils literal"><code>category</code></tt>
и <tt class="docutils literal"><code>isTechnicalPost</code></tt>:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Model/BlogPost.php</span>
<span class="k">namespace</span> <span class="nx">App\Model</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Symfony\Component\Validator\Constraints</span> <span class="k">as</span> <span class="nx">Assert</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">BlogPost</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="nv">$category</span><span class="p">;</span>

    <span class="k">private</span> <span class="nv">$isTechnicalPost</span><span class="p">;</span>

    <span class="c1">// ...</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">getCategory</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">category</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">setIsTechnicalPost</span><span class="p">(</span><span class="nv">$isTechnicalPost</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">isTechnicalPost</span> <span class="o">=</span> <span class="nv">$isTechnicalPost</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
<p>Чтобы валидировать объект, вам нужны особенные требования:</p>
<ol class="upperalpha simple">
<li>Если <tt class="docutils literal"><code>isTechnicalPost</code></tt> - &quot;true&quot;, тогда <tt class="docutils literal"><code>category</code></tt> должна быть либо
<tt class="docutils literal"><code>php</code></tt>, либо <tt class="docutils literal"><code>symfony</code></tt>;</li>
<li>Если <tt class="docutils literal"><code>isTechnicalPost</code></tt> - &quot;false&quot;, тогда <tt class="docutils literal"><code>category</code></tt> может быть любой.</li>
</ol>
<p>Вот один из способов достичь этого с ограничением Выражения:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Annotations</em><div class="literal-block"><div class="highlight-php-annotations"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Model/BlogPost.php</span>
<span class="k">namespace</span> <span class="nx">App\Model</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Symfony\Component\Validator\Constraints</span> <span class="k">as</span> <span class="nx">Assert</span><span class="p">;</span>

<span class="sd">/**</span>
<span class="sd"> * @Assert\Expression(</span>
<span class="sd"> *     &quot;this.getCategory() in [&#39;php&#39;, &#39;symfony&#39;] or !this.isTechnicalPost()&quot;,</span>
<span class="sd"> *     message=&quot;If this is a tech post, the category should be either php or symfony!&quot;</span>
<span class="sd"> * )</span>
<span class="sd"> */</span>
<span class="k">class</span> <span class="nc">BlogPost</span>
<span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
</li>
<li><em>YAML</em><div class="literal-block"><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># config/validator/validation.yaml</span>
<span class="l l-Scalar l-Scalar-Plain">App\Model\BlogPost</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">constraints</span><span class="p p-Indicator">:</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">Expression</span><span class="p p-Indicator">:</span>
            <span class="l l-Scalar l-Scalar-Plain">expression</span><span class="p p-Indicator">:</span> <span class="s">&quot;this.getCategory()</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">[&#39;php&#39;,</span><span class="nv"> </span><span class="s">&#39;symfony&#39;]</span><span class="nv"> </span><span class="s">or</span><span class="nv"> </span><span class="s">!this.isTechnicalPost()&quot;</span>
            <span class="l l-Scalar l-Scalar-Plain">message</span><span class="p p-Indicator">:</span> <span class="s">&quot;If</span><span class="nv"> </span><span class="s">this</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">tech</span><span class="nv"> </span><span class="s">post,</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">category</span><span class="nv"> </span><span class="s">should</span><span class="nv"> </span><span class="s">be</span><span class="nv"> </span><span class="s">either</span><span class="nv"> </span><span class="s">php</span><span class="nv"> </span><span class="s">or</span><span class="nv"> </span><span class="s">symfony!&quot;</span>
</pre></div>
</td></tr></table></div></div>
</li>
<li><em>XML</em><div class="literal-block"><div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">&lt;!-- config/validator/validation.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;constraint-mapping</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/dic/constraint-mapping&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/dic/constraint-mapping http://symfony.com/schema/dic/constraint-mapping/constraint-mapping-1.0.xsd&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;class</span> <span class="na">name=</span><span class="s">&quot;App\Model\BlogPost&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;constraint</span> <span class="na">name=</span><span class="s">&quot;Expression&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;option</span> <span class="na">name=</span><span class="s">&quot;expression&quot;</span><span class="nt">&gt;</span>
                this.getCategory() in [&#39;php&#39;, &#39;symfony&#39;] or !this.isTechnicalPost()
            <span class="nt">&lt;/option&gt;</span>
            <span class="nt">&lt;option</span> <span class="na">name=</span><span class="s">&quot;message&quot;</span><span class="nt">&gt;</span>
                If this is a tech post, the category should be either php or symfony!
            <span class="nt">&lt;/option&gt;</span>
        <span class="nt">&lt;/constraint&gt;</span>
    <span class="nt">&lt;/class&gt;</span>
<span class="nt">&lt;/constraint-mapping&gt;</span>
</pre></div>
</td></tr></table></div></div>
</li>
<li><em>PHP</em><div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Model/BlogPost.php</span>
<span class="k">namespace</span> <span class="nx">App\Model</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Symfony\Component\Validator\Mapping\ClassMetadata</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Validator\Constraints</span> <span class="k">as</span> <span class="nx">Assert</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">BlogPost</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">loadValidatorMetadata</span><span class="p">(</span><span class="nx">ClassMetadata</span> <span class="nv">$metadata</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$metadata</span><span class="o">-&gt;</span><span class="na">addConstraint</span><span class="p">(</span><span class="k">new</span> <span class="nx">Assert\Expression</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;expression&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;this.getCategory() in [&quot;php&quot;, &quot;symfony&quot;] or !this.isTechnicalPost()&#39;</span><span class="p">,</span>
            <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;If this is a tech post, the category should be either php or symfony!&#39;</span><span class="p">,</span>
        <span class="p">)));</span>
    <span class="p">}</span>

    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
</li>
</ul>
</div>
<p>Опция <a class="reference internal" href="Expression.html#reference-constraint-expression-option"><span>выражения</span></a> - это выражением,
которое должно вернуть &quot;true&quot;, чтобы валидация была успешной. Чтобы узнать больше
о синтаксисе языка выражений, см. <a class="reference internal" href="..\..\components\expression_language\syntax.html"><em>The Expression Syntax</em></a>.</p>
<div class="admonition-wrapper">
<div class="sidebar"></div><div class="admonition admonition-sidebar"><p class="first sidebar-title">Привязка ошибки к конкретному полю</p>
<p>Вы также можете присоединить ограничение к конкретному свойству и всё равно
валидировать на основании значений всей сущности. Это удобно, если вы хотите
присоединить ошибку к конкретному полю. В этом контексте, <tt class="docutils literal"><code>value</code></tt> представляет
значение <tt class="docutils literal"><code>isTechnicalPost</code></tt>.</p>
<div class="last configuration-block">
<ul class="simple">
<li><em>Annotations</em><div class="literal-block"><div class="highlight-php-annotations"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Model/BlogPost.php</span>
<span class="k">namespace</span> <span class="nx">App\Model</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Symfony\Component\Validator\Constraints</span> <span class="k">as</span> <span class="nx">Assert</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">BlogPost</span>
<span class="p">{</span>
    <span class="c1">// ...</span>

    <span class="sd">/**</span>
<span class="sd">     * @Assert\Expression(</span>
<span class="sd">     *     &quot;this.getCategory() in [&#39;php&#39;, &#39;symfony&#39;] or value == false&quot;,</span>
<span class="sd">     *     message=&quot;Если это технический пост, категория должна быть либо php, либо symfony!&quot;</span>
<span class="sd">     * )</span>
<span class="sd">     */</span>
    <span class="k">private</span> <span class="nv">$isTechnicalPost</span><span class="p">;</span>

    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
</li>
<li><em>YAML</em><div class="literal-block"><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># config/validator/validation.yaml</span>
<span class="l l-Scalar l-Scalar-Plain">App\Model\BlogPost</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">properties</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">isTechnicalPost</span><span class="p p-Indicator">:</span>
            <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">Expression</span><span class="p p-Indicator">:</span>
                <span class="l l-Scalar l-Scalar-Plain">expression</span><span class="p p-Indicator">:</span> <span class="s">&quot;this.getCategory()</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">[&#39;php&#39;,</span><span class="nv"> </span><span class="s">&#39;symfony&#39;]</span><span class="nv"> </span><span class="s">or</span><span class="nv"> </span><span class="s">value</span><span class="nv"> </span><span class="s">==</span><span class="nv"> </span><span class="s">false&quot;</span>
                <span class="l l-Scalar l-Scalar-Plain">message</span><span class="p p-Indicator">:</span> <span class="s">&quot;Если</span><span class="nv"> </span><span class="s">это</span><span class="nv"> </span><span class="s">технический</span><span class="nv"> </span><span class="s">пост,</span><span class="nv"> </span><span class="s">категория</span><span class="nv"> </span><span class="s">должна</span><span class="nv"> </span><span class="s">быть</span><span class="nv"> </span><span class="s">либо</span><span class="nv"> </span><span class="s">php,</span><span class="nv"> </span><span class="s">либо</span><span class="nv"> </span><span class="s">symfony!&quot;</span>
</pre></div>
</td></tr></table></div></div>
</li>
<li><em>XML</em><div class="literal-block"><div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">&lt;!-- config/validator/validation.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;constraint-mapping</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/dic/constraint-mapping&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/dic/constraint-mapping http://symfony.com/schema/dic/constraint-mapping/constraint-mapping-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;class</span> <span class="na">name=</span><span class="s">&quot;App\Model\BlogPost&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;isTechnicalPost&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;constraint</span> <span class="na">name=</span><span class="s">&quot;Expression&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;option</span> <span class="na">name=</span><span class="s">&quot;expression&quot;</span><span class="nt">&gt;</span>
                    this.getCategory() in [&#39;php&#39;, &#39;symfony&#39;] or value == false
                <span class="nt">&lt;/option&gt;</span>
                <span class="nt">&lt;option</span> <span class="na">name=</span><span class="s">&quot;message&quot;</span><span class="nt">&gt;</span>
                    Если это технический пост, категория должна быть либо php, либо symfony!
                <span class="nt">&lt;/option&gt;</span>
            <span class="nt">&lt;/constraint&gt;</span>
        <span class="nt">&lt;/property&gt;</span>
    <span class="nt">&lt;/class&gt;</span>
<span class="nt">&lt;/constraint-mapping&gt;</span>
</pre></div>
</td></tr></table></div></div>
</li>
<li><em>PHP</em><div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Model/BlogPost.php</span>
<span class="k">namespace</span> <span class="nx">App\Model</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Symfony\Component\Validator\Constraints</span> <span class="k">as</span> <span class="nx">Assert</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Validator\Mapping\ClassMetadata</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">BlogPost</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">loadValidatorMetadata</span><span class="p">(</span><span class="nx">ClassMetadata</span> <span class="nv">$metadata</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$metadata</span><span class="o">-&gt;</span><span class="na">addPropertyConstraint</span><span class="p">(</span><span class="s1">&#39;isTechnicalPost&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">Assert\Expression</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;expression&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;this.getCategory() in [&quot;php&quot;, &quot;symfony&quot;] or value == false&#39;</span><span class="p">,</span>
            <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Если это технический пост, категория должна быть либо php, либо symfony!&#39;</span><span class="p">,</span>
        <span class="p">)));</span>
    <span class="p">}</span>

    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
</li>
</ul>
</div>
</div></div>
<p>Чтобы узнать больше о выражении и о том, какие переменные вам доступны, см.
детали оцпии <a class="reference internal" href="Expression.html#reference-constraint-expression-option"><span>выражение</span></a> ниже.</p>
</div>
<div class="section" id="id2">
<h2>Доступные опции<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<div class="section" id="reference-constraint-expression-option-ru">
<span id="id3"></span><h3>expression<a class="headerlink" href="#reference-constraint-expression-option-ru" title="Permalink to this headline">¶</a></h3>
<p><strong>тип</strong>: <tt class="docutils literal"><code>string</code></tt> [<a class="reference internal" href="..\..\validation.html#validation-default-option"><span>опция по умолчанию</span></a>]</p>
<p>Выражение, которое будет оценено. Если выражение оценивается, как &quot;false&quot;
значение (используя <tt class="docutils literal"><code>==</code></tt>, а не <tt class="docutils literal"><code>===</code></tt>), то валидация будет неудачной.</p>
<p>Чтобы узнать больше о синтаксисе языка выражений, см.
<a class="reference internal" href="..\..\components\expression_language\syntax.html"><em>The Expression Syntax</em></a>.</p>
<p>Внутри выражения у вас есть доступ к 2 переменным:</p>
<p>В зависимости от того, как вы используете ограничение, у вас есть доступ к
1 или 2 переменным в вашем выражении:</p>
<ul class="simple">
<li><tt class="docutils literal"><code>this</code></tt>: Валидируемый объект (например, экземпляр BlogPost);</li>
<li><tt class="docutils literal"><code>value</code></tt>: Значение валидируемого свойства (доступно только тогда,
когда ограничение применяется напрямую к свойству);</li>
</ul>
</div>
<div class="section" id="message">
<h3>message<a class="headerlink" href="#message" title="Permalink to this headline">¶</a></h3>
<p><strong>тип</strong>: <tt class="docutils literal"><code>string</code></tt> <strong>по умолчанию</strong>: <tt class="docutils literal"><code>Это значение не является валидным.</code></tt></p>
<p>Сообщение по умолчаню, поставляемое, когда выражение оценивается, как &quot;false&quot;.</p>
</div>
<div class="section" id="payload">
<h3>payload<a class="headerlink" href="#payload" title="Permalink to this headline">¶</a></h3>
<p><strong>type</strong>: <tt class="docutils literal"><code>mixed</code></tt> <strong>default</strong>: <tt class="docutils literal"><code>null</code></tt></p>
<p>This option can be used to attach arbitrary domain-specific data to a constraint.
The configured payload is not used by the Validator component, but its processing
is completely up to you.</p>
<p>For example, you may want to use
<a class="reference internal" href="..\..\validation\severity.html"><em>several error levels</em></a> to present failed
constraints differently in the front-end depending on the severity of the
error.</p>
</div>
</div>
</div>


            </div>

            

            <div id="license">
                <p>Эта документация является переводом <a href="http://symfony.com/doc/current/index.html">официальной документации Symfony</a> и предоставляется по свободной лицензии <a rel="license nofollow" href="https://creativecommons.org/licenses/by-sa/3.0/deed.ru">CC BY-SA 3.0</a>.</p>
            </div>
        </div>
    </div>
</div></div>


  </body>
</body></html>