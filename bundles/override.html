<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    
    <title>Как переопределить любую часть пакета &mdash; Symfony Framework Documentation  documentation</title>
    
    <link rel="stylesheet" href="../_static/" type="text/css">
    <link rel="stylesheet" href="..\_static\pygments.css" type="text/css">
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <link rel="top" title="Symfony Framework Documentation  documentation" href="..\index.html">

<link rel="stylesheet" href="..\_assets\app.css?v=8d6d457a0820d7c245bddae16bfd4c75">
<script src="..\_assets\manifest.js?v=d41d8cd98f00b204e980"></script>
<script src="..\_assets\app.js?v=900984040c7cb4dca514"></script>
<style>
    .header__top .container {
        overflow: hidden;
        padding-top: 10px;
        padding-bottom: 10px;
    }
    .header__top .header__logo {
        float: left;
    }
    .header__top .header__support {
        float: right;
    }

    .highlight .k, .highlight .gh, .highlight .gp,
    .highlight .gu, .highlight .kc, .highlight .kd,
    .highlight .kn, .highlight .kr, .highlight .nc,
    .highlight .nd, .highlight .ni, .highlight .nl,
    .highlight .nn, .highlight .nt, .highlight .ow,
    .highlight .se { font-weight: normal; }

    .highlight .c, .highlight .cm, .highlight .c1,
    .highlight .sd, .highlight .si { font-style: normal; }

    .doc { background: none; }
    #demo-warning {
        border: 3px dashed #c00;
        padding: 10px;
        margin-bottom: 30px;
    }
    #demo-warning h4 { font-size: 1.7em;font-weight: bold; }
    #demo-warning p { margin-bottom: 0; }
</style>

<!-- Global Site Tag (gtag.js) - Google Analytics -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-107764519-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-107764519-1');
</script>

<!-- Facebook Pixel Code -->
<script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
        n.callMethod.apply(n,arguments):n.queue.push(arguments)};
        if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
        n.queue=[];t=b.createElement(e);t.async=!0;
        t.src=v;s=b.getElementsByTagName(e)[0];
        s.parentNode.insertBefore(t,s)}(window, document,'script',
        'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '250281335689441');
    fbq('track', 'PageView');
</script>
<img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=250281335689441&ev=PageView&noscript=1">
<!-- End Facebook Pixel Code -->

<script type="text/javascript">!function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="https://vk.com/js/api/openapi.js?159",t.onload=function(){VK.Retargeting.Init("VK-RTRG-279161-8p6Jv"),VK.Retargeting.Hit()},document.head.appendChild(t)}();</script><img src="https://vk.com/rtrg?p=VK-RTRG-279161-8p6Jv" style="position:fixed; left:-999px;" alt="">


  </head>
  <body role="document">

<body class="bundles doc_article doc">

<header>
    <section class="header__top">
        <div class="container">
            <div class="header__logo">
                <a href="..\..\..\index.html">
                    <img src="..\..\..\_images\header-logo.svg" alt="Symfony.com.ua logo">
                </a>
            </div>
            <div class="header__support hidden-xs">
                <a href="http://playtini.ua/" title="Компания Playtini">
                    <img height="69" src="..\..\..\_images\support.png" alt="Symfony is a SensioLabs product">
                </a>
            </div>
        </div>
    </section>
</header>

<div class="container"><div id="page-content">
    <div class="row">
        <div id="sidebar" class="col-sm-3">
            <div id="sidebar-content"><div class="submenu">
    
    
    <ul class="list_submenu list-unstyled">
    
        <li class="first">
            <a href="..\index.html">Главная</a>
        </li>
    
        <li>
            <a href="..\components\index.html">Компоненты</a>
        </li>
    
        <li>
            <a href="..\best_practices\index.html">Лучшие практики</a>
        </li>
    
        <li>
            <a href="..\quick_tour\index.html">Быстрый старт</a>
        </li>
    
        <li>
            <a href="..\reference\index.html">Справочник</a>
        </li>
    
        <li>
            <a href="..\genindex.html">Индекс</a>
        </li>
    
        <li>
            <a href="..\contributing\index.html">Участие</a>
        </li>
    
    </ul>
</div>

                <div class="toc"> 
    <h4>Содержание</h4>
    <div class="toc-content">
        <ul>
<li><a class="reference internal" href="#">Как переопределить любую часть пакета</a><ul>
<li><a class="reference internal" href="#id2">Шаблоны</a></li>
<li><a class="reference internal" href="#id3">Маршрутизация</a></li>
<li><a class="reference internal" href="#id4">Контроллеры</a></li>
<li><a class="reference internal" href="#id5">Сервисы и конфигурация</a></li>
<li><a class="reference internal" href="#id6">Сущности и их отображение</a></li>
<li><a class="reference internal" href="#id7">Формы</a></li>
<li><a class="reference internal" href="#override-validation-ru">Метаданные валидации</a></li>
<li><a class="reference internal" href="#override-translations-ru">Переводы</a></li>
</ul>
</li>
</ul>

    </div>
</div>
                
            </div>

            <div class="ads m-b-30">
                <h2>Вакансии Playtini</h2>
                <div class="ad m-b-15">
                    <h3>
                        <a href="http://playtini.ua/careers/php-dev">
                            Middle+ PHP Developer/Symfony
                        </a>
                    </h3>
                    <div><b>Playtini</b> активно поддерживает и развивает свои продукты, и профессионализм команды. И на данный момент в поиске специалиста на позицию <b>«Middle+ PHP Developer/Symfony»,</b> который улучшит качество внутренних сервисов компании и увеличит их количество.</div>
                </div>
                <!--
                <div class="ad m-b-15">
                    <h3>
                        <a href="http://playtini.ua/careers/symfony-senior">
                            Senior PHP Developer/Symfony
                        </a>
                    </h3>
                    <div>We are looking for strong, experienced <b>Senior PHP Developer/Symfony.</b> We expect him/her to participate in improving and extending a system built using microservice architecture by means of modern technologies.</div>
                </div>
                -->
                <div class="ad">
                    <h3><a href="http://playtini.ua/careers">
                        Остальные вакансии компании
                        <img src="..\..\..\_images\logo-playtini.png" alt="Playtini">
                    </a></h3>
                </div>
            </div>
        </div>

        <div id="main" class="col-sm-9">
            <ol class="breadcrumb">
                
                <li><a href="..\index.html">Документация</a></li>
                
                <li class="active">Как переопределить любую часть пакета</li>
            </ol>

            <div class="page">
                
  <div class="section" id="index-0">
<span id="id1"></span><h1>Как переопределить любую часть пакета<a class="headerlink" href="#index-0" title="Permalink to this headline">¶</a></h1>
<p>При использовании сторонних пакетов вы можете захотеть настроить или переопределить
некоторые из их функций. Этот документ описывает способы переопределения наиболее
распространённых функций пакета.</p>
<div class="admonition-wrapper">
<div class="tip"></div><div class="admonition admonition-tip"><p class="first admonition-title">Tip</p>
<p class="last">Механизм переопределения пакета означает, что вы не можете использовать физические
пути для ссылания на источники пакета (например, <tt class="docutils literal"><code>__DIR__/config/services.xml</code></tt>).
Всегда используйте логические пути в ваших пакетах (например,
<tt class="docutils literal"><code>&#64;FooBundle/Resources/config/services.xml</code></tt>) и вызывайте
<a class="reference internal" href="..\components\http_kernel.html#http-kernel-resource-locator"><span>метод locateResource()</span></a>, чтобы преобразовывать
их в физические пути при необходимости.</p>
</div></div>
<div class="section" id="id2">
<h2>Шаблоны<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>Шаблоны сторонних бандлов могут быть переопределены
в каталоге <tt class="docutils literal"><code>&lt;your-project&gt;/templates/bundles/&lt;bundle-name&gt;/</code></tt>. Новые шаблоны
должны использовать то же имя и путь (относительно <tt class="docutils literal"><code>&lt;bundle&gt;/Resources/views/</code></tt>) как и
оригинальные шаблоны.</p>
<p>Например, для переопределения шаблона <tt class="docutils literal"><code>Resources/views/Registration/confirmed.html.twig</code></tt>
из FOSUserBundle, создайте этот шаблон:
<tt class="docutils literal"><code>&lt;your-project&gt;/templates/bundles/FOSUserBundle/Registration/confirmed.html.twig</code></tt></p>
<div class="admonition-wrapper">
<div class="caution"></div><div class="admonition admonition-caution"><p class="first admonition-title">Caution</p>
<p class="last">После добавления шаблона в новое место, <em>возможно</em>, вам необходимо будет очистить
кеш (<tt class="docutils literal"><code>php bin/console cache:clear</code></tt>), даже если вы в debug-режиме.</p>
</div></div>
<div class="admonition-wrapper" id="templating-overriding-core-templates-ru">
<div class="tip"></div><div class="admonition admonition-tip"><p class="first admonition-title">Tip</p>
<p class="last">Сам Symfony тоже использует некоторые бандлы, поэтому вы можете использовать этот же подход
для переопределения шаблонов ядра Symfony. Например, вы можете
<a class="reference internal" href="..\controller\error_pages.html"><em>настроить страницы ошибок</em></a> переопределяя шаблоны TwigBundle.</p>
</div></div>
</div>
<div class="section" id="id3">
<h2>Маршрутизация<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<p>Маршрутизация в Symfony никогда не импортируется автоматически. Если вы хотите
включить маршруты из любого пакета, то они должны быть импортированы вручную
откуда-то из вашего приложения (например, <tt class="docutils literal"><code>config/routes.yaml</code></tt>).</p>
<p>Самый простой способ &quot;переопределить&quot; маршрутизацию пакета - не импортировать
её в принципе. Вместо импортирования маршрутизации стороннего пакета, просто
скопируйте файл маршрутизации в ваше приложение, измените его и импортируйте.</p>
</div>
<div class="section" id="id4">
<h2>Контроллеры<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<p>Если контроллер является сервисом, смотрите следующий раздел о том, как пеоепределить
его. В обратном случае, определите новый маршрут + контроллер с одним путём, связанным
с контроллером, который вы хотите переопределить (и убедитесь, что новый маршрут загружается
до маршрута пакета).</p>
</div>
<div class="section" id="id5">
<h2>Сервисы и конфигурация<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h2>
<p>Если вы хотите изменить определения сервисов другого пакета, вы можете испльзовать
пропуск компилятора, чтобыизменить класс сервиса или чтобы изменить вызовы метода.
В следующем примере, реализующий класс для <tt class="docutils literal"><code>original-service-id</code></tt> изменён на
<tt class="docutils literal"><code>App\YourService</code></tt>:</p>
<div class="literal-block"><div class="highlight-diff"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span>// src/Kernel.php
namespace App;

// ...
<span class="gi">+ use App\Service\YourService;</span>
<span class="gi">+ use Symfony\Component\DependencyInjection\ContainerBuilder;</span>
<span class="gi">+ use Symfony\Component\DependencyInjection\Compiler\CompilerPassInterface;</span>

class Kernel extends BaseKernel implements CompilerPassInterface
{
<span class="gi">+     public function process(ContainerBuilder $container)</span>
<span class="gi">+     {</span>
<span class="gi">+         $definition = $container-&gt;findDefinition(&#39;original-service-id&#39;);</span>
<span class="gi">+         $definition-&gt;setClass(YourService::class);</span>
<span class="gi">+     }</span>
}
</pre></div>
</td></tr></table></div></div>
<p>Чтобы узнать больше о пропусках компилятора, см. <a class="reference internal" href="..\service_container\compiler_passes.html"><em>How to Work with Compiler Passes</em></a>.</p>
</div>
<div class="section" id="id6">
<h2>Сущности и их отображение<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h2>
<p>В связи с особенностями работы Doctrine, невозможно переопределить отображение
сущностей пакета. Однако, если пакет предоставляет отображённый суперкласс
(как, например, сущность <tt class="docutils literal"><code>User</code></tt> в FOSUserBundle), то можно переопределить
атрибуты и ассоциации. Узнайте больше об этой функции и её ограничениях в
<a class="reference external" href="http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/inheritance-mapping.html#overrides">документации Doctrine</a>.</p>
</div>
<div class="section" id="id7">
<h2>Формы<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h2>
<p>Существующие типы форм могут быть изменены путём определения
<a class="reference internal" href="..\form\create_form_type_extension.html"><em>расширений типа формы</em></a>.</p>
</div>
<div class="section" id="override-validation-ru">
<span id="id8"></span><h2>Метаданные валидации<a class="headerlink" href="#override-validation-ru" title="Permalink to this headline">¶</a></h2>
<p>Symfony загружает все файлы конфигурации валидации из каждого пакета и
комбинирует их в одно древо метаданных валидации. Это означает, что вы
можете добавить новые ограничения к свойству, но не можете переопределить
их.</p>
<p>Чтобы обойти это, сторонний пает должен иметь конфигурацию для
<a class="reference internal" href="..\validation\groups.html"><em>групп валидации</em></a>. Например, FOSUserBundle имеет
такую конфигурацию. Чтобы создать вашу собственную валидацию, добавьте
ограничения к новой группе валидации:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="literal-block"><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># config/validator/validation.yaml</span>
<span class="l l-Scalar l-Scalar-Plain">FOS\UserBundle\Model\User</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">properties</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">plainPassword</span><span class="p p-Indicator">:</span>
            <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">NotBlank</span><span class="p p-Indicator">:</span>
                <span class="l l-Scalar l-Scalar-Plain">groups</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">[</span><span class="nv">AcmeValidation</span><span class="p p-Indicator">]</span>
            <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">Length</span><span class="p p-Indicator">:</span>
                <span class="l l-Scalar l-Scalar-Plain">min</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">6</span>
                <span class="l l-Scalar l-Scalar-Plain">minMessage</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">fos_user.password.short</span>
                <span class="l l-Scalar l-Scalar-Plain">groups</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">[</span><span class="nv">AcmeValidation</span><span class="p p-Indicator">]</span>
</pre></div>
</td></tr></table></div></div>
</li>
<li><em>XML</em><div class="literal-block"><div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">&lt;!-- config/validator/validation.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;constraint-mapping</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/dic/constraint-mapping&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/dic/constraint-mapping</span>
<span class="s">        http://symfony.com/schema/dic/constraint-mapping/constraint-mapping-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;class</span> <span class="na">name=</span><span class="s">&quot;FOS\UserBundle\Model\User&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;plainPassword&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;constraint</span> <span class="na">name=</span><span class="s">&quot;NotBlank&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;option</span> <span class="na">name=</span><span class="s">&quot;groups&quot;</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;value&gt;</span>AcmeValidation<span class="nt">&lt;/value&gt;</span>
                <span class="nt">&lt;/option&gt;</span>
            <span class="nt">&lt;/constraint&gt;</span>

            <span class="nt">&lt;constraint</span> <span class="na">name=</span><span class="s">&quot;Length&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;option</span> <span class="na">name=</span><span class="s">&quot;min&quot;</span><span class="nt">&gt;</span>6<span class="nt">&lt;/option&gt;</span>
                <span class="nt">&lt;option</span> <span class="na">name=</span><span class="s">&quot;minMessage&quot;</span><span class="nt">&gt;</span>fos_user.password.short<span class="nt">&lt;/option&gt;</span>
                <span class="nt">&lt;option</span> <span class="na">name=</span><span class="s">&quot;groups&quot;</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;value&gt;</span>AcmeValidation<span class="nt">&lt;/value&gt;</span>
                <span class="nt">&lt;/option&gt;</span>
            <span class="nt">&lt;/constraint&gt;</span>
        <span class="nt">&lt;/property&gt;</span>
    <span class="nt">&lt;/class&gt;</span>
<span class="nt">&lt;/constraint-mapping&gt;</span>
</pre></div>
</td></tr></table></div></div>
</li>
</ul>
</div>
<p>Теперь, обновите конфигурацию FOSUserBundle так, чтобы он использовал ваши группы
валидации вместо исходных.</p>
</div>
<div class="section" id="override-translations-ru">
<span id="id9"></span><h2>Переводы<a class="headerlink" href="#override-translations-ru" title="Permalink to this headline">¶</a></h2>
<p>Переводы не связаны с пакетами, но связаны с доменами. Это означает, что вы
можете переопределить переводы из любого файла перевода, если он находится на
<a class="reference internal" href="..\components\translation.html#using-message-domains"><span>правильном домене</span></a>.</p>
<p>Переводы относятся не к бандлам, а к <a class="reference internal" href="..\components\translation.html#using-message-domains"><span>доменам переводов</span></a>.
Поэтому вы можете переопределить файл перевода любого бандла из главного каталога
<tt class="docutils literal"><code>translations/</code></tt>, нужно лишь убедиться, что новый файл использует тот же домен.</p>
<p>Например, для переопределения переводов, определённых в файле
<tt class="docutils literal"><code>Resources/translations/FOSUserBundle.es.yml</code></tt> из FOSUserBundle,
создайте файл <tt class="docutils literal"><code>&lt;your-project&gt;/translations/FOSUserBundle.es.yml</code></tt>.</p>
</div>
</div>


            </div>

            

            <div id="license">
                <p>Эта документация является переводом <a href="http://symfony.com/doc/current/index.html">официальной документации Symfony</a> и предоставляется по свободной лицензии <a rel="license nofollow" href="https://creativecommons.org/licenses/by-sa/3.0/deed.ru">CC BY-SA 3.0</a>.</p>
            </div>
        </div>
    </div>
</div></div>


  </body>
</body></html>