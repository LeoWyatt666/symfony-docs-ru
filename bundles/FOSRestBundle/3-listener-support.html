<!DOCTYPE html>
<html lang="en">
    <head>
        <!--[if IE]>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <![endif]-->
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta charset="UTF-8" /><script type="text/javascript">window.NREUM||(NREUM={}),__nr_require=function(e,t,n){function r(n){if(!t[n]){var o=t[n]={exports:{}};e[n][0].call(o.exports,function(t){var o=e[n][1][t];return r(o||t)},o,o.exports)}return t[n].exports}if("function"==typeof __nr_require)return __nr_require;for(var o=0;o<n.length;o++)r(n[o]);return r}({1:[function(e,t,n){function r(){}function o(e,t,n){return function(){return i(e,[f.now()].concat(u(arguments)),t?null:this,n),t?void 0:this}}var i=e("handle"),a=e(2),u=e(3),c=e("ee").get("tracer"),f=e("loader"),s=NREUM;"undefined"==typeof window.newrelic&&(newrelic=s);var p=["setPageViewName","setCustomAttribute","setErrorHandler","finished","addToTrace","inlineHit","addRelease"],d="api-",l=d+"ixn-";a(p,function(e,t){s[t]=o(d+t,!0,"api")}),s.addPageAction=o(d+"addPageAction",!0),s.setCurrentRouteName=o(d+"routeName",!0),t.exports=newrelic,s.interaction=function(){return(new r).get()};var m=r.prototype={createTracer:function(e,t){var n={},r=this,o="function"==typeof t;return i(l+"tracer",[f.now(),e,n],r),function(){if(c.emit((o?"":"no-")+"fn-start",[f.now(),r,o],n),o)try{return t.apply(this,arguments)}catch(e){throw c.emit("fn-err",[arguments,this,e],n),e}finally{c.emit("fn-end",[f.now()],n)}}}};a("setName,setAttribute,save,ignore,onEnd,getContext,end,get".split(","),function(e,t){m[t]=o(l+t)}),newrelic.noticeError=function(e){"string"==typeof e&&(e=new Error(e)),i("err",[e,f.now()])}},{}],2:[function(e,t,n){function r(e,t){var n=[],r="",i=0;for(r in e)o.call(e,r)&&(n[i]=t(r,e[r]),i+=1);return n}var o=Object.prototype.hasOwnProperty;t.exports=r},{}],3:[function(e,t,n){function r(e,t,n){t||(t=0),"undefined"==typeof n&&(n=e?e.length:0);for(var r=-1,o=n-t||0,i=Array(o<0?0:o);++r<o;)i[r]=e[t+r];return i}t.exports=r},{}],4:[function(e,t,n){t.exports={exists:"undefined"!=typeof window.performance&&window.performance.timing&&"undefined"!=typeof window.performance.timing.navigationStart}},{}],ee:[function(e,t,n){function r(){}function o(e){function t(e){return e&&e instanceof r?e:e?c(e,u,i):i()}function n(n,r,o,i){if(!d.aborted||i){e&&e(n,r,o);for(var a=t(o),u=m(n),c=u.length,f=0;f<c;f++)u[f].apply(a,r);var p=s[y[n]];return p&&p.push([b,n,r,a]),a}}function l(e,t){v[e]=m(e).concat(t)}function m(e){return v[e]||[]}function w(e){return p[e]=p[e]||o(n)}function g(e,t){f(e,function(e,n){t=t||"feature",y[n]=t,t in s||(s[t]=[])})}var v={},y={},b={on:l,emit:n,get:w,listeners:m,context:t,buffer:g,abort:a,aborted:!1};return b}function i(){return new r}function a(){(s.api||s.feature)&&(d.aborted=!0,s=d.backlog={})}var u="nr@context",c=e("gos"),f=e(2),s={},p={},d=t.exports=o();d.backlog=s},{}],gos:[function(e,t,n){function r(e,t,n){if(o.call(e,t))return e[t];var r=n();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!1}),r}catch(i){}return e[t]=r,r}var o=Object.prototype.hasOwnProperty;t.exports=r},{}],handle:[function(e,t,n){function r(e,t,n,r){o.buffer([e],r),o.emit(e,t,n)}var o=e("ee").get("handle");t.exports=r,r.ee=o},{}],id:[function(e,t,n){function r(e){var t=typeof e;return!e||"object"!==t&&"function"!==t?-1:e===window?0:a(e,i,function(){return o++})}var o=1,i="nr@id",a=e("gos");t.exports=r},{}],loader:[function(e,t,n){function r(){if(!x++){var e=h.info=NREUM.info,t=d.getElementsByTagName("script")[0];if(setTimeout(s.abort,3e4),!(e&&e.licenseKey&&e.applicationID&&t))return s.abort();f(y,function(t,n){e[t]||(e[t]=n)}),c("mark",["onload",a()+h.offset],null,"api");var n=d.createElement("script");n.src="https://"+e.agent,t.parentNode.insertBefore(n,t)}}function o(){"complete"===d.readyState&&i()}function i(){c("mark",["domContent",a()+h.offset],null,"api")}function a(){return E.exists&&performance.now?Math.round(performance.now()):(u=Math.max((new Date).getTime(),u))-h.offset}var u=(new Date).getTime(),c=e("handle"),f=e(2),s=e("ee"),p=window,d=p.document,l="addEventListener",m="attachEvent",w=p.XMLHttpRequest,g=w&&w.prototype;NREUM.o={ST:setTimeout,SI:p.setImmediate,CT:clearTimeout,XHR:w,REQ:p.Request,EV:p.Event,PR:p.Promise,MO:p.MutationObserver};var v=""+location,y={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-1071.min.js"},b=w&&g&&g[l]&&!/CriOS/.test(navigator.userAgent),h=t.exports={offset:u,now:a,origin:v,features:{},xhrWrappable:b};e(1),d[l]?(d[l]("DOMContentLoaded",i,!1),p[l]("load",r,!1)):(d[m]("onreadystatechange",o),p[m]("onload",r)),c("mark",["firstbyte",u],null,"api");var x=0,E=e(4)},{}]},{},["loader"]);</script>
        <meta name="robots" content="index, follow, all" />
        <meta name="Author" content="Symfony" />
                    <meta name="description" content="Step 3: Listener support: Listeners are a way to hook into the request handling. This Bundle provides various events from decoding the request content in the request (body listener), determining the c...">
                <meta name="Keywords" content="symfony3, symfony2, symfony, project, framework, php, php5, php7, open-source, components, symphony, symfony framework, symfony tutorial" />
        
                <link rel="search" type="application/opensearchdescription+xml" href="https://symfony.com/opensearch/documentation.xml" title="Symfony documentation" />

                <title>Step 3: Listener support ( FOS Rest Bundle Docs)</title>

        <link rel="preconnect" href="https://www.google-analytics.com">
        <link rel="preconnect" href="https://connect.symfony.com">

        <link rel="stylesheet" href="/build/css/app.8de5c8447487b89cfc05841ac9387adb.css">
            
    <link rel="stylesheet" href="/build/css/doc.daa7d9f0aac215d2211862c4e00c04fb.css">

        <script src="/build/manifest.d41d8cd98f00b204e980.js"></script>
        <script src="/build/js/app.688dd615bbeb331a3e91.js"></script>
        <script>
            window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
            ga('create', 'UA-89393-6', 'auto');
            ga('send', 'pageview');
        </script>
        <script async src='https://www.google-analytics.com/analytics.js'></script>
            <script src="/build/js/doc.c8dea92dfe91c5b56e4c.js"></script>

        <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png?v=yyalQXYGEA">
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png?v=yyalQXYGEA">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png?v=yyalQXYGEA">
        <link rel="manifest" href="/site.webmanifest?v=yyalQXYGEA">
        <link rel="mask-icon" href="/safari-pinned-tab.svg?v=yyalQXYGEA" color="#5bbad5">
        <link rel="shortcut icon" href="/favicon.ico?v=yyalQXYGEA">
        <meta name="msapplication-TileColor" content="#000000">
        <meta name="theme-color" content="#ffffff">
        <meta name="apple-mobile-web-app-title" content="Symfony">

                <meta name="twitter:site" content="@symfony">

                <meta property="fb:pages" content="211720082183067">

                            <meta property="og:type" content="website">
            <meta property="og:title" content="Step 3: Listener support ( FOS Rest Bundle Docs)">
            <meta property="og:image" content="https://symfony.com/images/v5/opengraph/symfony.png">

                            <meta property="og:description" content="Step 3: Listener support: Listeners are a way to hook into the request handling. This Bundle provides various events from decoding the request content in the request (body listener), determining the c...">
                    
                <meta name="msapplication-TileColor" content="#222222">
        <meta name="application-name" content="Symfony">
        <meta name="msapplication-tooltip" content="Official Symfony website">

                <meta name="theme-color" content="#222222">

            </head>

    <body>
        <script async>
            document.body.classList.add(localStorage.getItem('themeName'));
        </script>

        <script type="application/ld+json">{"@context":"https:\/\/schema.org","@type":"WebSite","name":"Symfony","url":"https:\/\/symfony.com","potentialAction":{"@type":"SearchAction","target":"https:\/\/symfony.com\/search?q={query}","query-input":"required name=query"}}</script>
        <script type="application/ld+json">{"@context":"https:\/\/schema.org","@type":"Organization","url":"https:\/\/symfony.com","name":"Symfony","logo":"https:\/\/symfony.com\/images\/v5\/logos\/sf-positive.svg","sameAs":["https:\/\/github.com\/symfony","https:\/\/stackoverflow.com\/questions\/tagged\/symfony","https:\/\/twitter.com\/symfony","https:\/\/www.facebook.com\/SymfonyFramework","https:\/\/www.youtube.com\/user\/SensioLabs","https:\/\/medium.com\/@symfony"]}</script>

        <div id="sln"></div>

                <div id="content_wrapper">
            <header>
                <section class="header__top">
                    <div class="container">
                        <div class="header__logo">
                            <a href="/">
                                <img src="/images/v5/logos/header-logo.svg" alt="Symfony" />
                            </a>
                        </div>
                        <div class="hidden-xs">
                            <a href="https://sensiolabs.com" title="SensioLabs, PHP services and software solutions for enterprise and community.">
                                <img height="17" src="/images/v5/pictos/slsponsor.svg" alt="Symfony is sponsored by SensioLabs" />
                            </a>
                        </div>
                        <div class="visible-xs">
                            <button class="header__toggle__menu" type="button" name="toggle" aria-label="Toggle menu">
                                <i class="icon icon--large icon--white"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1664 1344v128q0 26-19 45t-45 19H192q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1408q26 0 45 19t19 45zm0-512v128q0 26-19 45t-45 19H192q-26 0-45-19t-19-45V832q0-26 19-45t45-19h1408q26 0 45 19t19 45zm0-512v128q0 26-19 45t-45 19H192q-26 0-45-19t-19-45V320q0-26 19-45t45-19h1408q26 0 45 19t19 45z"/></svg></i>
                            </button>
                        </div>
                    </div>
                </section>

                <section class="header__bottom" data-spy="affix" data-offset-top="90">
                    <div class="container">
                        <nav class="header__nav">
                            <ul>
                                <li class="header__logo--responsive">
                                    <a href="/"><img alt="Symfony logo" src="/images/v5/logos/sf-positive.svg" /></a>
                                </li>

                                
        <li >
        <a href="/what-is-symfony">
            About
                    </a>
    </li>
            <li class="selected">
        <a href="/doc/current/index.html">
            Documentation
                    </a>
    </li>
            <li >
        <a href="https://symfonycasts.com/">
            Screencasts
                            <span style="background: var(--accent-color); border-radius: 2px; color: white; font-size: 11px; padding: 2px 4px;">NEW</span>
                    </a>
    </li>
            <li >
        <a href="/community">
            Community
                    </a>
    </li>
            <li >
        <a href="https://sensiolabs.com">
            Business Solutions
                    </a>
    </li>
            <li >
        <a href="/events">
            Events
                    </a>
    </li>
            <li >
        <a href="/blog/">
            News
                    </a>
    </li>
            <li >
        <a href="/account">
            Account
                    </a>
    </li>
    
                                <li class="hidden-xs header__download">
                                    <a href="/download">Download</a>
                                </li>
                            </ul>
                        </nav>
                    </div>
                </section>
            </header>

                        <div class="container">
                <style>
    .banner__title,
    .banner__title:hover {
        color: #ccc;
        display: block;
        font-size: 16px;
        font-weight: 300;
        line-height: 1.2;
        padding: 0 15px 0 5px;
        text-transform: uppercase;
    }
    .banner__title:hover { color: #aaa; text-decoration: underline; }

    @media (min-width: 768px) {
        .banner__title,
        .banner__title:hover { font-size: 24px; letter-spacing: 1px; padding: 0 45px 0 5px; }
    }

    .dark-theme .banner_sfcon a { color: #a244c2 !important; }
    .dark-theme img { filter: brightness(105%); }
    .dark-theme .banner_sfcon img { filter: brightness(130%); }
</style>
<div class="d-none d-sm-block box box--small box--shadow" style="margin-top: 0; margin-bottom: 30px;">
    <div class="d-flex font-system">
        <div class="col">
            <a class="banner__title" href="https://live.symfony.com/">Upcoming Conferences</a>
        </div>

        <div class="col" style="padding: 0 15px">
            <a href="https://usa2018.live.symfony.com/">
                <img height="35" src="/images/v5/conferences/sflovephp-medium.svg" />
            </a>
            <p style="border-top: 1.5px solid rgba(213, 5, 78, 0.2); line-height: 1.2; margin: 5px 0 0; padding: 5px 0 0;">
                <a href="https://usa2018.live.symfony.com/" class="block text-uppercase" style="color: rgb(213, 5, 78)">
                    <b class="block">USA 2018</b> <small>October 11-12</small>
                </a>
            </p>
        </div>

        <div class="col" style="padding: 0 15px">
            <a href="https://live.symfony.com/">
                <img height="35" src="/images/v5/conferences/sflive-medium.svg" />
            </a>
            <p style="border-top: 1.5px solid rgba(213, 5, 78, 0.2); line-height: 1.2; margin: 5px 0 0; padding: 5px 0 0;">
                <a href="http://berlin2018.live.symfony.com/" class="block text-uppercase" style="color: rgb(213, 5, 78)">
                    <b class="block">Berlin 2018</b> <small>October 24-26</small>
                </a>
            </p>
        </div>

        <div class="col banner_sfcon" style="padding: 0 15px">
            <a href="https://lisbon2018.symfony.com/">
                <img height="35" src="/images/v5/conferences/sfcon-large.svg" />
            </a>
            <p style="border-top: 1.5px solid rgba(110, 53, 140, 0.2); line-height: 1.2; margin: 5px 0 0; padding: 5px 0 0;">
                <a href="https://lisbon2018.symfony.com/" class="block text-uppercase" style="color: rgb(110, 53, 140)">
                    <b class="block">Lisbon 2018</b> <small>December 6-8</small>
                </a>
            </p>
        </div>
    </div>
</div>


                                    <div class="row">
                        <aside class="col-sm-3">
                                                                                    <div class="doc__toc">
                <h4 class="text-accent">Table of Contents</h4>
                <div class="box box--small">
                    <ul>
<li><a class="reference internal" href="#">Step 3: Listener support</a><ul>
<li><a class="reference internal" href="#view-response-listener">View Response listener</a></li>
<li><a class="reference internal" href="#body-listener">Body listener</a><ul>
<li><a class="reference internal" href="#decoders">Decoders</a></li>
<li><a class="reference internal" href="#array-normalizer">Array Normalizer</a></li>
</ul>
</li>
<li><a class="reference internal" href="#request-body-converter-listener">Request Body Converter Listener</a><ul>
<li><a class="reference internal" href="#validation">Validation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#format-listener">Format listener</a><ul>
<li><a class="reference internal" href="#disabling-the-format-listener-via-rules">Disabling the Format Listener via Rules</a></li>
<li><a class="reference internal" href="#media-type-version-extraction">Media Type Version Extraction</a></li>
</ul>
</li>
<li><a class="reference internal" href="#mime-type-listener">Mime type listener</a></li>
<li><a class="reference internal" href="#param-fetcher-listener">Param fetcher listener</a></li>
<li><a class="reference internal" href="#allowed-http-methods-listener">Allowed Http Methods Listener</a></li>
<li><a class="reference internal" href="#security-exception-listener">Security Exception Listener</a></li>
<li><a class="reference internal" href="#priorities">Priorities</a></li>
</ul>
</li>
</ul>

                </div>
            </div>
            
            <div class="hidden-xs m-b-30 doc__nav">
        <div class="panel">
            <div class="panel-heading">
                <a data-toggle="collapse" href="#doc-menu-1" class="collapsed">Getting Started <i class="icon icon--small icon--gray-light pull-right"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1363 877l-742 742q-19 19-45 19t-45-19l-166-166q-19-19-19-45t19-45l531-531-531-531q-19-19-19-45t19-45L531 45q19-19 45-19t45 19l742 742q19 19 19 45t-19 45z"/></svg></i></a>
            </div>
            <div id="doc-menu-1" class="panel-collapse collapse ">
                <div class="panel-body">
                    

    <ul class="list--unstyled">
                    <li class="">
                                <a class="" href="/doc/current/setup.html">
                    Setup
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/page_creation.html">
                    Creating Pages
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/routing.html">
                    Routing
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/controller.html">
                    Controllers
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/templating.html">
                    Templates
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/configuration.html">
                    Configuration
                </a>
            </li>
            </ul>


                </div>
            </div>
        </div>

        <div class="panel">
            <div class="panel-heading">
                <a data-toggle="collapse" href="#doc-menu-2" class="collapsed">Guides <i class="icon icon--small icon--gray-light pull-right"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1363 877l-742 742q-19 19-45 19t-45-19l-166-166q-19-19-19-45t19-45l531-531-531-531q-19-19-19-45t19-45L531 45q19-19 45-19t45 19l742 742q19 19 19 45t-19 45z"/></svg></i></a>
            </div>
            <div id="doc-menu-2" class="panel-collapse collapse">
                <div class="panel-body">
                    

    <ul class="">
                    <li class="">
                                <a class="" href="/doc/current/bundles.html">
                    Bundles
                </a>
            </li>
                    <li class="">
                                <a class="important" href="/doc/current/console.html">
                    Console
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/contributing/index.html">
                    Contributing
                </a>
            </li>
                    <li class="">
                                <a class="very-important" href="/doc/current/doctrine.html">
                    Databases (Doctrine ORM)
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/deployment.html">
                    Deployment
                </a>
            </li>
                    <li class="">
                                <a class="important" href="/doc/current/email.html">
                    Email
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/event_dispatcher.html">
                    Event Dispatcher
                </a>
            </li>
                    <li class="">
                                <a class="important" href="/doc/current/setup/flex.html">
                    Flex
                </a>
            </li>
                    <li class="">
                                <a class="very-important" href="/doc/current/forms.html">
                    Forms
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/frontend.html">
                    Front-end
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/http_cache.html">
                    HTTP Cache
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/logging.html">
                    Logging
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/4.1/messenger.html">
                    Messenger
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/performance.html">
                    Performance
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/profiler.html">
                    Profiler
                </a>
            </li>
                    <li class="">
                                <a class="important" href="/doc/current/security.html">
                    Security
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/serializer.html">
                    Serializer
                </a>
            </li>
                    <li class="">
                                <a class="very-important" href="/doc/current/service_container.html">
                    Service Container
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/session.html">
                    Sessions
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/testing.html">
                    Testing
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/translation.html">
                    Translation (i18n)
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/validation.html">
                    Validation
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/workflow.html">
                    Workflow
                </a>
            </li>
            </ul>


                </div>
            </div>
        </div>

        <div class="panel">
            <div class="panel-heading">
                <a data-toggle="collapse" href="#doc-menu-3" class="collapsed">Components <i class="icon icon--small icon--gray-light pull-right"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1363 877l-742 742q-19 19-45 19t-45-19l-166-166q-19-19-19-45t19-45l531-531-531-531q-19-19-19-45t19-45L531 45q19-19 45-19t45 19l742 742q19 19 19 45t-19 45z"/></svg></i></a>
            </div>
            <div id="doc-menu-3" class="panel-collapse collapse">
                <div class="panel-body">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
                <ul class="">
                    <li class="">
                                <a class="" href="/doc/current/components/asset.html">
                    Asset
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/components/browser_kit.html">
                    BrowserKit
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/components/cache.html">
                    Cache
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/components/class_loader.html">
                    ClassLoader
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/components/config.html">
                    Config
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/components/console.html">
                    Console
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/components/index.html">
                    Contracts
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/components/css_selector.html">
                    CssSelector
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/components/debug.html">
                    Debug
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/components/dependency_injection.html">
                    DependencyInjection
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/components/dom_crawler.html">
                    DomCrawler
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/components/dotenv.html">
                    Dotenv
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/components/event_dispatcher.html">
                    EventDispatcher
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/components/expression_language.html">
                    ExpressionLanguage
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/components/filesystem.html">
                    Filesystem
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/components/finder.html">
                    Finder
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/components/form.html">
                    Form
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/components/http_foundation.html">
                    HttpFoundation
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/components/http_kernel.html">
                    HttpKernel
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/components/intl.html">
                    Intl
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/components/ldap.html">
                    Ldap
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/components/lock.html">
                    Lock
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/components/messenger.html">
                    Messenger
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/components/options_resolver.html">
                    OptionsResolver
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/components/phpunit_bridge.html">
                    PHPUnit Bridge
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/components/polyfill_apcu.html">
                    Polyfill APCu
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/components/polyfill_ctype.html">
                    Polyfill Ctype
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/components/polyfill_iconv.html">
                    Polyfill Iconv
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/components/polyfill_intl_grapheme.html">
                    Polyfill Intl Grapheme
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/components/polyfill_intl_icu.html">
                    Polyfill Intl ICU
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/components/polyfill_intl_normalizer.html">
                    Polyfill Intl Normalizer
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/components/polyfill_mbstring.html">
                    Polyfill Mbstring
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/components/polyfill_php54.html">
                    Polyfill PHP 5.4
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/components/polyfill_php55.html">
                    Polyfill PHP 5.5
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/components/polyfill_php56.html">
                    Polyfill PHP 5.6
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/components/polyfill_php70.html">
                    Polyfill PHP 7.0
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/components/polyfill_php71.html">
                    Polyfill PHP 7.1
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/components/polyfill_php72.html">
                    Polyfill PHP 7.2
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/components/polyfill_php73.html">
                    Polyfill PHP 7.3
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/components/process.html">
                    Process
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/components/property_access.html">
                    PropertyAccess
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/components/property_info.html">
                    PropertyInfo
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/components/routing.html">
                    Routing
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/components/security.html">
                    Security
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/components/serializer.html">
                    Serializer
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/components/stopwatch.html">
                    Stopwatch
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/components/templating.html">
                    Templating
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/components/translation.html">
                    Translation
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/components/validator.html">
                    Validator
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/components/var_dumper.html">
                    VarDumper
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/components/workflow.html">
                    Workflow
                </a>
            </li>
                    <li class="">
                                <a class="" href="/doc/current/components/yaml.html">
                    Yaml
                </a>
            </li>
            </ul>


                </div>
            </div>
        </div>

        <div class="panel">
            <div class="panel-heading">
                <a class="collapsed" href="https://training.sensiolabs.com/en/courses?q=symfony">Training</a>
            </div>
        </div>

        <div class="panel">
            <div class="panel-heading">
                <a class="collapsed" href="https://certification.symfony.com/">Certification</a>
            </div>
        </div>
    </div>


                                                                <div class="ads m-b-30">
            <div class="ad m-b-15" id="ad_trainings_1">
            <h3>
                <a href="https://training.sensiolabs.com/en/courses?q=symfony" data-tracked data-category="Ads" data-action="Ads" data-label="trainings_1">
                    Master Symfony fundamentals
                </a>
            </h3>
            <div>Be trained by SensioLabs experts (2 to 6 day sessions -- French or English).</div>
            <div><cite>training.sensiolabs.com</cite></div>
        </div>
            <div class="ad m-b-15" id="ad_support_1">
            <h3>
                <a href="https://sensiolabs.com/en/packaged-solutions/index.html" data-tracked data-category="Ads" data-action="Ads" data-label="support_1">
                    Discover SensioLabs&#039; Professional Business Solutions
                </a>
            </h3>
            <div>Peruse our complete Symfony &amp; PHP solutions catalog for your web development needs.</div>
            <div><cite>sensiolabs.com</cite></div>
        </div>
    </div>

<div class="ads">
    
    <a href="https://blackfire.io/24-days" data-tracked data-category="Ads" data-action="sidebar" data-label="blackfire">
        <img src="/images/blackfire-profiler.png" class="m-b-15 img-responsive" alt="Blackfire Profiler Fire up your PHP Apps Performance" />
    </a>
            <a href="https://insight.symfony.com" data-tracked data-category="Ads" data-action="sidebar" data-label="insight">
            <img src="/images/symfonyinsight.png" class="m-b-15 img-responsive" alt="PHP Project Quality Done Right" />
        </a>
    </div>
                                                    </aside>

                        <main class="col-sm-9">
                                                                                                                                    <ol class="breadcrumb">
                                                                                    <li class="">
                                                                                                <a href="/">Home</a>
                                            </li>
                                                                                    <li class="">
                                                                                                <a href="/doc/current/index.html">Documentation</a>
                                            </li>
                                                                                    <li class="">
                                                                                                <a href="/doc/bundles/">Bundles</a>
                                            </li>
                                                                                    <li class="">
                                                                                                <a href="/doc/current/bundles/FOSRestBundle/index.html">FOSRestBundle</a>
                                            </li>
                                                                                    <li class="active">
                                                                                                <a href="">Step 3: Listener support</a>
                                            </li>
                                                                            </ol>

                                    <script type="application/ld+json">{"@context":"https:\/\/schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"\/","name":"Home"}},{"@type":"ListItem","position":2,"item":{"@id":"\/doc\/current\/index.html","name":"Documentation"}},{"@type":"ListItem","position":3,"item":{"@id":"\/doc\/bundles\/","name":"Bundles"}},{"@type":"ListItem","position":4,"item":{"@id":"\/doc\/current\/bundles\/FOSRestBundle\/index.html","name":"FOSRestBundle"}},{"@type":"ListItem","position":5,"item":{"@id":"\/doc\/current\/bundles\/FOSRestBundle\/3-listener-support.html","name":"Step 3: Listener support"}}]}</script>
                                
                                    
    
    
                                                                    <h1>Step 3: Listener support</h1>
                                
                                    
    <div class="page">
        
        <div class="doc__tools clearfix">
                            <div class="doc__version">
    <div class="version__current">
        1.5 version
        <i class="pull-right icon icon--small icon--white"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1408 704q0 26-19 45l-448 448q-19 19-45 19t-45-19L403 749q-19-19-19-45t19-45 45-19h896q26 0 45 19t19 45z"/></svg></i>    </div>

            <div class="version__all version__all--narrow">
                            <strong>Maintained</strong>
                <div class="version__list">
                                            <a href="/doc/1.7/bundles/FOSRestBundle/3-listener-support.html">
                            1.7
                                                    </a>
                                            <a href="/doc/master/bundles/FOSRestBundle/3-listener-support.html">
                            2.0
                                                            <small>master</small>
                                                    </a>
                                    </div>
            
                    </div>
    </div>

            
                            <div class="doc__edit">
                    <a href="https://github.com/FriendsOfSymfony/FOSRestBundle/edit/1.5/Resources/doc/3-listener-support.rst">edit this page</a>
                </div>
                    </div>

        <div class="section" id="step-3-listener-support">
<h1>Step 3: Listener support<a class="headerlink" href="#step-3-listener-support" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="http://symfony.com/doc/master/cookbook/service_container/event_listener.html">Listeners</a> are a way to hook into the request handling. This Bundle provides
various events from decoding the request content in the request (body listener),
determining the correct response format (format listener), reading parameters
from the request (parameter fetcher listener), to formatting the response either
with a template engine like twig or to f.e. xml or json using a serializer (view
response listener)) as well as automatically setting the accepted HTTP methods
in the response (accept listener).</p>
<p>With this in mind we now turn to explain each one of them.</p>
<p>All listeners except the <code class="notranslate">mime_type</code> one are disabled by default. You can
enable one or more of these listeners.  For example, below you can see how to
enable all listeners:</p>
<div class="literal-block notranslate"><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span class="c1"># app/config/config.yml</span>
<span class="l-Scalar-Plain">fos_rest</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">param_fetcher_listener</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>
    <span class="l-Scalar-Plain">body_listener</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>
    <span class="l-Scalar-Plain">format_listener</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>
    <span class="l-Scalar-Plain">view</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">view_response_listener</span><span class="p-Indicator">:</span> <span class="s">&#39;force&#39;</span>
</pre></div>
</td></tr></table></div></div>
<div class="section" id="view-response-listener">
<h2>View Response listener<a class="headerlink" href="#view-response-listener" title="Permalink to this headline">¶</a></h2>
<p>The view response listener makes it possible to simply return a <code class="notranslate">View</code>
instance from action controllers. The final output will then automatically be
processed via the listener by the <code class="notranslate">fos_rest.view_handler</code> service.</p>
<p>This requires adding the <a class="reference external" href="http://symfony.com/doc/current/bundles/SensioFrameworkExtraBundle/index.html">SensioFrameworkExtraBundle</a> to your vendors.</p>
<p>Now inside a controller its possible to simply return a <code class="notranslate">View</code> instance.</p>
<div class="literal-block notranslate"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">use</span> <span class="nx">FOS\RestBundle\View\View</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">UsersController</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getUsersAction</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$view</span> <span class="o">=</span> <span class="nx">View</span><span class="o">::</span><span class="na">create</span><span class="p">();</span>

        <span class="o">...</span>

        <span class="nv">$view</span><span class="o">-&gt;</span><span class="na">setData</span><span class="p">(</span><span class="nv">$data</span><span class="p">);</span>
        <span class="k">return</span> <span class="nv">$view</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
<p>As this feature is heavily based on the <a class="reference external" href="http://symfony.com/doc/current/bundles/SensioFrameworkExtraBundle/index.html">SensioFrameworkExtraBundle</a>, the
example can further be simplified by using the various annotations supported by
that bundle. There is also one additional annotation called <code class="notranslate">&#64;View()</code> which
extends from the <code class="notranslate">&#64;Template()</code> annotation.</p>
<p>The <code class="notranslate">&#64;View()</code> and <code class="notranslate">&#64;Template()</code> annotations behave essentially the same with
a minor difference. When <code class="notranslate">view_response_listener</code> is set to <code class="notranslate">true</code> instead
of <code class="notranslate">force</code> and <code class="notranslate">&#64;View()</code> is not used, then rendering will be delegated to
<a class="reference external" href="http://symfony.com/doc/current/bundles/SensioFrameworkExtraBundle/index.html">SensioFrameworkExtraBundle</a>.</p>
<p>Note that it is necessary to disable view annotations in
<a class="reference external" href="http://symfony.com/doc/current/bundles/SensioFrameworkExtraBundle/index.html">SensioFrameworkExtraBundle</a> so that FOSRestBundle can take over the handling.
However FOSRestBundle will do this automatically but it does not override any
explicit configuration. So make sure to remove or disable the following setting:</p>
<div class="literal-block notranslate"><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span class="c1"># app/config/config.yml</span>
<span class="l-Scalar-Plain">fos_rest</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">view</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">view_response_listener</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">force</span>

<span class="l-Scalar-Plain">sensio_framework_extra</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">view</span><span class="p-Indicator">:</span>    <span class="p-Indicator">{</span> <span class="nv">annotations</span><span class="p-Indicator">:</span> <span class="nv">false</span> <span class="p-Indicator">}</span>
</pre></div>
</td></tr></table></div></div>
<div class="literal-block notranslate"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">use</span> <span class="nx">FOS\RestBundle\Controller\Annotations\View</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">UsersController</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @View()</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getUsersAction</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="o">...</span>

        <span class="k">return</span> <span class="nv">$data</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
<p>If <code class="notranslate">&#64;View()</code> is used, the template variable name used to render templating
formats can be configured (default  <code class="notranslate">'data'</code>):</p>
<div class="literal-block notranslate"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span class="o">&lt;?</span><span class="nx">php</span>

<span class="sd">/**</span>
<span class="sd"> * @View(templateVar=&quot;users&quot;)</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">getUsersAction</span><span class="p">()</span>
<span class="p">{</span>
    <span class="c1">//...</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
<p>The status code of the view can also be configured:</p>
<div class="literal-block notranslate"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span class="o">&lt;?</span><span class="nx">php</span>

<span class="sd">/**</span>
<span class="sd"> * @View(statusCode=204)</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">deleteUserAction</span><span class="p">()</span>
<span class="p">{</span>
    <span class="c1">//...</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
<p>The groups for the serializer can be configured as follows:</p>
<div class="literal-block notranslate"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span class="o">&lt;?</span><span class="nx">php</span>

<span class="sd">/**</span>
<span class="sd"> * @View(serializerGroups={&quot;group1&quot;, &quot;group2&quot;})</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">getUsersAction</span><span class="p">()</span>
<span class="p">{</span>
    <span class="c1">//...</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
<p>Enabling the MaxDepth exclusion strategy support for the serializer can be
configured as follows:</p>
<div class="literal-block notranslate"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span class="o">&lt;?</span><span class="nx">php</span>

<span class="sd">/**</span>
<span class="sd"> * @View(serializerEnableMaxDepthChecks=true)</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">getUsersAction</span><span class="p">()</span>
<span class="p">{</span>
    <span class="c1">//...</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
<p>See <a class="reference external" href="https://github.com/liip/LiipHelloBundle/blob/master/Controller/ExtraController.php">this example code</a> for more details.</p>
<p>The ViewResponse listener will automatically populate your view with request
attributes if you do not provide any data when returning a view object. This
behaviour comes from <a class="reference external" href="http://symfony.com/doc/current/bundles/SensioFrameworkExtraBundle/index.html">SensioFrameworkExtraBundle</a> and will automatically add
any variables listed in the <code class="notranslate">_template_default_vars</code> request attribute when no
data is supplied. In some cases, this is not desirable and can be disabled by
either supplying the data you want or disabling the automatic population of data
with the <code class="notranslate">&#64;View</code> annotation:</p>
<div class="literal-block notranslate"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span class="sd">/**</span>
<span class="sd"> * $user will no longer end up in the View&#39;s data.</span>
<span class="sd"> *</span>
<span class="sd"> * @View(populateDefaultVars=false)</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">getUserDetails</span><span class="p">(</span><span class="nx">User</span> <span class="nv">$user</span><span class="p">)</span>
<span class="p">{</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
</div>
<div class="section" id="body-listener">
<h2>Body listener<a class="headerlink" href="#body-listener" title="Permalink to this headline">¶</a></h2>
<p>The Request body listener makes it possible to decode the contents of a request
in order to populate the &quot;request&quot; parameter bag of the Request. This for
example allows to receive data that normally would be sent via POST as
<code class="notranslate">application/x-www-form-urlencode</code> in a different format (for example
application/json) in a PUT.</p>
<div class="section" id="decoders">
<h3>Decoders<a class="headerlink" href="#decoders" title="Permalink to this headline">¶</a></h3>
<p>You can add a decoder for a custom format. You can also replace the default
decoder services provided by the bundle for the <code class="notranslate">json</code> and <code class="notranslate">xml</code> formats.
Below you can see how to override the decoder for the json format (the xml
decoder is explicitly kept to its default service):</p>
<div class="literal-block notranslate"><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span class="c1"># app/config/config.yml</span>
<span class="l-Scalar-Plain">fos_rest</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">body_listener</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">decoders</span><span class="p-Indicator">:</span>
            <span class="l-Scalar-Plain">json</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">acme.decoder.json</span>
            <span class="l-Scalar-Plain">xml</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">fos_rest.decoder.xml</span>
</pre></div>
</td></tr></table></div></div>
<p>Your custom decoder service must use a class that implements the
<code class="notranslate">FOS\RestBundle\Decoder\DecoderInterface</code>.</p>
<p>If you want to be able to use form with checkbox and have true and false value
(without any issue) you have to use: <code class="notranslate">fos_rest.decoder.jsontoform</code> (available
since fosrest 0.8.0)</p>
<p>If the listener receives content that it tries to decode but the decode fails
then a BadRequestHttpException will be thrown with the message: <code class="notranslate">'Invalid ' .
$format . ' message received'</code>. When combined with the <a class="reference internal" href="4-exception-controller-support.html"><em>exception controller
support</em></a> this means your API will provide
useful error messages to your API users if they are making invalid requests.</p>
</div>
<div class="section" id="array-normalizer">
<h3>Array Normalizer<a class="headerlink" href="#array-normalizer" title="Permalink to this headline">¶</a></h3>
<p>Array Normalizers allow to transform the data after it has been decoded in order
to facilitate its processing.</p>
<p>For example, you may want your API's clients to be able to send requests with
underscored keys but if you use a decoder without a normalizer, you will receive
the data as it is and it can lead to incorrect mapping if you submit the request
directly to a Form. If you wish the body listener to transform underscored keys
to camel cased ones, you can use the <code class="notranslate">camel_keys</code> array normalizer:</p>
<div class="literal-block notranslate"><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span class="c1"># app/config/config.yml</span>
<span class="l-Scalar-Plain">fos_rest</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">body_listener</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">array_normalizer</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">fos_rest.normalizer.camel_keys</span>
</pre></div>
</td></tr></table></div></div>
<p>Sometimes an array contains a key, which once normalized, will override an
existing array key. For example <code class="notranslate">foo_bar</code> and <code class="notranslate">foo_Bar</code> will both lead to
<code class="notranslate">fooBar</code>. If the normalizer receives this data, the listener will throw a
BadRequestHttpException with the message <code class="notranslate">The key &quot;foo_Bar&quot; is invalid as it
will override the existing key &quot;fooBar&quot;</code>.</p>
<p>NB: If you use the <code class="notranslate">camel_keys</code> normalizer, you must be careful when choosing
your Form name.</p>
<p>You can also create your own array normalizer by implementing the
<code class="notranslate">FOS\RestBundle\Normalizer\ArrayNormalizerInterface</code>.</p>
<div class="literal-block notranslate"><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span class="c1"># app/config/config.yml</span>
<span class="l-Scalar-Plain">fos_rest</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">body_listener</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">array_normalizer</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">acme.normalizer.custom</span>
</pre></div>
</td></tr></table></div></div>
<p>By default, the array normalizer is only applied to requests with a decodable format.
If you want form data to be normalized, you can use the <code class="notranslate">forms</code> flag:</p>
<div class="literal-block notranslate"><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span class="c1"># app/config/config.yml</span>
<span class="l-Scalar-Plain">fos_rest</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">body_listener</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">array_normalizer</span><span class="p-Indicator">:</span>
            <span class="l-Scalar-Plain">service</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">fos_rest.normalizer.camel_keys</span>
            <span class="l-Scalar-Plain">forms</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>
</pre></div>
</td></tr></table></div></div>
</div>
</div>
<div class="section" id="request-body-converter-listener">
<h2>Request Body Converter Listener<a class="headerlink" href="#request-body-converter-listener" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://symfony.com/doc/master/bundles/SensioFrameworkExtraBundle/annotations/converters.html">ParamConverters</a> are a way to populate objects and inject them as controller
method arguments. The Request body converter makes it possible to deserialize
the request body into an object.</p>
<p>This converter requires that you have installed <a class="reference external" href="http://symfony.com/doc/current/bundles/SensioFrameworkExtraBundle/index.html">SensioFrameworkExtraBundle</a>
and have the converters enabled:</p>
<div class="literal-block notranslate"><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span class="c1"># app/config/config.yml</span>
<span class="l-Scalar-Plain">sensio_framework_extra</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">request</span><span class="p-Indicator">:</span> <span class="p-Indicator">{</span> <span class="nv">converters</span><span class="p-Indicator">:</span> <span class="nv">true</span> <span class="p-Indicator">}</span>
</pre></div>
</td></tr></table></div></div>
<p>To enable the Request body converter, add the following configuration:</p>
<div class="literal-block notranslate"><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span class="c1"># app/config/config.yml</span>
<span class="l-Scalar-Plain">fos_rest</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">body_converter</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">enabled</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>
</pre></div>
</td></tr></table></div></div>
<div class="admonition-wrapper">
<div class="note"></div><div class="admonition admonition-note"><p class="first admonition-title">Note</p>
<p class="last">You will probably want to disable the automatic route generation
(<code class="notranslate">&#64;NoRoute</code>) for routes using the body converter, and instead define the
routes manually to avoid having the deserialized, typehinted objects
(<code class="notranslate">$post</code> in this example) appear in the route as a parameter.</p>
</div></div>
<p>Now, in the following example, the request body will be deserialized into a new
instance of <code class="notranslate">Post</code> and injected into the <code class="notranslate">$post</code> variable:</p>
<div class="literal-block notranslate"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">use</span> <span class="nx">Sensio\Bundle\FrameworkExtraBundle\Configuration\ParamConverter</span><span class="p">;</span>

<span class="c1">// ...</span>

<span class="sd">/**</span>
<span class="sd"> * @ParamConverter(&quot;post&quot;, converter=&quot;fos_rest.request_body&quot;)</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">putPostAction</span><span class="p">(</span><span class="nx">Post</span> <span class="nv">$post</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
<p>You can configure the context used by the serializer during deserialization
via the <code class="notranslate">deserializationContext</code> option:</p>
<div class="literal-block notranslate"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span class="sd">/**</span>
<span class="sd"> * @ParamConverter(&quot;post&quot;, converter=&quot;fos_rest.request_body&quot;, options={&quot;deserializationContext&quot;={&quot;groups&quot;={&quot;group1&quot;, &quot;group2&quot;}, &quot;version&quot;=&quot;1.0&quot;}})</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">putPostAction</span><span class="p">(</span><span class="nx">Post</span> <span class="nv">$post</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
<div class="section" id="validation">
<h3>Validation<a class="headerlink" href="#validation" title="Permalink to this headline">¶</a></h3>
<p>If you would like to validate the deserialized object, you can do so by
enabling validation:</p>
<div class="literal-block notranslate"><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span class="c1"># app/config/config.yml</span>
<span class="l-Scalar-Plain">fos_rest</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">body_converter</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">enabled</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>
        <span class="l-Scalar-Plain">validate</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>
        <span class="l-Scalar-Plain">validation_errors_argument</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">validationErrors</span> <span class="c1"># This is the default value</span>
</pre></div>
</td></tr></table></div></div>
<p>The validation errors will be set on the <code class="notranslate">validationErrors</code> controller argument:</p>
<div class="literal-block notranslate"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span class="sd">/**</span>
<span class="sd"> * @ParamConverter(&quot;post&quot;, converter=&quot;fos_rest.request_body&quot;)</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">putPostAction</span><span class="p">(</span><span class="nx">Post</span> <span class="nv">$post</span><span class="p">,</span> <span class="nx">ConstraintViolationListInterface</span> <span class="nv">$validationErrors</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">count</span><span class="p">(</span><span class="nv">$validationErrors</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Handle validation errors</span>
    <span class="p">}</span>

    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
</div>
</div>
<div class="section" id="format-listener">
<h2>Format listener<a class="headerlink" href="#format-listener" title="Permalink to this headline">¶</a></h2>
<p>The Request format listener attempts to determine the best format for the
request based on the Request's Accept-Header and the format priority
configuration. This way it becomes possible to leverage Accept-Headers to
determine the request format, rather than a file extension (like foo.json).</p>
<p>The <code class="notranslate">priorities</code> define the order of media types as the application
prefers. Note that if a format is provided instead of a media type, the
format is converted into a list of media types matching the format.
The algorithm iteratively examines the provided Accept header first
looking at all the options with the highest <code class="notranslate">q</code>. The first priority that
matches is returned. If none match the next lowest set of Accept headers with
equal <code class="notranslate">q</code> is examined and so on until there are no more Accept headers to
check. In this case <code class="notranslate">fallback_format</code> is used.</p>
<p>Note that if <code class="notranslate">_format</code> is matched inside the route, then a virtual Accept
header setting is added with a <code class="notranslate">q</code> setting one lower than the lowest Accept
header, meaning that format is checked for a match in the priorities last. If
<code class="notranslate">prefer_extension</code> is set to <code class="notranslate">true</code> then the virtual Accept header will be
one higher than the highest <code class="notranslate">q</code> causing the extension to be checked first.
Setting <code class="notranslate">priorities</code> to a non empty array enables Accept header negotiations.</p>
<div class="literal-block notranslate"><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span class="c1"># app/config/config.yml</span>
<span class="l-Scalar-Plain">fos_rest</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">format_listener</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">rules</span><span class="p-Indicator">:</span>
            <span class="c1"># setting fallback_format to json means that instead of considering the next rule in case of a priority mismatch, json will be used</span>
            <span class="p-Indicator">-</span> <span class="p-Indicator">{</span> <span class="nv">path</span><span class="p-Indicator">:</span> <span class="s">&#39;^/&#39;</span><span class="p-Indicator">,</span> <span class="nv">host</span><span class="p-Indicator">:</span> <span class="s">&#39;api.%domain%&#39;</span><span class="p-Indicator">,</span> <span class="nv">priorities</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="s">&#39;json&#39;</span><span class="p-Indicator">,</span> <span class="s">&#39;xml&#39;</span><span class="p-Indicator">],</span> <span class="nv">fallback_format</span><span class="p-Indicator">:</span> <span class="nv">json</span><span class="p-Indicator">,</span> <span class="nv">prefer_extension</span><span class="p-Indicator">:</span> <span class="nv">false</span> <span class="p-Indicator">}</span>
            <span class="c1"># setting fallback_format to false means that instead of considering the next rule in case of a priority mismatch, a 406 will be caused</span>
            <span class="p-Indicator">-</span> <span class="p-Indicator">{</span> <span class="nv">path</span><span class="p-Indicator">:</span> <span class="s">&#39;^/image&#39;</span><span class="p-Indicator">,</span> <span class="nv">priorities</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="s">&#39;jpeg&#39;</span><span class="p-Indicator">,</span> <span class="s">&#39;gif&#39;</span><span class="p-Indicator">],</span> <span class="nv">fallback_format</span><span class="p-Indicator">:</span> <span class="nv">false</span><span class="p-Indicator">,</span> <span class="nv">prefer_extension</span><span class="p-Indicator">:</span> <span class="nv">true</span> <span class="p-Indicator">}</span>
            <span class="c1"># setting fallback_format to null means that in case of a priority mismatch the next rule will be considered</span>
            <span class="p-Indicator">-</span> <span class="p-Indicator">{</span> <span class="nv">path</span><span class="p-Indicator">:</span> <span class="s">&#39;^/admin&#39;</span><span class="p-Indicator">,</span> <span class="nv">methods</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span> <span class="s">&#39;GET&#39;</span><span class="p-Indicator">,</span> <span class="s">&#39;POST&#39;</span><span class="p-Indicator">],</span> <span class="nv">priorities</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span> <span class="s">&#39;xml&#39;</span><span class="p-Indicator">,</span> <span class="s">&#39;html&#39;</span><span class="p-Indicator">],</span> <span class="nv">fallback_format</span><span class="p-Indicator">:</span> <span class="nv">~</span><span class="p-Indicator">,</span> <span class="nv">prefer_extension</span><span class="p-Indicator">:</span> <span class="nv">false</span> <span class="p-Indicator">}</span>
            <span class="c1"># setting fallback_format to null, while setting exception_fallback_format to xml, will mean that in case of an exception, xml will be used</span>
            <span class="p-Indicator">-</span> <span class="p-Indicator">{</span> <span class="nv">path</span><span class="p-Indicator">:</span> <span class="s">&#39;^/api&#39;</span><span class="p-Indicator">,</span> <span class="nv">priorities</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span> <span class="s">&#39;xml&#39;</span><span class="p-Indicator">,</span> <span class="s">&#39;json&#39;</span><span class="p-Indicator">],</span> <span class="nv">fallback_format</span><span class="p-Indicator">:</span> <span class="nv">~</span><span class="p-Indicator">,</span> <span class="nv">exception_fallback_format</span><span class="p-Indicator">:</span> <span class="nv">xml</span><span class="p-Indicator">,</span> <span class="nv">prefer_extension</span><span class="p-Indicator">:</span> <span class="nv">false</span> <span class="p-Indicator">}</span>
            <span class="c1"># setting a priority to */* basically means any format will be matched</span>
            <span class="p-Indicator">-</span> <span class="p-Indicator">{</span> <span class="nv">path</span><span class="p-Indicator">:</span> <span class="s">&#39;^/&#39;</span><span class="p-Indicator">,</span> <span class="nv">priorities</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span> <span class="s">&#39;text/html&#39;</span><span class="p-Indicator">,</span> <span class="s">&#39;*/*&#39;</span><span class="p-Indicator">],</span> <span class="nv">fallback_format</span><span class="p-Indicator">:</span> <span class="nv">html</span><span class="p-Indicator">,</span> <span class="nv">prefer_extension</span><span class="p-Indicator">:</span> <span class="nv">true</span> <span class="p-Indicator">}</span>
</pre></div>
</td></tr></table></div></div>
<p>For example using the above configuration and the following Accept header:</p>
<div class="literal-block notranslate"><div class="highlight-text"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre>text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8,application/json
</pre></div>
</td></tr></table></div></div>
<p>And the following route:</p>
<div class="literal-block notranslate"><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span class="l-Scalar-Plain">hello</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">pattern</span><span class="p-Indicator">:</span>  <span class="l-Scalar-Plain">/foo.{_format}</span>
    <span class="l-Scalar-Plain">defaults</span><span class="p-Indicator">:</span> <span class="p-Indicator">{</span> <span class="nv">_controller</span><span class="p-Indicator">:</span> <span class="nv">foo.controller</span><span class="p-Indicator">:</span><span class="nv">indexAction</span><span class="p-Indicator">,</span> <span class="nv">_format</span><span class="p-Indicator">:</span> <span class="nv">~</span> <span class="p-Indicator">}</span>
</pre></div>
</td></tr></table></div></div>
<p>When calling:</p>
<ul class="simple">
<li><code class="notranslate">/foo.json</code> will lead to setting the request format to <code class="notranslate">json</code></li>
<li><code class="notranslate">/foo</code> will lead to setting the request format to <code class="notranslate">html</code></li>
</ul>
<p>Furthermore the listener sets a <code class="notranslate">media_type</code> attribute on the request in
case the listener is configured with a <code class="notranslate">MediaTypeNegotiatorInterface</code> instance,
which is the case by default, with the matched media type.</p>
<div class="literal-block notranslate"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span class="c1">// f.e. text/html or application/vnd.custom_something+json etc.</span>
<span class="nv">$mediaType</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">attributes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;media_type&#39;</span><span class="p">);</span>
</pre></div>
</td></tr></table></div></div>
<p>Note take care to configure the <code class="notranslate">priorities</code> carefully especially when the
controller actions for specific routes only handle necessary security checks
for specific formats. In such cases it might make sense to hard code the format
in the controller action.</p>
<div class="literal-block notranslate"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">public</span> <span class="k">function</span> <span class="nf">getAction</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nv">$view</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">View</span><span class="p">();</span>
    <span class="c1">// hard code the output format of the controller action</span>
    <span class="nv">$view</span><span class="o">-&gt;</span><span class="na">setFormat</span><span class="p">(</span><span class="s1">&#39;html&#39;</span><span class="p">);</span>

    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
<p>Note that the format needs to either be supported by the <code class="notranslate">Request</code> class
natively or it needs to be added as documented here or using the
<a class="reference external" href="http://symfony.com/doc/current/cookbook/request/mime_type.html">mime type listener</a> explained in the Symfony documentation.</p>
<div class="section" id="disabling-the-format-listener-via-rules">
<h3>Disabling the Format Listener via Rules<a class="headerlink" href="#disabling-the-format-listener-via-rules" title="Permalink to this headline">¶</a></h3>
<p>Often when integrating this Bundle with existing applications, it might be
useful to disable the format listener for some routes. In this case it is
possible to define a rule that will stop the format listener from determining a
format by setting <code class="notranslate">stop</code> to <code class="notranslate">true</code> as a rule option. Any rule containing
this setting and any rule following will not be considered and the Request
format will remain unchanged.</p>
<div class="literal-block notranslate"><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span class="c1"># app/config/config.yml</span>
<span class="l-Scalar-Plain">fos_rest</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">format_listener</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">rules</span><span class="p-Indicator">:</span>
            <span class="p-Indicator">-</span> <span class="p-Indicator">{</span> <span class="nv">path</span><span class="p-Indicator">:</span> <span class="s">&#39;^/api&#39;</span><span class="p-Indicator">,</span> <span class="nv">priorities</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="s">&#39;json&#39;</span><span class="p-Indicator">,</span> <span class="s">&#39;xml&#39;</span><span class="p-Indicator">],</span> <span class="nv">fallback_format</span><span class="p-Indicator">:</span> <span class="nv">json</span><span class="p-Indicator">,</span> <span class="nv">prefer_extension</span><span class="p-Indicator">:</span> <span class="nv">false</span> <span class="p-Indicator">}</span>
            <span class="p-Indicator">-</span> <span class="p-Indicator">{</span> <span class="nv">path</span><span class="p-Indicator">:</span> <span class="s">&#39;^/&#39;</span><span class="p-Indicator">,</span> <span class="nv">stop</span><span class="p-Indicator">:</span> <span class="nv">true</span> <span class="p-Indicator">}</span> <span class="c1"># Available for version &gt;= 1.5</span>
</pre></div>
</td></tr></table></div></div>
</div>
<div class="section" id="media-type-version-extraction">
<h3>Media Type Version Extraction<a class="headerlink" href="#media-type-version-extraction" title="Permalink to this headline">¶</a></h3>
<p>The format listener can also determine the version of the selected media type
based on a regular expression. The regular expression can be configured as
follows. Setting it to an empty value will disable the behavior entirely.</p>
<div class="literal-block notranslate"><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span class="l-Scalar-Plain">fos_rest</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">format_listener</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">media_type</span><span class="p-Indicator">:</span>
            <span class="l-Scalar-Plain">version_regex</span><span class="p-Indicator">:</span>        <span class="s">&#39;/(v|version)=(?P&lt;version&gt;[0-9\.]+)/&#39;</span>
</pre></div>
</td></tr></table></div></div>
<p>The matched version is set as a Request attribute with the name <code class="notranslate">version</code>,
and when using JMS serializer it is also set as an exclusion strategy
automatically in the <code class="notranslate">ViewHandler</code>.</p>
<p>See <a class="reference external" href="http://jmsyst.com/libs/serializer/master/cookbook/exclusion_strategies#versioning-objects">this JMS Serializer article</a> for details.</p>
</div>
</div>
<div class="section" id="mime-type-listener">
<h2>Mime type listener<a class="headerlink" href="#mime-type-listener" title="Permalink to this headline">¶</a></h2>
<p>This listener allows registering additional mime types in the <code class="notranslate">Request</code>
class. It works similar to the <a class="reference external" href="http://symfony.com/doc/current/cookbook/request/mime_type.html">mime type listener</a> proposed by Symfony.</p>
<div class="literal-block notranslate"><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span class="c1"># app/config/config.yml</span>
<span class="l-Scalar-Plain">fos_rest</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">view</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">mime_types</span><span class="p-Indicator">:</span> <span class="p-Indicator">{</span><span class="s">&#39;jsonp&#39;</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="s">&#39;application/javascript+jsonp&#39;</span><span class="p-Indicator">]}</span>
</pre></div>
</td></tr></table></div></div>
</div>
<div class="section" id="param-fetcher-listener">
<h2>Param fetcher listener<a class="headerlink" href="#param-fetcher-listener" title="Permalink to this headline">¶</a></h2>
<p>The param fetcher listener simply sets the ParamFetcher instance as a request attribute
configured for the matched controller so that the user does not need to do this manually.</p>
<div class="literal-block notranslate"><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span class="c1"># app/config/config.yml</span>
<span class="l-Scalar-Plain">fos_rest</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">param_fetcher_listener</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>
</pre></div>
</td></tr></table></div></div>
<div class="literal-block notranslate"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78</pre></div></td><td class="code"><div class="highlight"><pre><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">use</span> <span class="nx">FOS\RestBundle\Request\ParamFetcher</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">FOS\RestBundle\Controller\Annotations\RequestParam</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">FOS\RestBundle\Controller\Annotations\QueryParam</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Acme\FooBundle\Validation\Constraints\MyComplexConstraint</span>

<span class="k">class</span> <span class="nc">FooController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * Will look for a page query parameter, ie. ?page=XX</span>
<span class="sd">     * If not passed it will be automatically be set to the default of &quot;1&quot;</span>
<span class="sd">     * If passed but doesn&#39;t match the requirement &quot;\d+&quot; it will be also be set to the default of &quot;1&quot;</span>
<span class="sd">     * Note that if the value matches the default then no validation is run.</span>
<span class="sd">     * So make sure the default value really matches your expectations.</span>
<span class="sd">     *</span>
<span class="sd">     * @QueryParam(name=&quot;page&quot;, requirements=&quot;\d+&quot;, default=&quot;1&quot;, description=&quot;Page of the overview.&quot;)</span>
<span class="sd">     *</span>
<span class="sd">     * In some case you also want to have a strict requirements but accept a null value, this is possible</span>
<span class="sd">     * thanks to the nullable option.</span>
<span class="sd">     * If ?count= parameter is set, the requirements will be checked strictly, if not, the null value will be used.</span>
<span class="sd">     * If you set the strict parameter without a nullable option, this will result in an error if the parameter is</span>
<span class="sd">     * missing from the query.</span>
<span class="sd">     *</span>
<span class="sd">     * @QueryParam(name=&quot;count&quot;, requirements=&quot;\d+&quot;, strict=true, nullable=true, description=&quot;Item count limit&quot;)</span>
<span class="sd">     *</span>
<span class="sd">     * Will check if a blank value, e.g an empty string is passed and if so, it will set to the default of asc.</span>
<span class="sd">     *</span>
<span class="sd">     * @QueryParam(name=&quot;sort&quot;, requirements=&quot;(asc|desc)+&quot;, allowBlank=false, default=&quot;asc&quot; description=&quot;Sort direction&quot;)</span>
<span class="sd">     *</span>
<span class="sd">     * Will look for a firstname request parameters, ie. firstname=foo in POST data.</span>
<span class="sd">     * If not passed it will error out when read out of the ParamFetcher since RequestParam defaults to strict=true</span>
<span class="sd">     * If passed but doesn&#39;t match the requirement &quot;[a-z]+&quot; it will also error out (400 Bad Request)</span>
<span class="sd">     * Note that if the value matches the default then no validation is run.</span>
<span class="sd">     * So make sure the default value really matches your expectations.</span>
<span class="sd">     *</span>
<span class="sd">     * @RequestParam(name=&quot;firstname&quot;, requirements=&quot;[a-z]+&quot;, description=&quot;Firstname.&quot;)</span>
<span class="sd">     *</span>
<span class="sd">     * If you want to work with array: ie. ?ids[]=1&amp;ids[]=2&amp;ids[]=1337, use:</span>
<span class="sd">     *</span>
<span class="sd">     * @QueryParam(array=true, name=&quot;ids&quot;, requirements=&quot;\d+&quot;, default=&quot;1&quot;, description=&quot;List of ids&quot;)</span>
<span class="sd">     * (works with QueryParam and RequestParam)</span>
<span class="sd">     *</span>
<span class="sd">     * It will validate each entries of ids with your requirement, by this way, if an entry is invalid,</span>
<span class="sd">     * this one will be replaced by default value.</span>
<span class="sd">     *</span>
<span class="sd">     * ie: ?ids[]=1337&amp;ids[]=notinteger will return array(1337, 1);</span>
<span class="sd">     * If ids is not defined, array(1) will be given</span>
<span class="sd">     *</span>
<span class="sd">     * Array must have a single depth or it will return default value. It&#39;s difficult to validate with</span>
<span class="sd">     * preg_match each deeps of array, if you want to deal with that, you can use a constraint:</span>
<span class="sd">     *</span>
<span class="sd">     * @QueryParam(array=true, name=&quot;filters&quot;, requirements=@MyComplexConstraint, description=&quot;List of complex filters&quot;)</span>
<span class="sd">     *</span>
<span class="sd">     * In this example, the ParamFetcher will validate each value of the array with the constraint, returning the</span>
<span class="sd">     * default value if you are in safe mode or throw a BadRequestHttpResponse containing the constraint violation</span>
<span class="sd">     * messages in the message.</span>
<span class="sd">     *</span>
<span class="sd">     * @param ParamFetcher $paramFetcher</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getArticlesAction</span><span class="p">(</span><span class="nx">ParamFetcher</span> <span class="nv">$paramFetcher</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// ParamFetcher params can be dynamically added during runtime instead of only compile time annotations.</span>
        <span class="nv">$dynamicRequestParam</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">RequestParam</span><span class="p">();</span>
        <span class="nv">$dynamicRequestParam</span><span class="o">-&gt;</span><span class="na">name</span> <span class="o">=</span> <span class="s2">&quot;dynamic_request&quot;</span><span class="p">;</span>
        <span class="nv">$dynamicRequestParam</span><span class="o">-&gt;</span><span class="na">requirements</span> <span class="o">=</span> <span class="s2">&quot;\d+&quot;</span><span class="p">;</span>
        <span class="nv">$paramFetcher</span><span class="o">-&gt;</span><span class="na">addParam</span><span class="p">(</span><span class="nv">$dynamicRequestParam</span><span class="p">);</span>

        <span class="nv">$dynamicQueryParam</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">QueryParam</span><span class="p">();</span>
        <span class="nv">$dynamicQueryParam</span><span class="o">-&gt;</span><span class="na">name</span> <span class="o">=</span> <span class="s2">&quot;dynamic_query&quot;</span><span class="p">;</span>
        <span class="nv">$dynamicQueryParam</span><span class="o">-&gt;</span><span class="na">requirements</span><span class="o">=</span><span class="s2">&quot;[a-z]+&quot;</span><span class="p">;</span>
        <span class="nv">$paramFetcher</span><span class="o">-&gt;</span><span class="na">addParam</span><span class="p">(</span><span class="nv">$dynamicQueryParam</span><span class="p">);</span>

        <span class="nv">$page</span> <span class="o">=</span> <span class="nv">$paramFetcher</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;page&#39;</span><span class="p">);</span>
        <span class="nv">$articles</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;bim&#39;</span><span class="p">,</span> <span class="s1">&#39;bam&#39;</span><span class="p">,</span> <span class="s1">&#39;bingo&#39;</span><span class="p">);</span>

        <span class="k">return</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;articles&#39;</span> <span class="o">=&gt;</span> <span class="nv">$articles</span><span class="p">,</span> <span class="s1">&#39;page&#39;</span> <span class="o">=&gt;</span> <span class="nv">$page</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
<div class="admonition-wrapper">
<div class="note"></div><div class="admonition admonition-note"><p class="first admonition-title">Note</p>
<p class="last">There is also <code class="notranslate">$paramFetcher-&gt;all()</code> to fetch all configured query
parameters at once. And also both <code class="notranslate">$paramFetcher-&gt;get()</code> and
<code class="notranslate">$paramFetcher-&gt;all()</code> support and optional <code class="notranslate">$strict</code> parameter to throw
a <code class="notranslate">\RuntimeException</code> on a validation error.</p>
</div></div>
<div class="admonition-wrapper">
<div class="note"></div><div class="admonition admonition-note"><p class="first admonition-title">Note</p>
<p class="last">The ParamFetcher requirements feature requires the symfony/validator
component.</p>
</div></div>
<p>Optionally the listener can also already set all configured query parameters as
request attributes</p>
<div class="literal-block notranslate"><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span class="c1"># app/config/config.yml</span>
<span class="l-Scalar-Plain">fos_rest</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">param_fetcher_listener</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">force</span>
</pre></div>
</td></tr></table></div></div>
<div class="literal-block notranslate"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">class</span> <span class="nc">FooController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @QueryParam(name=&quot;page&quot;, requirements=&quot;\d+&quot;, default=&quot;1&quot;, description=&quot;Page of the overview.&quot;)</span>
<span class="sd">     *</span>
<span class="sd">     * @param string $page</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getArticlesAction</span><span class="p">(</span><span class="nv">$page</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$articles</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;bim&#39;</span><span class="p">,</span> <span class="s1">&#39;bam&#39;</span><span class="p">,</span> <span class="s1">&#39;bingo&#39;</span><span class="p">);</span>

        <span class="k">return</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;articles&#39;</span> <span class="o">=&gt;</span> <span class="nv">$articles</span><span class="p">,</span> <span class="s1">&#39;page&#39;</span> <span class="o">=&gt;</span> <span class="nv">$page</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
</div>
<div class="section" id="allowed-http-methods-listener">
<h2>Allowed Http Methods Listener<a class="headerlink" href="#allowed-http-methods-listener" title="Permalink to this headline">¶</a></h2>
<p>This listener add the <code class="notranslate">Allow</code> HTTP header to each request appending all
allowed methods for a given resource.</p>
<p>Let's say we have the following routes:</p>
<div class="literal-block notranslate"><div class="highlight-text"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre>api_get_users
api_post_users
api_get_user
</pre></div>
</td></tr></table></div></div>
<p>A <code class="notranslate">GET</code> request to <code class="notranslate">api_get_users</code> will response in:</p>
<div class="literal-block notranslate"><div class="highlight-text"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre>HTTP/1.0 200 OK
Date: Sat, 16 Jun 2012 15:17:22 GMT
Server: Apache/2.2.22 (Ubuntu)
allow: GET, POST
</pre></div>
</td></tr></table></div></div>
<p>You need to enable this listener like this as it is disabled by default:</p>
<div class="literal-block notranslate"><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span class="l-Scalar-Plain">fos_rest</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">allowed_methods_listener</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>
</pre></div>
</td></tr></table></div></div>
</div>
<div class="section" id="security-exception-listener">
<h2>Security Exception Listener<a class="headerlink" href="#security-exception-listener" title="Permalink to this headline">¶</a></h2>
<p>By default it is the responsibility of firewall access points to deal with
AccessDeniedExceptions. For example the <code class="notranslate">form</code> entry point will redirect to
the login page. However for a RESTful application proper response HTTP status
codes should be provided. This listener is triggered before the normal exception
listener and firewall entry points and forces returning either a 403 or 401
status code for any of the formats configured.</p>
<p>It will return 401 for
<code class="notranslate">Symfony\Component\Security\Core\Exception\AuthenticationException</code> or 403 for
<code class="notranslate">Symfony\Component\Security\Core\Exception\AccessDeniedException</code>.</p>
<p>As a 401-response requires an authentication-challenge, you can set one using
the configuration <code class="notranslate">unauthorized_challenge</code> or leave it blank if you don't want
to send a challenge in the <code class="notranslate">WWW-Authenticate</code> header to the client.</p>
<p>If you want to use an advanced value in this header, it's worth looking at this:
<a class="reference external" href="http://greenbytes.de/tech/tc/httpauth/">Test Cases for HTTP Test Cases for the HTTP WWW-Authenticate header field</a>.</p>
<p>You need to enable this listener like this as it is disabled by default:</p>
<p>It is also recommended to enable the exception controller described in the next chapter.</p>
</div>
<div class="section" id="priorities">
<h2>Priorities<a class="headerlink" href="#priorities" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="47%" />
<col width="38%" />
<col width="15%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Listener</th>
<th class="head">Event</th>
<th class="head">Priority</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="notranslate">MimeTypeListener</code></td>
<td><code class="notranslate">kernel.request</code></td>
<td>200</td>
</tr>
<tr class="row-odd"><td><code class="notranslate">FormatListener</code></td>
<td><code class="notranslate">kernel.request</code></td>
<td>34</td>
</tr>
<tr class="row-even"><td><code class="notranslate">VersionListener</code></td>
<td><code class="notranslate">kernel.request</code></td>
<td>33</td>
</tr>
<tr class="row-odd"><td><code class="notranslate">BodyListener</code></td>
<td><code class="notranslate">kernel.request</code></td>
<td>10</td>
</tr>
<tr class="row-even"><td><code class="notranslate">ParamFetcherListener</code></td>
<td><code class="notranslate">kernel.controller</code></td>
<td>5</td>
</tr>
<tr class="row-odd"><td><code class="notranslate">ViewResponseListener</code></td>
<td><code class="notranslate">kernel.controller</code></td>
<td>-10</td>
</tr>
<tr class="row-even"><td><code class="notranslate">ViewResponseListener</code></td>
<td><code class="notranslate">kernel.view</code></td>
<td>100</td>
</tr>
<tr class="row-odd"><td><code class="notranslate">AllowedMethodsListener</code></td>
<td><code class="notranslate">kernel.response</code></td>
<td>0</td>
</tr>
</tbody>
</table>
<p>That was it!</p>
</div>
</div>

    </div>

    <div class="m-t-30">
    <p class="text-muted">
        This work, including the code samples, is licensed under a
        <a rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/">Creative Commons BY-SA 3.0</a>
        license.
    </p>
</div>

                                                    </main>
                    </div>
                            </div>
            
                            <footer>
    <section class="promos">
        <div class="container">
            <div class="row">
                <div class="col-sm-4 m-b-30">
                    <h4 class="text-accent">Latest from the Symfony Blog</h4>

                    <ul class="list--unstyled list--border m-b-30">
                                                    <li>
                                <a href="/blog/a-week-of-symfony-614-1-7-october-2018">A Week of Symfony #614 (1-7 October 2018)</a>
                                <span class="metadata block m-b-0">October 7, 2018</span>
                            </li>
                                            </ul>

                                        <h4 class="text-accent m-b-15">They Help Us Make Symfony</h4>
                                        <div class="box box--small box--white box--shadow">
                            <div class="d-flex ">
        <img class="m-r-15 avatar avatar--large " width="40" height="40"
             alt="Avatar of Franz Liedke, a Symfony contributor"
             src="https://connect.sensiolabs.com/api/images/d2a78af1-944d-407f-8ff9-835403654fe3.png?format=80x80">

        <div class="">
            
            Thanks <strong>
                            <a class="" href="https://connect.sensiolabs.com/profile/franzliedke">Franz Liedke</a>

            
            </strong> for being a <a class="text-normal" title="List of all Symfony contributors" href="/contributors">Symfony contributor</a>.
            <small class="block m-t-5 text-muted">
                                                
                                    <strong title="1 commits">1</strong> commit
                                &middot; <strong title="4 lines of code/doc changed">4</strong> lines
            </small>
        </div>
    </div>

                    </div>
                                    </div>

                <div class="col-sm-4 m-b-30">
                    <h4 class="text-accent">Upcoming official conferences</h4>
                    <ul class="list--unstyled list--border">
                                                    <li>
                                                                    <a href="https://usa2018.live.symfony.com/">Symfony♥PHP USA 2018</a>
                                
                                <span class="metadata block m-b-0">San Francisco, CA (United States) - October 11-12, 2018</span>
                            </li>
                                                    <li>
                                                                    <a href="http://berlin2018.live.symfony.com">SymfonyLive Berlin 2018</a>
                                
                                <span class="metadata block m-b-0">Berlin (Germany) - October 24-26, 2018</span>
                            </li>
                                                    <li>
                                                                    <a href="https://lisbon2018.symfony.com/">SymfonyCon Lisbon 2018</a>
                                
                                <span class="metadata block m-b-0">Lisbon (Portugal) - December 6-8, 2018</span>
                            </li>
                                                    <li>
                                                                    SymfonyLive Paris 2019
                                
                                <span class="metadata block m-b-0">Paris (France) - March 28-29, 2019</span>
                            </li>
                                            </ul>

                                            <script type="application/ld+json">{"@context":"https:\/\/schema.org","@type":"Event","name":"Symfony\u2665PHP USA 2018","image":"\/images\/v5\/conferences\/sflive-usa.svg","location":{"@type":"Place","address":{"@type":"PostalAddress","addressLocality":"San Francisco, CA","addressCountry":"US"}},"url":"https:\/\/usa2018.live.symfony.com\/","startDate":"2018-10-11T00:00:00+00:00","endDate":"2018-10-12T00:00:00+00:00","offers":{"@type":"Offer","url":"https:\/\/usa2018.live.symfony.com\/registration\/","availability":"https:\/\/schema.org\/InStock"}}</script>
                                            <script type="application/ld+json">{"@context":"https:\/\/schema.org","@type":"Event","name":"SymfonyLive Berlin 2018","image":"\/images\/v5\/conferences\/sflive.svg","location":{"@type":"Place","address":{"@type":"PostalAddress","addressLocality":"Berlin","addressCountry":"DE"}},"url":"http:\/\/berlin2018.live.symfony.com","startDate":"2018-10-24T00:00:00+00:00","endDate":"2018-10-26T00:00:00+00:00","offers":{"@type":"Offer","url":"http:\/\/berlin2018.live.symfony.com\/tickets","availability":"https:\/\/schema.org\/InStock"}}</script>
                                            <script type="application/ld+json">{"@context":"https:\/\/schema.org","@type":"Event","name":"SymfonyCon Lisbon 2018","image":"\/images\/v5\/conferences\/sfcon.svg","location":{"@type":"Place","address":{"@type":"PostalAddress","addressLocality":"Lisbon","addressCountry":"PT"}},"url":"https:\/\/lisbon2018.symfony.com\/","startDate":"2018-12-06T00:00:00+00:00","endDate":"2018-12-08T00:00:00+00:00","offers":{"@type":"Offer","url":"https:\/\/lisbon2018.symfony.com\/registration\/","availability":"https:\/\/schema.org\/InStock"}}</script>
                                            <script type="application/ld+json">{"@context":"https:\/\/schema.org","@type":"Event","name":"SymfonyLive Paris 2019","image":"\/images\/v5\/conferences\/sflive.svg","location":{"@type":"Place","address":{"@type":"PostalAddress","addressLocality":"Paris","addressCountry":"FR"}},"startDate":"2019-03-28T00:00:00+00:00","endDate":"2019-03-29T00:00:00+00:00"}</script>
                                    </div>

                <div class="col-sm-4 m-b-30">
                    <h4 class="text-accent">Upcoming training sessions</h4>
                    <ul class="list--unstyled list--border">
            <li>
            <a href="https://training.sensiolabs.com/en/courses?q=SF4C4&amp;from=10/08/2018&amp;to=10/11/2018">Web Development with Symfony 4 on Blended Learning</a>
            <span class="metadata block m-b-0">Clichy - October 8, 2018</span>
        </li>
            <li>
            <a href="https://training.sensiolabs.com/en/courses?q=SF4C1&amp;from=10/08/2018&amp;to=10/09/2018">Getting Started with Symfony 4</a>
            <span class="metadata block m-b-0">Clichy - October 8, 2018</span>
        </li>
            <li>
            <a href="https://training.sensiolabs.com/en/courses?q=SF4C2&amp;from=10/10/2018&amp;to=10/11/2018">Mastering Symfony 4 on Blended Learning</a>
            <span class="metadata block m-b-0">Clichy - October 10, 2018</span>
        </li>
    </ul>

    <script type="application/ld+json">{"@context":"https:\/\/schema.org","@type":"Event","name":"Web Development with Symfony 4 on Blended Learning","url":"https:\/\/training.sensiolabs.com\/en\/courses?q=SF4C4&from=10\/08\/2018&to=10\/11\/2018","startDate":"2018-10-08T00:00:00+00:00","endDate":"2018-10-11T00:00:00+00:00","location":{"@type":"Place","name":"Symfony SAS Offices","address":{"@type":"PostalAddress","addressLocality":"Clichy","addressCountry":"France"}},"offers":{"@type":"Offer","url":"https:\/\/training.sensiolabs.com\/en\/courses?q=SF4C4&from=10\/08\/2018&to=10\/11\/2018","availability":"https:\/\/schema.org\/InStock"}}</script>
    <script type="application/ld+json">{"@context":"https:\/\/schema.org","@type":"Event","name":"Getting Started with Symfony 4","url":"https:\/\/training.sensiolabs.com\/en\/courses?q=SF4C1&from=10\/08\/2018&to=10\/09\/2018","startDate":"2018-10-08T00:00:00+00:00","endDate":"2018-10-09T00:00:00+00:00","location":{"@type":"Place","name":"Symfony SAS Offices","address":{"@type":"PostalAddress","addressLocality":"Clichy","addressCountry":"France"}},"offers":{"@type":"Offer","url":"https:\/\/training.sensiolabs.com\/en\/courses?q=SF4C1&from=10\/08\/2018&to=10\/09\/2018","availability":"https:\/\/schema.org\/InStock"}}</script>
    <script type="application/ld+json">{"@context":"https:\/\/schema.org","@type":"Event","name":"Mastering Symfony 4 on Blended Learning","url":"https:\/\/training.sensiolabs.com\/en\/courses?q=SF4C2&from=10\/10\/2018&to=10\/11\/2018","startDate":"2018-10-10T00:00:00+00:00","endDate":"2018-10-11T00:00:00+00:00","location":{"@type":"Place","name":"Symfony SAS Offices","address":{"@type":"PostalAddress","addressLocality":"Clichy","addressCountry":"France"}},"offers":{"@type":"Offer","url":"https:\/\/training.sensiolabs.com\/en\/courses?q=SF4C2&from=10\/10\/2018&to=10\/11\/2018","availability":"https:\/\/schema.org\/InStock"}}</script>


                    <p class="m-b-5">
                        <a class="read-more" href="https://training.sensiolabs.com/">View all sessions</a>
                    </p>
                </div>
            </div>
        </div>
    </section>

    <section>
        <div class="container">
            <p class="m-t-0 m-b-30 text-small">
                <b>Symfony</b>&trade; is a trademark of Symfony SAS. <a href="/trademark">All rights reserved</a>.
            </p>

            <ul class="sitemap ">
    <li>
        <h6><a href="/what-is-symfony">What is Symfony?</a></h6>
        <ul class="list_menu_footer list-unstyled">
            
        <li >
        <a href="/at-a-glance">
            Symfony at a Glance
                    </a>
    </li>
            <li >
        <a href="/components">
            Symfony Components
                    </a>
    </li>
            <li >
        <a href="/blog/category/case-studies">
            Case Studies
                    </a>
    </li>
            <li >
        <a href="/roadmap">
            Symfony Roadmap
                    </a>
    </li>
            <li >
        <a href="/doc/current/contributing/code/security.html">
            Security Policy
                    </a>
    </li>
            <li >
        <a href="/logo">
            Logo &amp; Screenshots
                    </a>
    </li>
            <li >
        <a href="/license">
            Trademark &amp; Licenses
                    </a>
    </li>
            <li >
        <a href="/legacy">
            symfony1 Legacy
                    </a>
    </li>
    
        </ul>
    </li>

    <li>
        <h6><a href="/doc/current/index.html">Learn Symfony</a></h6>
        <ul class="list_menu_footer list-unstyled">
                
    


    <li class="">
        <a href="/doc/current/setup.html">Getting Started</a>
    </li>
    <li class="">
        <a href="/doc/current/components/index.html">Components</a>
    </li>
    <li class="">
        <a href="/doc/current/best_practices/index.html">Best Practices</a>
    </li>
    <li class="">
        <a href="/doc/bundles/">Bundles</a>
    </li>
    <li class="">
        <a href="/doc/current/reference/index.html">Reference</a>
    </li>
    <li class="">
        <a href="https://training.sensiolabs.com/en/courses?q=symfony">Training</a>
    </li>
    <li class="">
        <a href="https://certification.symfony.com/">Certification</a>
    </li>

        </ul>
    </li>

    <li>
        <h6><a href="https://symfonycasts.com">Screencasts</a></h6>
        <ul class="list_menu_footer list-unstyled">
            <li><a href="https://symfonycasts.com/tracks/symfony">Learn Symfony</a></li>
            <li><a href="https://symfonycasts.com/tracks/php">Learn PHP</a></li>
            <li><a href="https://symfonycasts.com/tracks/javascript">Learn JavaScript</a></li>
            <li><a href="https://symfonycasts.com/tracks/drupal">Learn Drupal</a></li>
            <li><a href="https://symfonycasts.com/tracks/rest">Learn RESTful APIs</a></li>
        </ul>
    </li>

    <li>
        <h6><a href="/community">Community</a></h6>
        <ul class="list_menu_footer list-unstyled">
            
        <li >
        <a href="https://connect.symfony.com/">
            SymfonyConnect
                    </a>
    </li>
            <li >
        <a href="/support">
            Support
                    </a>
    </li>
            <li >
        <a href="/doc/current/contributing/index.html">
            How to be Involved
                    </a>
    </li>
            <li >
        <a href="/events/">
            Events &amp; Meetups
                    </a>
    </li>
            <li >
        <a href="/projects">
            Projects using Symfony
                    </a>
    </li>
            <li >
        <a href="/stats/downloads">
            Downloads Stats
                    </a>
    </li>
            <li >
        <a href="/contributors">
            Contributors
                    </a>
    </li>
    
        </ul>
    </li>

    <li>
        <h6><a href="/blog/">Blog</a></h6>
        <ul class="list_menu_footer list-unstyled">
            
    <li class="">
        <a href="/blog/category/a-week-of-symfony">A week of symfony</a>
    </li>
    <li class="">
        <a href="/blog/category/case-studies">Case studies</a>
    </li>
    <li class="">
        <a href="/blog/category/community">Community</a>
    </li>
    <li class="">
        <a href="/blog/category/conferences">Conferences</a>
    </li>
    <li class="">
        <a href="/blog/category/diversity">Diversity</a>
    </li>
    <li class="">
        <a href="/blog/category/documentation">Documentation</a>
    </li>
    <li class="">
        <a href="/blog/category/living-on-the-edge">Living on the edge</a>
    </li>
    <li class="">
        <a href="/blog/category/releases">Releases</a>
    </li>
    <li class="">
        <a href="/blog/category/security-advisories">Security Advisories</a>
    </li>

        </ul>
    </li>

    <li>
        <h6><a href="https://sensiolabs.com">Services</a></h6>
        <ul class="list_menu_footer list-unstyled">
            <li><a href="https://sensiolabs.com">Our services</a></li>
            <li><a href="https://training.sensiolabs.com/en">Train developers</a></li>
            <li><a href="https://insight.symfony.com/">Manage your project quality</a></li>
            <li><a href="https://blackfire.io/">Improve your project performance</a></li>
        </ul>

        <h6 class="m-t-30"><a href="/about">About</a></h6>
        <ul class="list_menu_footer list-unstyled">
            
        <li >
        <a href="https://sensiolabs.com/en/join_us/join_us.html">
            SensioLabs
                    </a>
    </li>
            <li >
        <a href="https://sensiolabs.com/en/join_us/join_us.html">
            Careers
                    </a>
    </li>
            <li >
        <a href="/support">
            Support
                    </a>
    </li>
    
        </ul>
    </li>
</ul>


            <div class="icon__group">
                <h6 class="m-b-15">Follow Symfony</h6>
                <a href="https://github.com/symfony" title="Symfony on GitHub">
                    <i class="icon"><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414"><path d="M8 0a8 8 0 0 0-8 8 8 8 0 0 0 5.47 7.59c.4.075.547-.172.547-.385 0-.19-.007-.693-.01-1.36-2.226.483-2.695-1.073-2.695-1.073-.364-.924-.89-1.17-.89-1.17-.725-.496.056-.486.056-.486.803.056 1.225.824 1.225.824.714 1.223 1.873.87 2.33.665.072-.517.278-.87.507-1.07-1.777-.2-3.644-.888-3.644-3.953 0-.873.31-1.587.823-2.147-.09-.202-.36-1.015.07-2.117 0 0 .67-.215 2.2.82a7.67 7.67 0 0 1 2-.27 7.67 7.67 0 0 1 2 .27c1.52-1.035 2.19-.82 2.19-.82.43 1.102.16 1.915.08 2.117a3.1 3.1 0 0 1 .82 2.147c0 3.073-1.87 3.75-3.65 3.947.28.24.54.73.54 1.48 0 1.07-.01 1.93-.01 2.19 0 .21.14.46.55.38A7.972 7.972 0 0 0 16 8a8 8 0 0 0-8-8"/></svg></i>
                </a>
                <a href="https://stackoverflow.com/questions/tagged/symfony" title="Symfony on StackOverflow">
                    <i class="icon"><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414"><path d="M12.658 14.577v-4.27h1.423V16H1.23v-5.693h1.42v4.27h10.006zm-8.583-1.423h7.16V11.73h-7.16v1.424zm.173-3.235l6.987 1.46.3-1.38L4.55 8.54l-.302 1.38zm.906-3.37l6.47 3.02.602-1.3-6.47-3.02-.602 1.29zm1.81-3.19l5.478 4.57.906-1.08L7.87 2.28l-.9 1.078zM10.502 0L9.338.863l4.27 5.735 1.164-.862L10.5 0z"/></svg></i>
                </a>
                <a href="/slack-invite" title="Symfony on Slack">
                    <i class="icon"><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414"><g fill-rule="nonzero"><path d="M6.586 7.33l.69 2.057 2.137-.716-.69-2.05-2.137.72z"/><path d="M12.55 9.37l-1.037.347.36 1.073a.831.831 0 0 1-.814 1.092.843.843 0 0 1-.77-.566l-.36-1.072-2.14.716.36 1.072a.833.833 0 0 1-.82 1.093.843.843 0 0 1-.77-.566l-.36-1.08-1.04.35a.846.846 0 0 1-1.06-.53c-.15-.44.09-.91.52-1.05l1.04-.35L5 7.84l-1.034.35a.829.829 0 0 1-1.045-.522.834.834 0 0 1 .53-1.05l1.04-.346-.36-1.07a.832.832 0 0 1 .53-1.05c.44-.147.91.09 1.05.522l.36 1.072L8.2 5.03l-.36-1.07c-.14-.43.09-.9.526-1.05a.833.833 0 0 1 1.05.528l.36 1.08 1.037-.34a.831.831 0 0 1 1.05.52.83.83 0 0 1-.523 1.05l-1.038.35.69 2.057 1.034-.344a.833.833 0 0 1 1.05.53c.146.44-.09.91-.52 1.05zm2.78-3.57C13.68.304 11.298-.98 5.8.67.304 2.32-.98 4.7.67 10.2c1.65 5.497 4.03 6.78 9.53 5.13 5.497-1.65 6.78-4.03 5.13-9.53z"/></g></svg></i>
                </a>
                <a href="https://twitter.com/symfony" title="Symfony on Twitter">
                    <i class="icon"><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414"><path d="M16 3.038a6.62 6.62 0 0 1-1.885.517 3.299 3.299 0 0 0 1.443-1.816c-.634.37-1.337.64-2.085.79a3.282 3.282 0 0 0-5.593 2.99 9.307 9.307 0 0 1-6.766-3.42A3.222 3.222 0 0 0 .67 3.75c0 1.14.58 2.143 1.46 2.732a3.278 3.278 0 0 1-1.487-.41v.04c0 1.59 1.13 2.918 2.633 3.22a3.336 3.336 0 0 1-1.475.056 3.29 3.29 0 0 0 3.07 2.28 6.578 6.578 0 0 1-4.85 1.359 9.332 9.332 0 0 0 5.04 1.474c6.04 0 9.34-5 9.34-9.33 0-.14 0-.28-.01-.42a6.63 6.63 0 0 0 1.64-1.7z" fill-rule="nonzero"/></svg></i>
                </a>
                <a href="https://www.facebook.com/SymfonyFramework" title="Symfony on Facebook">
                    <i class="icon"><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414"><path d="M15.117 0H.883A.883.883 0 0 0 0 .883v14.234c0 .488.395.883.883.883h7.663V9.804H6.46V7.39h2.086V5.607c0-2.066 1.262-3.19 3.106-3.19.883 0 1.642.064 1.863.094v2.16h-1.28c-1 0-1.195.48-1.195 1.18v1.54h2.39l-.31 2.42h-2.08V16h4.077a.883.883 0 0 0 .883-.883V.883A.883.883 0 0 0 15.117 0" fill-rule="nonzero"/></svg></i>
                </a>
                <a href="https://www.youtube.com/user/SensioLabs" title="Symfony on YouTube">
                    <i class="icon"><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414"><path d="M0 7.345c0-1.294.16-2.59.16-2.59s.156-1.1.636-1.587c.608-.637 1.408-.617 1.764-.684C3.84 2.36 8 2.324 8 2.324s3.362.004 5.6.166c.314.038.996.04 1.604.678.48.486.636 1.588.636 1.588S16 6.05 16 7.346v1.258c0 1.296-.16 2.59-.16 2.59s-.156 1.102-.636 1.588c-.608.638-1.29.64-1.604.678-2.238.162-5.6.166-5.6.166s-4.16-.037-5.44-.16c-.356-.067-1.156-.047-1.764-.684-.48-.487-.636-1.587-.636-1.587S0 9.9 0 8.605v-1.26zm6.348 2.73V5.58l4.323 2.255-4.32 2.24z"/></svg></i>
                </a>
                <a href="https://medium.com/@symfony" title="Symfony on Medium">
                    <i class="icon"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M2.846 6.36a.928.928 0 0 0-.303-.784l-2.24-2.7v-.403H7.26l5.378 11.795 4.728-11.795H24v.403l-1.917 1.837a.561.561 0 0 0-.213.538v13.5a.561.561 0 0 0 .213.537l1.87 1.837v.403h-9.41v-.403l1.937-1.882c.19-.19.19-.246.19-.538V7.794l-5.39 13.688h-.727L4.278 7.794v9.174c-.052.386.076.774.347 1.053l2.52 3.06v.402H0v-.403l2.52-3.06c.27-.278.39-.67.326-1.052V6.36z"/></svg></i>
                </a>
                <a href="https://symfonycasts.com/" title="Symfony Screencasts">
                    <i class="icon"><svg viewBox="0 0 47 50" xmlns="http://www.w3.org/2000/svg"><path d="M9.498 15.625L23.5 9.765V40.04c-3.917-2.409-7.083-5.664-9.498-9.766-2.611-4.296-4.112-9.18-4.504-14.648zM47 12.5c0 6.706-1.24 12.858-3.72 18.457-2.155 4.688-5.027 8.79-8.617 12.305-3.003 2.93-6.137 5.045-9.4 6.347-1.176.521-2.35.521-3.526 0-3.72-1.497-7.147-3.906-10.28-7.226-3.46-3.58-6.17-7.78-8.128-12.598C1.11 24.382 0 18.62 0 12.5c0-.977.261-1.855.783-2.637.523-.781 1.24-1.334 2.155-1.66l18.8-7.812c1.175-.521 2.35-.521 3.524 0l18.8 7.812c.914.326 1.632.879 2.155 1.66.522.782.783 1.66.783 2.637zm-4.7 0L23.5 4.687 4.7 12.5c0 5.273.914 10.254 2.742 14.941 1.697 4.297 4.014 8.04 6.952 11.23 2.807 3.06 5.842 5.274 9.106 6.642 3.199-1.303 6.169-3.451 8.91-6.446 3.003-3.19 5.353-6.9 7.05-11.133 1.893-4.752 2.84-9.83 2.84-15.234z"/></svg>
</i>
                </a>
            </div>

            <div class="m-t-30 m-b-30">
                <i class="icon icon--small icon--gray-dark"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M8 256c0 136.966 111.033 248 248 248s248-111.034 248-248S392.966 8 256 8 8 119.033 8 256zm248 184V72c101.705 0 184 82.311 184 184 0 101.705-82.311 184-184 184z"/></svg></i>
                <a title="Toggle the website theme" href="#" id="theme-switcher" class="text-small">Switch to dark theme</a>
            </div>
            <script async>
                var themeSwitcher = document.getElementById('theme-switcher');

                if (themeSwitcher) {
                    if (localStorage.getItem('themeName') == 'dark-theme') {
                        themeSwitcher.innerText = 'Switch to light theme';
                    }

                    themeSwitcher.addEventListener('click', function(e) {
                        e.preventDefault();

                        if (document.body.classList.contains('dark-theme')) {
                            document.body.classList.remove('dark-theme');
                            localStorage.setItem('themeName', 'light-theme');
                            themeSwitcher.innerText = 'Switch to dark theme';
                        } else {
                            document.body.classList.add('dark-theme');
                            localStorage.setItem('themeName', 'dark-theme');
                            themeSwitcher.innerText = 'Switch to light theme';
                        }
                    });
                }
            </script>
        </div>
    </section>
</footer>

                    </div>
        
        <script type="text/javascript">
            // load Connect bar
            window.addEventListener('load', function () {
                var js, fjs = document.getElementsByTagName('script')[0], load = function(url, id) {
                    if (document.getElementById(id)) { return; }
                    js = document.createElement('script'); js.src = url; js.id = id;
                    fjs.parentNode.insertBefore(js, fjs);
                };
                load('https://connect.sensiolabs.com/sln.js?customize_url=https://symfony.com/sln_customiser.js', 'sln_bar');

                var s = document.createElement('link');
                s.rel = 'stylesheet';
                s.href = 'https://connect.symfony.com/css/sln.css';
                var x = document.getElementsByTagName('title')[0];
                x.parentNode.insertBefore(s, x);
            });
        </script>
            <script type="text/javascript">window.NREUM||(NREUM={});NREUM.info={"beacon":"bam.nr-data.net","licenseKey":"b10765e88c","applicationID":"3535762","transactionName":"ZVVSYEdRWkACVEJRC1wfcVdBWVtdTHZGSDhxX15AR19YXwZFankAQXNfWkFCW18PUkQCXlteVFFNcVdHClhY","queueTime":0,"applicationTime":56,"atts":"SRJRFg9LSU4=","errorBeacon":"bam.nr-data.net","agent":""}</script></body>
</html>
