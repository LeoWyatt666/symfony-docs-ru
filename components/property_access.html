<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    
    <title>Компонента PropertyAccess (доступ к свойству) &mdash; Symfony Framework Documentation  documentation</title>
    
    <link rel="stylesheet" href="../_static/" type="text/css">
    <link rel="stylesheet" href="..\_static\pygments.css" type="text/css">
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <link rel="top" title="Symfony Framework Documentation  documentation" href="..\index.html">
    <link rel="up" title="The Components" href="index.html">
    <link rel="next" title="Компонент PropertyInfo (Информация о свойстве)" href="property_info-ru.html">
    <link rel="prev" title="Компонент Process" href="process-ru.html">

<link rel="stylesheet" href="..\_assets\app.css?v=8d6d457a0820d7c245bddae16bfd4c75">
<script src="..\_assets\manifest.js?v=d41d8cd98f00b204e980"></script>
<script src="..\_assets\app.js?v=900984040c7cb4dca514"></script>
<style>
    .header__top .container {
        overflow: hidden;
        padding-top: 10px;
        padding-bottom: 10px;
    }
    .header__top .header__logo {
        float: left;
    }
    .header__top .header__support {
        float: right;
    }

    .highlight .k, .highlight .gh, .highlight .gp,
    .highlight .gu, .highlight .kc, .highlight .kd,
    .highlight .kn, .highlight .kr, .highlight .nc,
    .highlight .nd, .highlight .ni, .highlight .nl,
    .highlight .nn, .highlight .nt, .highlight .ow,
    .highlight .se { font-weight: normal; }

    .highlight .c, .highlight .cm, .highlight .c1,
    .highlight .sd, .highlight .si { font-style: normal; }

    .doc { background: none; }
    #demo-warning {
        border: 3px dashed #c00;
        padding: 10px;
        margin-bottom: 30px;
    }
    #demo-warning h4 { font-size: 1.7em;font-weight: bold; }
    #demo-warning p { margin-bottom: 0; }
</style>

<!-- Global Site Tag (gtag.js) - Google Analytics -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-107764519-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-107764519-1');
</script>

<!-- Facebook Pixel Code -->
<script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
        n.callMethod.apply(n,arguments):n.queue.push(arguments)};
        if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
        n.queue=[];t=b.createElement(e);t.async=!0;
        t.src=v;s=b.getElementsByTagName(e)[0];
        s.parentNode.insertBefore(t,s)}(window, document,'script',
        'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '250281335689441');
    fbq('track', 'PageView');
</script>
<img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=250281335689441&ev=PageView&noscript=1">
<!-- End Facebook Pixel Code -->

<script type="text/javascript">!function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="https://vk.com/js/api/openapi.js?159",t.onload=function(){VK.Retargeting.Init("VK-RTRG-279161-8p6Jv"),VK.Retargeting.Hit()},document.head.appendChild(t)}();</script><img src="https://vk.com/rtrg?p=VK-RTRG-279161-8p6Jv" style="position:fixed; left:-999px;" alt="">


  </head>
  <body role="document">

<body class="components doc_article doc">

<header>
    <section class="header__top">
        <div class="container">
            <div class="header__logo">
                <a href="..\..\..\index.html">
                    <img src="..\..\..\_images\header-logo.svg" alt="Symfony.com.ua logo">
                </a>
            </div>
            <div class="header__support hidden-xs">
                <a href="http://playtini.ua/" title="Компания Playtini">
                    <img height="69" src="..\..\..\_images\support.png" alt="Symfony is a SensioLabs product">
                </a>
            </div>
        </div>
    </section>
</header>

<div class="container"><div id="page-content">
    <div class="row">
        <div id="sidebar" class="col-sm-3">
            <div id="sidebar-content"><div class="submenu">
    
    
    <ul class="list_submenu list-unstyled">
    
        <li class="first">
            <a href="..\index.html">Главная</a>
        </li>
    
        <li>
            <a href="index.html">Компоненты</a>
        </li>
    
        <li>
            <a href="..\best_practices\index.html">Лучшие практики</a>
        </li>
    
        <li>
            <a href="..\quick_tour\index.html">Быстрый старт</a>
        </li>
    
        <li>
            <a href="..\reference\index.html">Справочник</a>
        </li>
    
        <li>
            <a href="..\genindex.html">Индекс</a>
        </li>
    
        <li>
            <a href="..\contributing\index.html">Участие</a>
        </li>
    
    </ul>
</div>

                <div class="toc"> 
    <h4>Содержание</h4>
    <div class="toc-content">
        <ul>
<li><a class="reference internal" href="#">Компонента PropertyAccess (доступ к свойству)</a><ul>
<li><a class="reference internal" href="#id1">Установка</a></li>
<li><a class="reference internal" href="#id2">Использование</a></li>
<li><a class="reference internal" href="#id3">Чтение из массивов</a></li>
<li><a class="reference internal" href="#id4">Чтение из объектов</a><ul>
<li><a class="reference internal" href="#id5">Доступ к публичным свойствам</a></li>
<li><a class="reference internal" href="#id6">Использование геттеров</a></li>
<li><a class="reference internal" href="#id7">Использование хассеров / иссеров</a></li>
<li><a class="reference internal" href="#get">Волшебный метод <tt class="docutils literal"><code>__get()</code></tt></a></li>
<li><a class="reference internal" href="#call">Волшебный метод <tt class="docutils literal"><code>__call()</code></tt></a></li>
</ul>
</li>
<li><a class="reference internal" href="#id8">Написание в массивы</a></li>
<li><a class="reference internal" href="#id9">Написание в объекты</a><ul>
<li><a class="reference internal" href="#id10">Написание в массив свойств</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id11">Проверка путей свойства</a></li>
<li><a class="reference internal" href="#id12">Смешение объектов и массивов</a><ul>
<li><a class="reference internal" href="#id13">Включение других функций</a></li>
</ul>
</li>
</ul>
</li>
</ul>

    </div>
</div>
                
            </div>

            <div class="ads m-b-30">
                <h2>Вакансии Playtini</h2>
                <div class="ad m-b-15">
                    <h3>
                        <a href="http://playtini.ua/careers/php-dev">
                            Middle+ PHP Developer/Symfony
                        </a>
                    </h3>
                    <div><b>Playtini</b> активно поддерживает и развивает свои продукты, и профессионализм команды. И на данный момент в поиске специалиста на позицию <b>«Middle+ PHP Developer/Symfony»,</b> который улучшит качество внутренних сервисов компании и увеличит их количество.</div>
                </div>
                <!--
                <div class="ad m-b-15">
                    <h3>
                        <a href="http://playtini.ua/careers/symfony-senior">
                            Senior PHP Developer/Symfony
                        </a>
                    </h3>
                    <div>We are looking for strong, experienced <b>Senior PHP Developer/Symfony.</b> We expect him/her to participate in improving and extending a system built using microservice architecture by means of modern technologies.</div>
                </div>
                -->
                <div class="ad">
                    <h3><a href="http://playtini.ua/careers">
                        Остальные вакансии компании
                        <img src="..\..\..\_images\logo-playtini.png" alt="Playtini">
                    </a></h3>
                </div>
            </div>
        </div>

        <div id="main" class="col-sm-9">
            <ol class="breadcrumb">
                
                <li><a href="..\index.html">Документация</a></li>
                
                <li><a href="index.html">The Components</a></li>
                
                <li class="active">Компонента PropertyAccess (доступ к свойству)</li>
            </ol>

            <div class="page">
                
  <div class="section" id="propertyaccess">
<span id="index-0"></span><h1>Компонента PropertyAccess (доступ к свойству)<a class="headerlink" href="#propertyaccess" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div>Компонент PropertyAccess предоставляет функцию для чтения и написания
из/в объект или массив, используя простую нотацию строки.</div></blockquote>
<div class="section" id="id1">
<h2>Установка<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<div class="literal-block"><div class="highlight-terminal"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">$</span> composer require symfony/property-access
</pre></div>
</td></tr></table></div></div>
<p>Также вы можете клонировать репозиторий <a class="reference external" href="https://github.com/symfony/property-access">https://github.com/symfony/property-access</a>.</p>
<div class="admonition-wrapper">
<div class="note"></div><div class="admonition admonition-note"><p class="first admonition-title">Note</p>
<p class="last">If you install this component outside of a Symfony application, you must
require the <tt class="docutils literal"><code>vendor/autoload.php</code></tt> file in your code to enable the class
autoloading mechanism provided by Composer. Read
<a class="reference internal" href="using_components.html"><em>this article</em></a> for more details.</p>
</div></div>
</div>
<div class="section" id="id2">
<h2>Использование<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>Входная точка этого компонента - это фабрика
<tt class="docutils literal"><code><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/PropertyAccess/PropertyAccess.html#method_createPropertyAccessor" title="Symfony\Component\PropertyAccess\PropertyAccess::createPropertyAccessor()">PropertyAccess::createPropertyAccessor</a></code></tt>.
Это фабрика создаст новый экземпляр класса <tt class="docutils literal"><code><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/PropertyAccess/PropertyAccessor.html" title="Symfony\Component\PropertyAccess\PropertyAccessor">PropertyAccessor</a></code></tt>
с конфигурацией по умолчанию:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Symfony\Component\PropertyAccess\PropertyAccess</span><span class="p">;</span>

<span class="nv">$propertyAccessor</span> <span class="o">=</span> <span class="nx">PropertyAccess</span><span class="o">::</span><span class="na">createPropertyAccessor</span><span class="p">();</span>
</pre></div>
</td></tr></table></div></div>
</div>
<div class="section" id="id3">
<h2>Чтение из массивов<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<p>Вы можете прочитать массив с помощью метода
<tt class="docutils literal"><code><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/PropertyAccess/PropertyAccessor.html#method_getValue" title="Symfony\Component\PropertyAccess\PropertyAccessor::getValue()">PropertyAccessor::getValue</a></code></tt>.
Это делается, используя нотации индекса, которые используются в PHP:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// ...</span>
<span class="nv">$person</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;first_name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Wouter&#39;</span><span class="p">,</span>
<span class="p">);</span>

<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$propertyAccessor</span><span class="o">-&gt;</span><span class="na">getValue</span><span class="p">(</span><span class="nv">$person</span><span class="p">,</span> <span class="s1">&#39;[first_name]&#39;</span><span class="p">));</span> <span class="c1">// &#39;Wouter&#39;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$propertyAccessor</span><span class="o">-&gt;</span><span class="na">getValue</span><span class="p">(</span><span class="nv">$person</span><span class="p">,</span> <span class="s1">&#39;[age]&#39;</span><span class="p">));</span> <span class="c1">// null</span>
</pre></div>
</td></tr></table></div></div>
<p>Как вы можете увидеть, метод вернёт``null``, если индекс не существует.</p>
<p>Вы также можете использовать многомерные массивы:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// ...</span>
<span class="nv">$persons</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;first_name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Wouter&#39;</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;first_name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Ryan&#39;</span><span class="p">,</span>
    <span class="p">)</span>
<span class="p">);</span>

<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$propertyAccessor</span><span class="o">-&gt;</span><span class="na">getValue</span><span class="p">(</span><span class="nv">$persons</span><span class="p">,</span> <span class="s1">&#39;[0][first_name]&#39;</span><span class="p">));</span> <span class="c1">// &#39;Wouter&#39;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$propertyAccessor</span><span class="o">-&gt;</span><span class="na">getValue</span><span class="p">(</span><span class="nv">$persons</span><span class="p">,</span> <span class="s1">&#39;[1][first_name]&#39;</span><span class="p">));</span> <span class="c1">// &#39;Ryan&#39;</span>
</pre></div>
</td></tr></table></div></div>
</div>
<div class="section" id="id4">
<h2>Чтение из объектов<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<p>Метод <tt class="docutils literal"><code>getValue()</code></tt> очень обширный, и вы можете увидеть все его функции
при работе с объектами.</p>
<div class="section" id="id5">
<h3>Доступ к публичным свойствам<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<p>Чтобы считывать из свойств, используйте нотацию &quot;dot&quot;:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// ...</span>
<span class="nv">$person</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Person</span><span class="p">();</span>
<span class="nv">$person</span><span class="o">-&gt;</span><span class="na">firstName</span> <span class="o">=</span> <span class="s1">&#39;Wouter&#39;</span><span class="p">;</span>

<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$propertyAccessor</span><span class="o">-&gt;</span><span class="na">getValue</span><span class="p">(</span><span class="nv">$person</span><span class="p">,</span> <span class="s1">&#39;firstName&#39;</span><span class="p">));</span> <span class="c1">// &#39;Wouter&#39;</span>

<span class="nv">$child</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Person</span><span class="p">();</span>
<span class="nv">$child</span><span class="o">-&gt;</span><span class="na">firstName</span> <span class="o">=</span> <span class="s1">&#39;Bar&#39;</span><span class="p">;</span>
<span class="nv">$person</span><span class="o">-&gt;</span><span class="na">children</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="nv">$child</span><span class="p">);</span>

<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$propertyAccessor</span><span class="o">-&gt;</span><span class="na">getValue</span><span class="p">(</span><span class="nv">$person</span><span class="p">,</span> <span class="s1">&#39;children[0].firstName&#39;</span><span class="p">));</span> <span class="c1">// &#39;Bar&#39;</span>
</pre></div>
</td></tr></table></div></div>
<div class="admonition-wrapper">
<div class="caution"></div><div class="admonition admonition-caution"><p class="first admonition-title">Caution</p>
<p class="last">Доступ к публичным свойствам - это последня опция, используемая <tt class="docutils literal"><code>PropertyAccessor</code></tt>.
Она пытается получить доступ к значению, используя методы описанные ниже до
использования свойства напрямую. Например, если у вас есть публичное свойство,
которое имеет метод геттера, то она будет использовать геттер.</p>
</div></div>
</div>
<div class="section" id="id6">
<h3>Использование геттеров<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<p>Метод <tt class="docutils literal"><code>getValue()</code></tt> также поддерживает чтение, используя геттеры. Этот метод будет создан,
используя общие соглашения об именовании для геттеров. Он camelizes имя свойства (<tt class="docutils literal"><code>first_name</code></tt>
становится <tt class="docutils literal"><code>FirstName</code></tt>) и добавляет к нему префикс <tt class="docutils literal"><code>get</code></tt>. Поэтому настоящий метод становится
<tt class="docutils literal"><code>getFirstName()</code></tt>:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// ...</span>
<span class="k">class</span> <span class="nc">Person</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="nv">$firstName</span> <span class="o">=</span> <span class="s1">&#39;Wouter&#39;</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">getFirstName</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">firstName</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nv">$person</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Person</span><span class="p">();</span>

<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$propertyAccessor</span><span class="o">-&gt;</span><span class="na">getValue</span><span class="p">(</span><span class="nv">$person</span><span class="p">,</span> <span class="s1">&#39;first_name&#39;</span><span class="p">));</span> <span class="c1">// &#39;Wouter&#39;</span>
</pre></div>
</td></tr></table></div></div>
</div>
<div class="section" id="id7">
<h3>Использование хассеров / иссеров<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<p>На этом всё не останавливается. Если геттер не найден, процесс доступа будет искать
иссер или хассер. Этот метод создается, используя тот же способ что и геттеры, что
означает, что вы можете сделать что-то вроде этого:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// ...</span>
<span class="k">class</span> <span class="nc">Person</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="nv">$author</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
    <span class="k">private</span> <span class="nv">$children</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">isAuthor</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">author</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">hasChildren</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="mi">0</span> <span class="o">!==</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">children</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nv">$person</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Person</span><span class="p">();</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$propertyAccessor</span><span class="o">-&gt;</span><span class="na">getValue</span><span class="p">(</span><span class="nv">$person</span><span class="p">,</span> <span class="s1">&#39;author&#39;</span><span class="p">))</span> <span class="p">{</span>
    <span class="nb">var_dump</span><span class="p">(</span><span class="s1">&#39;He is an author&#39;</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$propertyAccessor</span><span class="o">-&gt;</span><span class="na">getValue</span><span class="p">(</span><span class="nv">$person</span><span class="p">,</span> <span class="s1">&#39;children&#39;</span><span class="p">))</span> <span class="p">{</span>
    <span class="nb">var_dump</span><span class="p">(</span><span class="s1">&#39;He has children&#39;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
<p>Это произведёт: <tt class="docutils literal"><code>He is an author</code></tt></p>
</div>
<div class="section" id="get">
<h3>Волшебный метод <tt class="docutils literal"><code>__get()</code></tt><a class="headerlink" href="#get" title="Permalink to this headline">¶</a></h3>
<p>Метод <tt class="docutils literal"><code>getValue()</code></tt> может также использовать волшебный метод <tt class="docutils literal"><code>__get()</code></tt>:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// ...</span>
<span class="k">class</span> <span class="nc">Person</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="nv">$children</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;Wouter&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="o">...</span><span class="p">),</span>
    <span class="p">);</span>

    <span class="k">public</span> <span class="k">function</span> <span class="fm">__get</span><span class="p">(</span><span class="nv">$id</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">children</span><span class="p">[</span><span class="nv">$id</span><span class="p">];</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nv">$person</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Person</span><span class="p">();</span>

<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$propertyAccessor</span><span class="o">-&gt;</span><span class="na">getValue</span><span class="p">(</span><span class="nv">$person</span><span class="p">,</span> <span class="s1">&#39;Wouter&#39;</span><span class="p">));</span> <span class="c1">// array(...)</span>
</pre></div>
</td></tr></table></div></div>
</div>
<div class="section" id="call">
<span id="components-property-access-magic-call-ru"></span><h3>Волшебный метод <tt class="docutils literal"><code>__call()</code></tt><a class="headerlink" href="#call" title="Permalink to this headline">¶</a></h3>
<p>Наконец, <tt class="docutils literal"><code>getValue()</code></tt> может использовать волшебный метод <tt class="docutils literal"><code>__call()</code></tt>, но вам нужно
включить эту функцию, используя
<tt class="docutils literal"><code><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/PropertyAccess/PropertyAccessorBuilder.html" title="Symfony\Component\PropertyAccess\PropertyAccessorBuilder">PropertyAccessorBuilder</a></code></tt>:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// ...</span>
<span class="k">class</span> <span class="nc">Person</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="nv">$children</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;wouter&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="o">...</span><span class="p">),</span>
    <span class="p">);</span>

    <span class="k">public</span> <span class="k">function</span> <span class="fm">__call</span><span class="p">(</span><span class="nv">$name</span><span class="p">,</span> <span class="nv">$args</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$property</span> <span class="o">=</span> <span class="nb">lcfirst</span><span class="p">(</span><span class="nb">substr</span><span class="p">(</span><span class="nv">$name</span><span class="p">,</span> <span class="mi">3</span><span class="p">));</span>
        <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;get&#39;</span> <span class="o">===</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$name</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nb">isset</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">children</span><span class="p">[</span><span class="nv">$property</span><span class="p">])</span>
                <span class="o">?</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">children</span><span class="p">[</span><span class="nv">$property</span><span class="p">]</span>
                <span class="o">:</span> <span class="k">null</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="s1">&#39;set&#39;</span> <span class="o">===</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$name</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span> <span class="p">{</span>
            <span class="nv">$value</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">==</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$args</span><span class="p">)</span> <span class="o">?</span> <span class="nv">$args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">:</span> <span class="k">null</span><span class="p">;</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">children</span><span class="p">[</span><span class="nv">$property</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$value</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nv">$person</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Person</span><span class="p">();</span>

<span class="c1">// Включить волшебный метод PHP __call()</span>
<span class="nv">$propertyAccessor</span> <span class="o">=</span> <span class="nx">PropertyAccess</span><span class="o">::</span><span class="na">createPropertyAccessorBuilder</span><span class="p">()</span>
    <span class="o">-&gt;</span><span class="na">enableMagicCall</span><span class="p">()</span>
    <span class="o">-&gt;</span><span class="na">getPropertyAccessor</span><span class="p">();</span>

<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$propertyAccessor</span><span class="o">-&gt;</span><span class="na">getValue</span><span class="p">(</span><span class="nv">$person</span><span class="p">,</span> <span class="s1">&#39;wouter&#39;</span><span class="p">));</span> <span class="c1">// array(...)</span>
</pre></div>
</td></tr></table></div></div>
<div class="admonition-wrapper">
<div class="caution"></div><div class="admonition admonition-caution"><p class="first admonition-title">Caution</p>
<p class="last">Функция <tt class="docutils literal"><code>__call()</code></tt> отключена по умолчанию, вы можете включить её вызвав
<tt class="docutils literal"><code><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/PropertyAccess/PropertyAccessorBuilder.html#method_enableMagicCall" title="Symfony\Component\PropertyAccess\PropertyAccessorBuilder::enableMagicCall()">PropertyAccessorBuilder::enableMagicCall</a></code></tt>
см. <a class="reference internal" href="#id13">Включение других функций</a>.</p>
</div></div>
</div>
</div>
<div class="section" id="id8">
<h2>Написание в массивы<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h2>
<p>Класс <tt class="docutils literal"><code>PropertyAccessor</code></tt> может делать больше, чем просто читать массивы, он
может также писать в массив. Этого можно достичь, используя метод
<tt class="docutils literal"><code><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/PropertyAccess/PropertyAccessor.html#method_setValue" title="Symfony\Component\PropertyAccess\PropertyAccessor::setValue()">PropertyAccessor::setValue</a></code></tt>:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// ...</span>
<span class="nv">$person</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>

<span class="nv">$propertyAccessor</span><span class="o">-&gt;</span><span class="na">setValue</span><span class="p">(</span><span class="nv">$person</span><span class="p">,</span> <span class="s1">&#39;[first_name]&#39;</span><span class="p">,</span> <span class="s1">&#39;Wouter&#39;</span><span class="p">);</span>

<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$propertyAccessor</span><span class="o">-&gt;</span><span class="na">getValue</span><span class="p">(</span><span class="nv">$person</span><span class="p">,</span> <span class="s1">&#39;[first_name]&#39;</span><span class="p">));</span> <span class="c1">// &#39;Wouter&#39;</span>
<span class="c1">// или</span>
<span class="c1">// var_dump($person[&#39;first_name&#39;]); // &#39;Wouter&#39;</span>
</pre></div>
</td></tr></table></div></div>
</div>
<div class="section" id="id9">
<h2>Написание в объекты<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h2>
<p>Метод <tt class="docutils literal"><code>setValue()</code></tt> имеет такие же функции, как метод <tt class="docutils literal"><code>getValue()</code></tt>.  Вы можете использовать
сеттеры, волшебный метод <tt class="docutils literal"><code>__set()</code></tt> или свойства для установки значений:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// ...</span>
<span class="k">class</span> <span class="nc">Person</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="nv">$firstName</span><span class="p">;</span>
    <span class="k">private</span> <span class="nv">$lastName</span><span class="p">;</span>
    <span class="k">private</span> <span class="nv">$children</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">setLastName</span><span class="p">(</span><span class="nv">$name</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">lastName</span> <span class="o">=</span> <span class="nv">$name</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">getLastName</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">lastName</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">getChildren</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">children</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="fm">__set</span><span class="p">(</span><span class="nv">$property</span><span class="p">,</span> <span class="nv">$value</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="nv">$property</span> <span class="o">=</span> <span class="nv">$value</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nv">$person</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Person</span><span class="p">();</span>

<span class="nv">$propertyAccessor</span><span class="o">-&gt;</span><span class="na">setValue</span><span class="p">(</span><span class="nv">$person</span><span class="p">,</span> <span class="s1">&#39;firstName&#39;</span><span class="p">,</span> <span class="s1">&#39;Wouter&#39;</span><span class="p">);</span>
<span class="nv">$propertyAccessor</span><span class="o">-&gt;</span><span class="na">setValue</span><span class="p">(</span><span class="nv">$person</span><span class="p">,</span> <span class="s1">&#39;lastName&#39;</span><span class="p">,</span> <span class="s1">&#39;de Jong&#39;</span><span class="p">);</span> <span class="c1">// setLastName is called</span>
<span class="nv">$propertyAccessor</span><span class="o">-&gt;</span><span class="na">setValue</span><span class="p">(</span><span class="nv">$person</span><span class="p">,</span> <span class="s1">&#39;children&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="k">new</span> <span class="nx">Person</span><span class="p">()));</span> <span class="c1">// __set is called</span>

<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$person</span><span class="o">-&gt;</span><span class="na">firstName</span><span class="p">);</span> <span class="c1">// &#39;Wouter&#39;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$person</span><span class="o">-&gt;</span><span class="na">getLastName</span><span class="p">());</span> <span class="c1">// &#39;de Jong&#39;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$person</span><span class="o">-&gt;</span><span class="na">getChildren</span><span class="p">());</span> <span class="c1">// array(Person());</span>
</pre></div>
</td></tr></table></div></div>
<p>Вы можете также использовать <tt class="docutils literal"><code>__call()</code></tt>, чтобы устанавливать значения, но вам
нужно включить функцию, см. <a class="reference internal" href="#id13">Включение других функций</a>.</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// ...</span>
<span class="k">class</span> <span class="nc">Person</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="nv">$children</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>

    <span class="k">public</span> <span class="k">function</span> <span class="fm">__call</span><span class="p">(</span><span class="nv">$name</span><span class="p">,</span> <span class="nv">$args</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$property</span> <span class="o">=</span> <span class="nb">lcfirst</span><span class="p">(</span><span class="nb">substr</span><span class="p">(</span><span class="nv">$name</span><span class="p">,</span> <span class="mi">3</span><span class="p">));</span>
        <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;get&#39;</span> <span class="o">===</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$name</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nb">isset</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">children</span><span class="p">[</span><span class="nv">$property</span><span class="p">])</span>
                <span class="o">?</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">children</span><span class="p">[</span><span class="nv">$property</span><span class="p">]</span>
                <span class="o">:</span> <span class="k">null</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="s1">&#39;set&#39;</span> <span class="o">===</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$name</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span> <span class="p">{</span>
            <span class="nv">$value</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">==</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$args</span><span class="p">)</span> <span class="o">?</span> <span class="nv">$args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">:</span> <span class="k">null</span><span class="p">;</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">children</span><span class="p">[</span><span class="nv">$property</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$value</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

<span class="p">}</span>

<span class="nv">$person</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Person</span><span class="p">();</span>

<span class="c1">// Включить волшебный __call</span>
<span class="nv">$propertyAccessor</span> <span class="o">=</span> <span class="nx">PropertyAccess</span><span class="o">::</span><span class="na">createPropertyAccessorBuilder</span><span class="p">()</span>
    <span class="o">-&gt;</span><span class="na">enableMagicCall</span><span class="p">()</span>
    <span class="o">-&gt;</span><span class="na">getPropertyAccessor</span><span class="p">();</span>

<span class="nv">$propertyAccessor</span><span class="o">-&gt;</span><span class="na">setValue</span><span class="p">(</span><span class="nv">$person</span><span class="p">,</span> <span class="s1">&#39;wouter&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="o">...</span><span class="p">));</span>

<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$person</span><span class="o">-&gt;</span><span class="na">getWouter</span><span class="p">());</span> <span class="c1">// array(...)</span>
</pre></div>
</td></tr></table></div></div>
<div class="section" id="id10">
<h3>Написание в массив свойств<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<p>Класс <tt class="docutils literal"><code>PropertyAccessor</code></tt> позволяет обновлять содержание массивов, содержащихся
в свойствах, через методы <em>добавления</em> и <em>удаления</em> (adder и remover).</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// ...</span>
<span class="k">class</span> <span class="nc">Person</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @var string[]</span>
<span class="sd">     */</span>
    <span class="k">private</span> <span class="nv">$children</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">getChildren</span><span class="p">()</span><span class="o">:</span> <span class="k">array</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">children</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">addChild</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$name</span><span class="p">)</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">children</span><span class="p">[</span><span class="nv">$name</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$name</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">removeChild</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$name</span><span class="p">)</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="nb">unset</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">children</span><span class="p">[</span><span class="nv">$name</span><span class="p">]);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nv">$person</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Person</span><span class="p">();</span>
<span class="nv">$propertyAccessor</span><span class="o">-&gt;</span><span class="na">setValue</span><span class="p">(</span><span class="nv">$person</span><span class="p">,</span> <span class="s1">&#39;children&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;kevin&#39;</span><span class="p">,</span> <span class="s1">&#39;wouter&#39;</span><span class="p">));</span>

<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$person</span><span class="o">-&gt;</span><span class="na">getChildren</span><span class="p">());</span> <span class="c1">// array(&#39;kevin&#39;, &#39;wouter&#39;)</span>
</pre></div>
</td></tr></table></div></div>
<p>Компонент PropertyAccess ищет методы под названием <tt class="docutils literal"><code>add&lt;SingularOfThePropertyName&gt;()</code></tt>
и <tt class="docutils literal"><code>remove&lt;SingularOfThePropertyName&gt;()</code></tt>. Оба метода должны быть определены. Например,
в предыдущем примере, компонент щет методы <tt class="docutils literal"><code>addChild()</code></tt> и <tt class="docutils literal"><code>removeChild()</code></tt>, чтобы
получить доступ к свойству <tt class="docutils literal"><code>children</code></tt>. <a class="reference external" href="https://github.com/symfony/inflector">Компонент Инфлектор</a> используется, чтобы
найти сингуляр имени свйоства.</p>
<p>Если они доступны, то методы <em>добавления</em> и <em>удаления</em> имеют приоритет перед
методом <em>сеттера</em>.</p>
</div>
</div>
<div class="section" id="id11">
<h2>Проверка путей свойства<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h2>
<p>Если вы хотите проверить может ли безопасно быть вызван,
<tt class="docutils literal"><code><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/PropertyAccess/PropertyAccessor.html#method_getValue" title="Symfony\Component\PropertyAccess\PropertyAccessor::getValue()">PropertyAccessor::getValue</a></code></tt>
на самом деле не вызывая этот метод, то вы можете вместо этого использовать
<tt class="docutils literal"><code><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/PropertyAccess/PropertyAccessor.html#method_isReadable" title="Symfony\Component\PropertyAccess\PropertyAccessor::isReadable()">PropertyAccessor::isReadable</a></code></tt>:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nv">$person</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Person</span><span class="p">();</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$propertyAccessor</span><span class="o">-&gt;</span><span class="na">isReadable</span><span class="p">(</span><span class="nv">$person</span><span class="p">,</span> <span class="s1">&#39;firstName&#39;</span><span class="p">))</span> <span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
<p>То же самое возможно для <tt class="docutils literal"><code><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/PropertyAccess/PropertyAccessor.html#method_setValue" title="Symfony\Component\PropertyAccess\PropertyAccessor::setValue()">PropertyAccessor::setValue</a></code></tt>:
Вызовите метод
<tt class="docutils literal"><code><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/PropertyAccess/PropertyAccessor.html#method_isWritable" title="Symfony\Component\PropertyAccess\PropertyAccessor::isWritable()">PropertyAccessor::isWritable</a></code></tt>,
чтобы узнать, можно ли обновить путь свойства:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nv">$person</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Person</span><span class="p">();</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$propertyAccessor</span><span class="o">-&gt;</span><span class="na">isWritable</span><span class="p">(</span><span class="nv">$person</span><span class="p">,</span> <span class="s1">&#39;firstName&#39;</span><span class="p">))</span> <span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
</div>
<div class="section" id="id12">
<h2>Смешение объектов и массивов<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h2>
<p>Вы можете также смешивать объекты и массивы:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// ...</span>
<span class="k">class</span> <span class="nc">Person</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="nv">$firstName</span><span class="p">;</span>
    <span class="k">private</span> <span class="nv">$children</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">setChildren</span><span class="p">(</span><span class="nv">$children</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">children</span> <span class="o">=</span> <span class="nv">$children</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">getChildren</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">children</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nv">$person</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Person</span><span class="p">();</span>

<span class="nv">$propertyAccessor</span><span class="o">-&gt;</span><span class="na">setValue</span><span class="p">(</span><span class="nv">$person</span><span class="p">,</span> <span class="s1">&#39;children[0]&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">Person</span><span class="p">);</span>
<span class="c1">// равняется $person-&gt;getChildren()[0] = new Person()</span>

<span class="nv">$propertyAccessor</span><span class="o">-&gt;</span><span class="na">setValue</span><span class="p">(</span><span class="nv">$person</span><span class="p">,</span> <span class="s1">&#39;children[0].firstName&#39;</span><span class="p">,</span> <span class="s1">&#39;Wouter&#39;</span><span class="p">);</span>
<span class="c1">// равняется $person-&gt;getChildren()[0]-&gt;firstName = &#39;Wouter&#39;</span>

<span class="nb">var_dump</span><span class="p">(</span><span class="s1">&#39;Hello &#39;</span><span class="o">.</span><span class="nv">$propertyAccessor</span><span class="o">-&gt;</span><span class="na">getValue</span><span class="p">(</span><span class="nv">$person</span><span class="p">,</span> <span class="s1">&#39;children[0].firstName&#39;</span><span class="p">));</span> <span class="c1">// &#39;Wouter&#39;</span>
<span class="c1">// равняется $person-&gt;getChildren()[0]-&gt;firstName</span>
</pre></div>
</td></tr></table></div></div>
<div class="section" id="id13">
<h3>Включение других функций<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><code><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/PropertyAccess/PropertyAccessor.html" title="Symfony\Component\PropertyAccess\PropertyAccessor">PropertyAccessor</a></code></tt> может быть
сконфигурирован так, чтобы включать дополнительные функции. Чтобы сделать
это, вы можете использовать
<tt class="docutils literal"><code><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/PropertyAccess/PropertyAccessorBuilder.html" title="Symfony\Component\PropertyAccess\PropertyAccessorBuilder">PropertyAccessorBuilder</a></code></tt>:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// ...</span>
<span class="nv">$propertyAccessorBuilder</span> <span class="o">=</span> <span class="nx">PropertyAccess</span><span class="o">::</span><span class="na">createPropertyAccessorBuilder</span><span class="p">();</span>

<span class="c1">// включает волшебный __call</span>
<span class="nv">$propertyAccessorBuilder</span><span class="o">-&gt;</span><span class="na">enableMagicCall</span><span class="p">();</span>

<span class="c1">// включает волшебный __call</span>
<span class="nv">$propertyAccessorBuilder</span><span class="o">-&gt;</span><span class="na">disableMagicCall</span><span class="p">();</span>

<span class="c1">// проверяет, включена ли обработка волшебного __call</span>
<span class="nv">$propertyAccessorBuilder</span><span class="o">-&gt;</span><span class="na">isMagicCallEnabled</span><span class="p">();</span> <span class="c1">// true or false</span>

<span class="c1">// В конце получить сконфигурированый доступ к свойству</span>
<span class="nv">$propertyAccessor</span> <span class="o">=</span> <span class="nv">$propertyAccessorBuilder</span><span class="o">-&gt;</span><span class="na">getPropertyAccessor</span><span class="p">();</span>

<span class="c1">// Или всё за раз</span>
<span class="nv">$propertyAccessor</span> <span class="o">=</span> <span class="nx">PropertyAccess</span><span class="o">::</span><span class="na">createPropertyAccessorBuilder</span><span class="p">()</span>
    <span class="o">-&gt;</span><span class="na">enableMagicCall</span><span class="p">()</span>
    <span class="o">-&gt;</span><span class="na">getPropertyAccessor</span><span class="p">();</span>
</pre></div>
</td></tr></table></div></div>
<p>Или вы можете передать параметры напрямую в конструктор (не рекомендуется):</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// ...</span>
<span class="nv">$propertyAccessor</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PropertyAccessor</span><span class="p">(</span><span class="k">true</span><span class="p">);</span> <span class="c1">// это включит обработку волшебного __call</span>
</pre></div>
</td></tr></table></div></div>
</div>
</div>
</div>


            </div>

            
            <div class="navigation">
                <a href="process-ru.html">« Компонент Process</a>
                <span class="separator">|</span>
                <a href="property_info-ru.html">Компонент PropertyInfo (Информация о свойстве) »</a>
            </div>
            

            <div id="license">
                <p>Эта документация является переводом <a href="http://symfony.com/doc/current/index.html">официальной документации Symfony</a> и предоставляется по свободной лицензии <a rel="license nofollow" href="https://creativecommons.org/licenses/by-sa/3.0/deed.ru">CC BY-SA 3.0</a>.</p>
            </div>
        </div>
    </div>
</div></div>


  </body>
</body></html>