<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    
    <title>Компонент BrowserKit &mdash; Symfony Framework Documentation  documentation</title>
    
    <link rel="stylesheet" href="../_static/" type="text/css">
    <link rel="stylesheet" href="..\_static\pygments.css" type="text/css">
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <link rel="top" title="Symfony Framework Documentation  documentation" href="..\index.html">
    <link rel="up" title="The Components" href="index.html">
    <link rel="next" title="The Cache Component" href="cache.html">
    <link rel="prev" title="The BrowserKit Component" href="browser_kit.html">

<link rel="stylesheet" href="..\_assets\app.css?v=8d6d457a0820d7c245bddae16bfd4c75">
<script src="..\_assets\manifest.js?v=d41d8cd98f00b204e980"></script>
<script src="..\_assets\app.js?v=900984040c7cb4dca514"></script>
<style>
    .header__top .container {
        overflow: hidden;
        padding-top: 10px;
        padding-bottom: 10px;
    }
    .header__top .header__logo {
        float: left;
    }
    .header__top .header__support {
        float: right;
    }

    .highlight .k, .highlight .gh, .highlight .gp,
    .highlight .gu, .highlight .kc, .highlight .kd,
    .highlight .kn, .highlight .kr, .highlight .nc,
    .highlight .nd, .highlight .ni, .highlight .nl,
    .highlight .nn, .highlight .nt, .highlight .ow,
    .highlight .se { font-weight: normal; }

    .highlight .c, .highlight .cm, .highlight .c1,
    .highlight .sd, .highlight .si { font-style: normal; }

    .doc { background: none; }
    #demo-warning {
        border: 3px dashed #c00;
        padding: 10px;
        margin-bottom: 30px;
    }
    #demo-warning h4 { font-size: 1.7em;font-weight: bold; }
    #demo-warning p { margin-bottom: 0; }
</style>

<!-- Global Site Tag (gtag.js) - Google Analytics -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-107764519-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-107764519-1');
</script>

<!-- Facebook Pixel Code -->
<script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
        n.callMethod.apply(n,arguments):n.queue.push(arguments)};
        if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
        n.queue=[];t=b.createElement(e);t.async=!0;
        t.src=v;s=b.getElementsByTagName(e)[0];
        s.parentNode.insertBefore(t,s)}(window, document,'script',
        'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '250281335689441');
    fbq('track', 'PageView');
</script>
<img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=250281335689441&ev=PageView&noscript=1">
<!-- End Facebook Pixel Code -->

<script type="text/javascript">!function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="https://vk.com/js/api/openapi.js?159",t.onload=function(){VK.Retargeting.Init("VK-RTRG-279161-8p6Jv"),VK.Retargeting.Hit()},document.head.appendChild(t)}();</script><img src="https://vk.com/rtrg?p=VK-RTRG-279161-8p6Jv" style="position:fixed; left:-999px;" alt="">


  </head>
  <body role="document">

<body class="components doc_article doc">

<header>
    <section class="header__top">
        <div class="container">
            <div class="header__logo">
                <a href="..\..\..\index.html">
                    <img src="..\..\..\_images\header-logo.svg" alt="Symfony.com.ua logo">
                </a>
            </div>
            <div class="header__support hidden-xs">
                <a href="http://playtini.ua/" title="Компания Playtini">
                    <img height="69" src="..\..\..\_images\support.png" alt="Symfony is a SensioLabs product">
                </a>
            </div>
        </div>
    </section>
</header>

<div class="container"><div id="page-content">
    <div class="row">
        <div id="sidebar" class="col-sm-3">
            <div id="sidebar-content"><div class="submenu">
    
    
    <ul class="list_submenu list-unstyled">
    
        <li class="first">
            <a href="..\index.html">Главная</a>
        </li>
    
        <li>
            <a href="index.html">Компоненты</a>
        </li>
    
        <li>
            <a href="..\best_practices\index.html">Лучшие практики</a>
        </li>
    
        <li>
            <a href="..\quick_tour\index.html">Быстрый старт</a>
        </li>
    
        <li>
            <a href="..\reference\index.html">Справочник</a>
        </li>
    
        <li>
            <a href="..\genindex.html">Индекс</a>
        </li>
    
        <li>
            <a href="..\contributing\index.html">Участие</a>
        </li>
    
    </ul>
</div>

                <div class="toc"> 
    <h4>Содержание</h4>
    <div class="toc-content">
        <ul>
<li><a class="reference internal" href="#">Компонент BrowserKit</a><ul>
<li><a class="reference internal" href="#id1">Установка</a></li>
<li><a class="reference internal" href="#id2">Базовое применение</a><ul>
<li><a class="reference internal" href="#id3">Создание клиента</a></li>
<li><a class="reference internal" href="#id4">Как делать запросы</a></li>
<li><a class="reference internal" href="#id5">Нажатие ссылок</a></li>
<li><a class="reference internal" href="#id6">Отправка форм</a></li>
</ul>
</li>
<li><a class="reference internal" href="#cookie">Cookie</a><ul>
<li><a class="reference internal" href="#id7">Извлечение Cookie</a></li>
<li><a class="reference internal" href="#id8">Закольцовывание через Cookie</a></li>
<li><a class="reference internal" href="#id9">Установка Cookie</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id10">История</a></li>
<li><a class="reference internal" href="#id11">Узнайте больше</a></li>
</ul>
</li>
</ul>

    </div>
</div>
                
            </div>

            <div class="ads m-b-30">
                <h2>Вакансии Playtini</h2>
                <div class="ad m-b-15">
                    <h3>
                        <a href="http://playtini.ua/careers/php-dev">
                            Middle+ PHP Developer/Symfony
                        </a>
                    </h3>
                    <div><b>Playtini</b> активно поддерживает и развивает свои продукты, и профессионализм команды. И на данный момент в поиске специалиста на позицию <b>«Middle+ PHP Developer/Symfony»,</b> который улучшит качество внутренних сервисов компании и увеличит их количество.</div>
                </div>
                <!--
                <div class="ad m-b-15">
                    <h3>
                        <a href="http://playtini.ua/careers/symfony-senior">
                            Senior PHP Developer/Symfony
                        </a>
                    </h3>
                    <div>We are looking for strong, experienced <b>Senior PHP Developer/Symfony.</b> We expect him/her to participate in improving and extending a system built using microservice architecture by means of modern technologies.</div>
                </div>
                -->
                <div class="ad">
                    <h3><a href="http://playtini.ua/careers">
                        Остальные вакансии компании
                        <img src="..\..\..\_images\logo-playtini.png" alt="Playtini">
                    </a></h3>
                </div>
            </div>
        </div>

        <div id="main" class="col-sm-9">
            <ol class="breadcrumb">
                
                <li><a href="..\index.html">Документация</a></li>
                
                <li><a href="index.html">The Components</a></li>
                
                <li class="active">Компонент BrowserKit</li>
            </ol>

            <div class="page">
                
  <div class="section" id="browserkit">
<span id="index-0"></span><h1>Компонент BrowserKit<a class="headerlink" href="#browserkit" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div>Компонент BrowserKit симулирует поведение веб-браузера, позволяя вам
программно делать запросы, нажимать на ссылки и отправлять формы.</div></blockquote>
<div class="admonition-wrapper">
<div class="note"></div><div class="admonition admonition-note"><p class="first admonition-title">Note</p>
<p class="last">Компонент BrowserKit может делать только внутренние запросы к вашему приложению.
Если вам нужно сделать запрос к внешним сайтам и приложениям, рассмотрите использование
<a class="reference external" href="https://github.com/FriendsOfPHP/Goutte">Goutte</a>, в качестве простого веб-агрегатора, основанного на компонентах Symfony.</p>
</div></div>
<div class="section" id="id1">
<h2>Установка<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<div class="literal-block"><div class="highlight-terminal"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">$</span> composer require symfony/browser-kit
</pre></div>
</td></tr></table></div></div>
<p>Также вы можете клонировать репозиторий <a class="reference external" href="https://github.com/symfony/browser-kit">https://github.com/symfony/browser-kit</a>.</p>
<div class="admonition-wrapper">
<div class="note"></div><div class="admonition admonition-note"><p class="first admonition-title">Note</p>
<p class="last">If you install this component outside of a Symfony application, you must
require the <tt class="docutils literal"><code>vendor/autoload.php</code></tt> file in your code to enable the class
autoloading mechanism provided by Composer. Read
<a class="reference internal" href="using_components.html"><em>this article</em></a> for more details.</p>
</div></div>
</div>
<div class="section" id="id2">
<h2>Базовое применение<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<div class="admonition-wrapper">
<div class="seealso"></div><div class="admonition admonition-seealso">Эта статья объясняет как использовать функции BrowserKit как независимый
компонент в любом PHP-приложении. Прочитайте статью <a class="reference internal" href="..\testing.html#functional-tests"><span>Функциональные тесты Symfony</span></a>
для того, чтобы понять как использовать его в приложениях Symfony.</div></div>
<div class="section" id="id3">
<h3>Создание клиента<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>Компонент предоставляет только абстрактного клиента, и не предоставляет готового
к использованию бэк-энда для уровня HTTP.</p>
<p>Чтобы создать вашего собственного клиента, вам нужно расширить абстрактный класс
<tt class="docutils literal"><code>Client</code></tt> и реализовать метод <tt class="docutils literal"><code><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/BrowserKit/Client.html#method_doRequest" title="Symfony\Component\BrowserKit\Client::doRequest()">doRequest()</a></code></tt>.
Этот метод принимает запрос и должен вернуть ответ:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">namespace</span> <span class="nx">Acme</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Symfony\Component\BrowserKit\Client</span> <span class="k">as</span> <span class="nx">BaseClient</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\BrowserKit\Response</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Client</span> <span class="k">extends</span> <span class="nx">BaseClient</span>
<span class="p">{</span>
    <span class="k">protected</span> <span class="k">function</span> <span class="nf">doRequest</span><span class="p">(</span><span class="nv">$request</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// ... преобразовать запрос в ответ</span>

        <span class="k">return</span> <span class="k">new</span> <span class="nx">Response</span><span class="p">(</span><span class="nv">$content</span><span class="p">,</span> <span class="nv">$status</span><span class="p">,</span> <span class="nv">$headers</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
<p>Для простой реализации браузера, основанного на слое HTTP, посмотрите на
<a class="reference external" href="https://github.com/FriendsOfPHP/Goutte">Goutte</a>. Для реализации, основанной на <tt class="docutils literal"><code>HttpKernelInterface</code></tt>, посмотрите
на <tt class="docutils literal"><code><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpKernel/Client.html" title="Symfony\Component\HttpKernel\Client">Client</a></code></tt>, предоставленный
<a class="reference internal" href="http_kernel.html"><em>компонентом HttpKernel</em></a>.</p>
</div>
<div class="section" id="id4">
<h3>Как делать запросы<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p>Используйте метод <tt class="docutils literal"><code><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/BrowserKit/Client.html#method_request" title="Symfony\Component\BrowserKit\Client::request()">request()</a></code></tt>,
чтобы делать HTTP запросы. Первые два аргумента - HTTP метод и запрошенный
URL:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Acme\Client</span><span class="p">;</span>

<span class="nv">$client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Client</span><span class="p">();</span>
<span class="nv">$crawler</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">(</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">);</span>
</pre></div>
</td></tr></table></div></div>
<p>Значение, возвращённое методом <tt class="docutils literal"><code>request()</code></tt> - это экземпляр класса
<tt class="docutils literal"><code><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/DomCrawler/Crawler.html" title="Symfony\Component\DomCrawler\Crawler">Crawler</a></code></tt>, предоставленный
<a class="reference internal" href="dom_crawler.html"><em>DomCrawler component</em></a>, который разрешает
программный доступ и траверсирование HTML элементов.</p>
<p>Метод <tt class="docutils literal"><code><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/BrowserKit/Client.html#method_xmlHttpRequest" title="Symfony\Component\BrowserKit\Client::xmlHttpRequest()">xmlHttpRequest()</a></code></tt>,
у котого такие же аргументы как и у метода <tt class="docutils literal"><code>request()</code></tt>, является ярлыком для
создания AJAX запросов:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Acme\Client</span><span class="p">;</span>

<span class="nv">$client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Client</span><span class="p">();</span>
<span class="c1">// the required HTTP_X_REQUESTED_WITH header is added automatically</span>
<span class="nv">$crawler</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">xmlHttpRequest</span><span class="p">(</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">);</span>
</pre></div>
</td></tr></table></div></div>
<div class="versionadded">
<p><span class="versionmodified">New in version 4.1: </span>Метод <tt class="docutils literal"><code>xmlHttpRequest()</code></tt> был добавлен в Symfony 4.1.</p>
</div>
</div>
<div class="section" id="id5">
<h3>Нажатие ссылок<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<p>Объект <tt class="docutils literal"><code>Crawler</code></tt> способен симулировать нажатие на ссылки. Для начала,
передайте содержимое текста ссылки методу <tt class="docutils literal"><code>selectLink()</code></tt>, который
возвращает объект <tt class="docutils literal"><code>Link</code></tt>. Далее, передайте этот объект методу <tt class="docutils literal"><code>click()</code></tt>,
который выполняет необходимый HTTP запрос GET, чтобы симулировать нажатие
на ссылку:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Acme\Client</span><span class="p">;</span>

<span class="nv">$client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Client</span><span class="p">();</span>
<span class="nv">$crawler</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">(</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;/product/123&#39;</span><span class="p">);</span>
<span class="nv">$link</span> <span class="o">=</span> <span class="nv">$crawler</span><span class="o">-&gt;</span><span class="na">selectLink</span><span class="p">(</span><span class="s1">&#39;Go elsewhere...&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">link</span><span class="p">();</span>
<span class="nv">$client</span><span class="o">-&gt;</span><span class="na">click</span><span class="p">(</span><span class="nv">$link</span><span class="p">);</span>
</pre></div>
</td></tr></table></div></div>
</div>
<div class="section" id="id6">
<h3>Отправка форм<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<p>Объект <tt class="docutils literal"><code>Crawler</code></tt> также способен выбирать формы. Для начала, выберите
любую кнопку формы методом <tt class="docutils literal"><code>selectButton()</code></tt>. Далее, используйте метод
<tt class="docutils literal"><code>form()</code></tt>, чтобы выбрать форму, которой принадлежит кнопка.</p>
<p>После выбора формы, заполните данные и отправьте их, используя метод
<tt class="docutils literal"><code>submit()</code></tt> (который делает необходимй HTTP запрос POST , чтобы отправить
содержимое формы):</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Acme\Client</span><span class="p">;</span>

<span class="c1">// сделайте реальный запрос ко внешнему сайту</span>
<span class="nv">$client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Client</span><span class="p">();</span>
<span class="nv">$crawler</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">(</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;https://github.com/login&#39;</span><span class="p">);</span>

<span class="c1">// выберите форму и заполните некоторые значения</span>
<span class="nv">$form</span> <span class="o">=</span> <span class="nv">$crawler</span><span class="o">-&gt;</span><span class="na">selectButton</span><span class="p">(</span><span class="s1">&#39;Log in&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">form</span><span class="p">();</span>
<span class="nv">$form</span><span class="p">[</span><span class="s1">&#39;login&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;symfonyfan&#39;</span><span class="p">;</span>
<span class="nv">$form</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;anypass&#39;</span><span class="p">;</span>

<span class="c1">// Чтобы загрузить файл, значение должено быть абсолютным путём файла</span>
<span class="nv">$form</span><span class="p">[</span><span class="s1">&#39;file&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="no">__FILE__</span><span class="p">;</span>

<span class="c1">// отправьте эту форму</span>
<span class="nv">$crawler</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">submit</span><span class="p">(</span><span class="nv">$form</span><span class="p">);</span>
</pre></div>
</td></tr></table></div></div>
</div>
</div>
<div class="section" id="cookie">
<h2>Cookie<a class="headerlink" href="#cookie" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id7">
<h3>Извлечение Cookie<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<p>Реализация <tt class="docutils literal"><code>Client</code></tt> отображает cookie (если они есть) через класс
<tt class="docutils literal"><code><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/BrowserKit/CookieJar.html" title="Symfony\Component\BrowserKit\CookieJar">CookieJar</a></code></tt>, который позволяет вам
хранить и извлекать любой cookie во время выполнения запросов с клиентом:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Acme\Client</span><span class="p">;</span>

<span class="c1">// Сделайте запрос</span>
<span class="nv">$client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Client</span><span class="p">();</span>
<span class="nv">$crawler</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">(</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">);</span>

<span class="c1">// Получите cookie Jar</span>
<span class="nv">$cookieJar</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">getCookieJar</span><span class="p">();</span>

<span class="c1">// Получитк cookie по имени</span>
<span class="nv">$cookie</span> <span class="o">=</span> <span class="nv">$cookieJar</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;name_of_the_cookie&#39;</span><span class="p">);</span>

<span class="c1">// Получите данные cookie</span>
<span class="nv">$name</span>       <span class="o">=</span> <span class="nv">$cookie</span><span class="o">-&gt;</span><span class="na">getName</span><span class="p">();</span>
<span class="nv">$value</span>      <span class="o">=</span> <span class="nv">$cookie</span><span class="o">-&gt;</span><span class="na">getValue</span><span class="p">();</span>
<span class="nv">$rawValue</span>   <span class="o">=</span> <span class="nv">$cookie</span><span class="o">-&gt;</span><span class="na">getRawValue</span><span class="p">();</span>
<span class="nv">$isSecure</span>   <span class="o">=</span> <span class="nv">$cookie</span><span class="o">-&gt;</span><span class="na">isSecure</span><span class="p">();</span>
<span class="nv">$isHttpOnly</span> <span class="o">=</span> <span class="nv">$cookie</span><span class="o">-&gt;</span><span class="na">isHttpOnly</span><span class="p">();</span>
<span class="nv">$isExpired</span>  <span class="o">=</span> <span class="nv">$cookie</span><span class="o">-&gt;</span><span class="na">isExpired</span><span class="p">();</span>
<span class="nv">$expires</span>    <span class="o">=</span> <span class="nv">$cookie</span><span class="o">-&gt;</span><span class="na">getExpiresTime</span><span class="p">();</span>
<span class="nv">$path</span>       <span class="o">=</span> <span class="nv">$cookie</span><span class="o">-&gt;</span><span class="na">getPath</span><span class="p">();</span>
<span class="nv">$domain</span>     <span class="o">=</span> <span class="nv">$cookie</span><span class="o">-&gt;</span><span class="na">getDomain</span><span class="p">();</span>
<span class="nv">$sameSite</span>   <span class="o">=</span> <span class="nv">$cookie</span><span class="o">-&gt;</span><span class="na">getSameSite</span><span class="p">();</span>
</pre></div>
</td></tr></table></div></div>
<div class="admonition-wrapper">
<div class="note"></div><div class="admonition admonition-note"><p class="first admonition-title">Note</p>
<p class="last">Эти методы возвращают только cookie, срок действия которых
не истёк.</p>
</div></div>
</div>
<div class="section" id="id8">
<h3>Закольцовывание через Cookie<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Acme\Client</span><span class="p">;</span>

<span class="c1">// Сделайте запрос</span>
<span class="nv">$client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Client</span><span class="p">();</span>
<span class="nv">$crawler</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">(</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">);</span>

<span class="c1">// Получите cookie Jar</span>
<span class="nv">$cookieJar</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">getCookieJar</span><span class="p">();</span>

<span class="c1">// Получите массив со всеми cookies</span>
<span class="nv">$cookies</span> <span class="o">=</span> <span class="nv">$cookieJar</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$cookies</span> <span class="k">as</span> <span class="nv">$cookie</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">}</span>

<span class="c1">// Получите все значения</span>
<span class="nv">$values</span> <span class="o">=</span> <span class="nv">$cookieJar</span><span class="o">-&gt;</span><span class="na">allValues</span><span class="p">(</span><span class="s1">&#39;http://symfony.com&#39;</span><span class="p">);</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$values</span> <span class="k">as</span> <span class="nv">$value</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">}</span>

<span class="c1">// Получите все сырые значения</span>
<span class="nv">$rawValues</span> <span class="o">=</span> <span class="nv">$cookieJar</span><span class="o">-&gt;</span><span class="na">allRawValues</span><span class="p">(</span><span class="s1">&#39;http://symfony.com&#39;</span><span class="p">);</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$rawValues</span> <span class="k">as</span> <span class="nv">$rawValue</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
</div>
<div class="section" id="id9">
<h3>Установка Cookie<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<p>Вы также можете создавать cookie и добавлять их в cookie jar, которая может быть
внедрена в конструктор клиента:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Acme\Client</span><span class="p">;</span>

<span class="c1">// создайте cookie и добавьте в cookie jar</span>
<span class="nv">$cookie</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Cookie</span><span class="p">(</span><span class="s1">&#39;flavor&#39;</span><span class="p">,</span> <span class="s1">&#39;chocolate&#39;</span><span class="p">,</span> <span class="nb">strtotime</span><span class="p">(</span><span class="s1">&#39;+1 day&#39;</span><span class="p">));</span>
<span class="nv">$cookieJar</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">CookieJar</span><span class="p">();</span>
<span class="nv">$cookieJar</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="nv">$cookie</span><span class="p">);</span>

<span class="c1">//создайте клиент и установите cookie</span>
<span class="nv">$client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Client</span><span class="p">(</span><span class="k">array</span><span class="p">(),</span> <span class="k">null</span><span class="p">,</span> <span class="nv">$cookieJar</span><span class="p">);</span>
<span class="c1">// ...</span>
</pre></div>
</td></tr></table></div></div>
</div>
</div>
<div class="section" id="id10">
<h2>История<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h2>
<p>Клиент хранит все ваши запросы, позволяя вам перемещаться по вашей истории
вперёд и назад:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Acme\Client</span><span class="p">;</span>

<span class="nv">$client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Client</span><span class="p">();</span>
<span class="nv">$client</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">(</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">);</span>

<span class="c1">// выберите и нажмите на ссылку</span>
<span class="nv">$link</span> <span class="o">=</span> <span class="nv">$crawler</span><span class="o">-&gt;</span><span class="na">selectLink</span><span class="p">(</span><span class="s1">&#39;Documentation&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">link</span><span class="p">();</span>
<span class="nv">$client</span><span class="o">-&gt;</span><span class="na">click</span><span class="p">(</span><span class="nv">$link</span><span class="p">);</span>

<span class="c1">// перейдите назад к домашней странице</span>
<span class="nv">$crawler</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">back</span><span class="p">();</span>

<span class="c1">// перейдите вперёд к странице документации</span>
<span class="nv">$crawler</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">forward</span><span class="p">();</span>
</pre></div>
</td></tr></table></div></div>
<p>Вы можете удалять историю клиента методом <tt class="docutils literal"><code>restart()</code></tt>. Это также удалит
все cookie:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Acme\Client</span><span class="p">;</span>

<span class="nv">$client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Client</span><span class="p">();</span>
<span class="nv">$client</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">(</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">);</span>

<span class="c1">// перезапустите клиент (история и cookie также очищаются)</span>
<span class="nv">$client</span><span class="o">-&gt;</span><span class="na">restart</span><span class="p">();</span>
</pre></div>
</td></tr></table></div></div>
</div>
<div class="section" id="id11">
<h2>Узнайте больше<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="..\testing.html"><em>Testing</em></a></li>
<li><a class="reference internal" href="css_selector.html"><em>The CssSelector Component</em></a></li>
<li><a class="reference internal" href="dom_crawler.html"><em>The DomCrawler Component</em></a></li>
</ul>
</div>
</div>


            </div>

            
            <div class="navigation">
                <a href="browser_kit.html">« The BrowserKit Component</a>
                <span class="separator">|</span>
                <a href="cache.html">The Cache Component »</a>
            </div>
            

            <div id="license">
                <p>Эта документация является переводом <a href="http://symfony.com/doc/current/index.html">официальной документации Symfony</a> и предоставляется по свободной лицензии <a rel="license nofollow" href="https://creativecommons.org/licenses/by-sa/3.0/deed.ru">CC BY-SA 3.0</a>.</p>
            </div>
        </div>
    </div>
</div></div>


  </body>
</body></html>