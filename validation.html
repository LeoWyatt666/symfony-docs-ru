<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    
    <title>Валидация &mdash; Symfony Framework Documentation  documentation</title>
    
    <link rel="stylesheet" href="_static/" type="text/css">
    <link rel="stylesheet" href="_static\pygments.css" type="text/css">
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <link rel="top" title="Symfony Framework Documentation  documentation" href="index.html">

<link rel="stylesheet" href="_assets\app.css?v=8d6d457a0820d7c245bddae16bfd4c75">
<script src="_assets\manifest.js?v=d41d8cd98f00b204e980"></script>
<script src="_assets\app.js?v=900984040c7cb4dca514"></script>
<style>
    .header__top .container {
        overflow: hidden;
        padding-top: 10px;
        padding-bottom: 10px;
    }
    .header__top .header__logo {
        float: left;
    }
    .header__top .header__support {
        float: right;
    }

    .highlight .k, .highlight .gh, .highlight .gp,
    .highlight .gu, .highlight .kc, .highlight .kd,
    .highlight .kn, .highlight .kr, .highlight .nc,
    .highlight .nd, .highlight .ni, .highlight .nl,
    .highlight .nn, .highlight .nt, .highlight .ow,
    .highlight .se { font-weight: normal; }

    .highlight .c, .highlight .cm, .highlight .c1,
    .highlight .sd, .highlight .si { font-style: normal; }

    .doc { background: none; }
    #demo-warning {
        border: 3px dashed #c00;
        padding: 10px;
        margin-bottom: 30px;
    }
    #demo-warning h4 { font-size: 1.7em;font-weight: bold; }
    #demo-warning p { margin-bottom: 0; }
</style>

<!-- Global Site Tag (gtag.js) - Google Analytics -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-107764519-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-107764519-1');
</script>

<!-- Facebook Pixel Code -->
<script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
        n.callMethod.apply(n,arguments):n.queue.push(arguments)};
        if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
        n.queue=[];t=b.createElement(e);t.async=!0;
        t.src=v;s=b.getElementsByTagName(e)[0];
        s.parentNode.insertBefore(t,s)}(window, document,'script',
        'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '250281335689441');
    fbq('track', 'PageView');
</script>
<img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=250281335689441&ev=PageView&noscript=1">
<!-- End Facebook Pixel Code -->

<script type="text/javascript">!function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="https://vk.com/js/api/openapi.js?159",t.onload=function(){VK.Retargeting.Init("VK-RTRG-279161-8p6Jv"),VK.Retargeting.Hit()},document.head.appendChild(t)}();</script><img src="https://vk.com/rtrg?p=VK-RTRG-279161-8p6Jv" style="position:fixed; left:-999px;" alt="">


  </head>
  <body role="document">

<body class="validation-r doc_article doc">

<header>
    <section class="header__top">
        <div class="container">
            <div class="header__logo">
                <a href="..\..\index.html">
                    <img src="..\..\_images\header-logo.svg" alt="Symfony.com.ua logo">
                </a>
            </div>
            <div class="header__support hidden-xs">
                <a href="http://playtini.ua/" title="Компания Playtini">
                    <img height="69" src="..\..\_images\support.png" alt="Symfony is a SensioLabs product">
                </a>
            </div>
        </div>
    </section>
</header>

<div class="container"><div id="page-content">
    <div class="row">
        <div id="sidebar" class="col-sm-3">
            <div id="sidebar-content"><div class="submenu">
    
    
    <ul class="list_submenu list-unstyled">
    
        <li class="first">
            <a href="index.html">Главная</a>
        </li>
    
        <li>
            <a href="components\index.html">Компоненты</a>
        </li>
    
        <li>
            <a href="best_practices\index.html">Лучшие практики</a>
        </li>
    
        <li>
            <a href="quick_tour\index.html">Быстрый старт</a>
        </li>
    
        <li>
            <a href="reference\index.html">Справочник</a>
        </li>
    
        <li>
            <a href="genindex.html">Индекс</a>
        </li>
    
        <li>
            <a href="contributing\index.html">Участие</a>
        </li>
    
    </ul>
</div>

                <div class="toc"> 
    <h4>Содержание</h4>
    <div class="toc-content">
        <ul>
<li><a class="reference internal" href="#">Валидация</a><ul>
<li><a class="reference internal" href="#index-1">Основы валидации</a><ul>
<li><a class="reference internal" href="#validator">Использование сервиса <tt class="docutils literal"><code>validator</code></tt></a></li>
</ul>
</li>
<li><a class="reference internal" href="#index-3">Конфигурация</a></li>
<li><a class="reference internal" href="#validation-constraints-ru">Ограничения</a><ul>
<li><a class="reference internal" href="#id5">Поддерживаемые ограничения</a></li>
<li><a class="reference internal" href="#basic-constraints">Basic Constraints</a></li>
<li><a class="reference internal" href="#string-constraints">String Constraints</a></li>
<li><a class="reference internal" href="#number-constraints">Number Constraints</a></li>
<li><a class="reference internal" href="#comparison-constraints">Comparison Constraints</a></li>
<li><a class="reference internal" href="#date-constraints">Date Constraints</a></li>
<li><a class="reference internal" href="#collection-constraints">Collection Constraints</a></li>
<li><a class="reference internal" href="#file-constraints">File Constraints</a></li>
<li><a class="reference internal" href="#financial-and-other-number-constraints">Financial and other Number Constraints</a></li>
<li><a class="reference internal" href="#other-constraints">Other Constraints</a></li>
<li><a class="reference internal" href="#validation-constraint-configuration-ru">Конфигурация ограничений</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id7">Ограничения в классах формы</a></li>
<li><a class="reference internal" href="#validator-constraint-targets-ru">Цели ограничения</a><ul>
<li><a class="reference internal" href="#validation-property-target-ru">Свойства</a></li>
<li><a class="reference internal" href="#index-8">Геттеры</a></li>
<li><a class="reference internal" href="#validation-class-target-ru">Классы</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id12">Заключение</a></li>
<li><a class="reference internal" href="#id13">Узнать больше</a></li>
</ul>
</li>
</ul>

    </div>
</div>
                
            </div>

            <div class="ads m-b-30">
                <h2>Вакансии Playtini</h2>
                <div class="ad m-b-15">
                    <h3>
                        <a href="http://playtini.ua/careers/php-dev">
                            Middle+ PHP Developer/Symfony
                        </a>
                    </h3>
                    <div><b>Playtini</b> активно поддерживает и развивает свои продукты, и профессионализм команды. И на данный момент в поиске специалиста на позицию <b>«Middle+ PHP Developer/Symfony»,</b> который улучшит качество внутренних сервисов компании и увеличит их количество.</div>
                </div>
                <!--
                <div class="ad m-b-15">
                    <h3>
                        <a href="http://playtini.ua/careers/symfony-senior">
                            Senior PHP Developer/Symfony
                        </a>
                    </h3>
                    <div>We are looking for strong, experienced <b>Senior PHP Developer/Symfony.</b> We expect him/her to participate in improving and extending a system built using microservice architecture by means of modern technologies.</div>
                </div>
                -->
                <div class="ad">
                    <h3><a href="http://playtini.ua/careers">
                        Остальные вакансии компании
                        <img src="..\..\_images\logo-playtini.png" alt="Playtini">
                    </a></h3>
                </div>
            </div>
        </div>

        <div id="main" class="col-sm-9">
            <ol class="breadcrumb">
                
                <li><a href="index.html">Документация</a></li>
                
                <li class="active">Валидация</li>
            </ol>

            <div class="page">
                
  <div class="section" id="index-0">
<span id="id1"></span><h1>Валидация<a class="headerlink" href="#index-0" title="Permalink to this headline">¶</a></h1>
<p>Валидация - это очень распространенная задача для web-приложения. Данные,
вводимые в формы, должны быть валидированы (проверены). В то же время, данные
должны быть валидированы до того, как они будут записаны в базу данных или же
будут переданы веб-сервису.</p>
<p>Symfony содержит компонент  <a class="reference external" href="https://github.com/symfony/validator">Validator</a>, который упрощает эту задачу. Этот
компонент основан на документе <a class="reference external" href="http://jcp.org/en/jsr/detail?id=303">JSR303 Bean Validation specification</a>.</p>
<div class="section" id="index-1">
<span id="id2"></span><h2>Основы валидации<a class="headerlink" href="#index-1" title="Permalink to this headline">¶</a></h2>
<p>Самый лучший способ понять валидацию - это увидеть её в действии. Для начала,
предположим, что вы создали обычный PHP-объект, который вам нужно использовать
в вашем приложении:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/AppBundle/Entity/Author.php</span>
<span class="k">namespace</span> <span class="nx">AppBundle\Entity</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Author</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="nv">$name</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
<p>Пока это обычный класс, который служит какой-то цели внутри вашего приложения.
Задача валидации заключается в том, чтобы сообщить вам - являются ли данные
объекта корректными (валидными). Для этого, вам нужно настроить перечень правил
(называемых <a class="reference internal" href="validation.html#validation-constraints"><span>ограничениями</span></a> (constraints)), которым
объект должен соответствовать, чтобы быть валидным. Эти правила могут быть
указаны во многих форматах (YAML, XML, аннотациях, или PHP).</p>
<p>Например, для того, чтобы гарантировать, что свойство <tt class="docutils literal"><code>$name</code></tt> не пустое,
добавьте следующий код:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Annotations</em><div class="literal-block"><div class="highlight-php-annotations"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/AppBundle/Entity/Author.php</span>

<span class="c1">// ...</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Validator\Constraints</span> <span class="k">as</span> <span class="nx">Assert</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Author</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @Assert\NotBlank()</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="nv">$name</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
</li>
<li><em>YAML</em><div class="literal-block"><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># src/AppBundle/Resources/config/validation.yml</span>
<span class="l l-Scalar l-Scalar-Plain">AppBundle\Entity\Author</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">properties</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span>
            <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">NotBlank</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">~</span>
</pre></div>
</td></tr></table></div></div>
</li>
<li><em>XML</em><div class="literal-block"><div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">&lt;!-- src/AppBundle/Resources/config/validation.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;constraint-mapping</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/dic/constraint-mapping&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/dic/constraint-mapping</span>
<span class="s">        http://symfony.com/schema/dic/constraint-mapping/constraint-mapping-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;class</span> <span class="na">name=</span><span class="s">&quot;AppBundle\Entity\Author&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;name&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;constraint</span> <span class="na">name=</span><span class="s">&quot;NotBlank&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/property&gt;</span>
    <span class="nt">&lt;/class&gt;</span>
<span class="nt">&lt;/constraint-mapping&gt;</span>
</pre></div>
</td></tr></table></div></div>
</li>
<li><em>PHP</em><div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/AppBundle/Entity/Author.php</span>

<span class="c1">// ...</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Validator\Mapping\ClassMetadata</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Validator\Constraints\NotBlank</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Author</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="nv">$name</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">loadValidatorMetadata</span><span class="p">(</span><span class="nx">ClassMetadata</span> <span class="nv">$metadata</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$metadata</span><span class="o">-&gt;</span><span class="na">addPropertyConstraint</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">NotBlank</span><span class="p">());</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
</li>
</ul>
</div>
<div class="admonition-wrapper">
<div class="tip"></div><div class="admonition admonition-tip"><p class="first admonition-title">Tip</p>
<p class="last">Защищенные (protected) и приватные (private) свойства тоже могут быть валидированы,
так же, как и геттер-методы (см. <a class="reference internal" href="validation.html#validator-constraint-targets"><span>Цель ограничений</span></a>).</p>
</div></div>
<div class="section" id="validator">
<span id="index-2"></span><h3>Использование сервиса <tt class="docutils literal"><code>validator</code></tt><a class="headerlink" href="#validator" title="Permalink to this headline">¶</a></h3>
<p>Далее, чтобы проверить объект <tt class="docutils literal"><code>Author</code></tt>, используйте метод <tt class="docutils literal"><code>validate()</code></tt> сервиса
<tt class="docutils literal"><code>validator</code></tt> (класс <tt class="docutils literal"><code><a class="reference external" href="http://api.symfony.com/master/Validator Symfony/Component/Validator/Validator.html" title="Validator Symfony\Component\Validator\Validator">Validator</a></code></tt>).
Обязанности у <tt class="docutils literal"><code>validator</code></tt> простые: прочитать ограничения (т.е. правила) для класса,
и определить, соответствуют ли данные из объекта этим ограничениям. Если валидация
проходит с ошибкой, возвращается список ошибок (класс
<tt class="docutils literal"><code><a class="reference external" href="http://api.symfony.com/master/ConstraintViolationList Symfony/Component/Validator/ConstraintViolationList.html" title="ConstraintViolationList Symfony\Component\Validator\ConstraintViolationList">ConstraintViolationList</a></code></tt>).
Давайте рассмотрим этот простой пример изнутри контроллера:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// ...</span>
<span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\Response</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">AppBundle\Entity\Author</span><span class="p">;</span>

<span class="c1">// ...</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">authorAction</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nv">$author</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Author</span><span class="p">();</span>

    <span class="c1">// ... сделать что-то с объектом $author</span>

    <span class="nv">$validator</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;validator&#39;</span><span class="p">);</span>
    <span class="nv">$errors</span> <span class="o">=</span> <span class="nv">$validator</span><span class="o">-&gt;</span><span class="na">validate</span><span class="p">(</span><span class="nv">$author</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="nb">count</span><span class="p">(</span><span class="nv">$errors</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="cm">/*</span>
<span class="cm">         * Uses a __toString method on the $errors variable which is a</span>
<span class="cm">         * ConstraintViolationList object. This gives us a nice string</span>
<span class="cm">         * for debugging.</span>
<span class="cm">         */</span>
        <span class="nv">$errorsString</span> <span class="o">=</span> <span class="p">(</span><span class="nx">string</span><span class="p">)</span> <span class="nv">$errors</span><span class="p">;</span>

        <span class="k">return</span> <span class="k">new</span> <span class="nx">Response</span><span class="p">(</span><span class="nv">$errorsString</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">new</span> <span class="nx">Response</span><span class="p">(</span><span class="s1">&#39;The author is valid! Yes!&#39;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
<p>Если свойство <tt class="docutils literal"><code>$name</code></tt> пустое, вы увидите следующее сообщение об ошибке:</p>
<div class="literal-block"><div class="highlight-text"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span>AppBundle\Entity\Author.name:
    This value should not be blank
</pre></div>
</td></tr></table></div></div>
<p>Если же вы укажете значение для свойства  <tt class="docutils literal"><code>name</code></tt>, появится сообщение об
успешной валидации.</p>
<div class="admonition-wrapper">
<div class="tip"></div><div class="admonition admonition-tip"><p class="first admonition-title">Tip</p>
<p class="last">В большинстве случаев, вы не будете напрямую взаимодействовать с
сервисом <tt class="docutils literal"><code>validator</code></tt> и вам не нужно будет беспокоиться об отображении
ошибок. Зачастую вы будете использовать валидацию косвенно при обработке
данных из отправленных приложению форм. Подробнее об этом написано в
разделе <a class="reference internal" href="forms.html#forms-form-validation"><span>Валидация и формы</span></a>.</p>
</div></div>
<p>Вы также можете передать совокупность ошибок в шаблон:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="nb">count</span><span class="p">(</span><span class="nv">$errors</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">render</span><span class="p">(</span><span class="s1">&#39;author/validation.html.twig&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;errors&#39;</span> <span class="o">=&gt;</span> <span class="nv">$errors</span><span class="p">,</span>
    <span class="p">));</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
<p>Внутри шаблона вы можете отобразить список ошибок так, как вам нужно:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Twig</em><div class="literal-block"><div class="highlight-html+twig"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">{# app/Resources/views/author/validation.html.twig #}</span>
<span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>The author has the following errors<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">error</span> <span class="k">in</span> <span class="nv">errors</span> <span class="cp">%}</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nv">error.message</span> <span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</pre></div>
</td></tr></table></div></div>
</li>
<li><em>PHP</em><div class="literal-block"><div class="highlight-html+php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">&lt;!-- app/Resources/views/author/validation.html.php --&gt;</span>
<span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>The author has the following errors<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="cp">&lt;?php</span> <span class="k">foreach</span> <span class="p">(</span><span class="nv">$errors</span> <span class="k">as</span> <span class="nv">$error</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$error</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">()</span> <span class="cp">?&gt;</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="cp">&lt;?php</span> <span class="k">endforeach</span> <span class="cp">?&gt;</span>
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</pre></div>
</td></tr></table></div></div>
</li>
</ul>
</div>
<div class="admonition-wrapper">
<div class="note"></div><div class="admonition admonition-note"><p class="first admonition-title">Note</p>
<p class="last">Каждая ошибка валидации (называемая «нарушение ограничения» &quot;constraint violation&quot;),
представлена объектом <tt class="docutils literal"><code><a class="reference external" href="http://api.symfony.com/master/aConstraintViolation Symfony/Component/Validator/ConstraintViolation.html" title="aConstraintViolation Symfony\Component\Validator\ConstraintViolation">ConstraintViolation</a></code></tt>.</p>
</div></div>
</div>
</div>
<div class="section" id="index-3">
<span id="id3"></span><h2>Конфигурация<a class="headerlink" href="#index-3" title="Permalink to this headline">¶</a></h2>
<p>Перед тем, как использовать валидатор Symfony, убедитесь в том, что он активирован
в глафном файле конфигурации:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="literal-block"><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># app/config/config.yml</span>
<span class="l l-Scalar l-Scalar-Plain">framework</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">validation</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span> <span class="nv">enabled</span><span class="p p-Indicator">:</span> <span class="nv">true</span> <span class="p p-Indicator">}</span>
</pre></div>
</td></tr></table></div></div>
</li>
<li><em>XML</em><div class="literal-block"><div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">&lt;!-- app/config/config.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;container</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/dic/services&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xmlns:framework=</span><span class="s">&quot;http://symfony.com/schema/dic/symfony&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/dic/services</span>
<span class="s">        http://symfony.com/schema/dic/services/services-1.0.xsd</span>
<span class="s">        http://symfony.com/schema/dic/symfony http://symfony.com/schema/dic/symfony/symfony-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;framework:config&gt;</span>
        <span class="nt">&lt;framework:validation</span> <span class="na">enabled=</span><span class="s">&quot;true&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/framework:config&gt;</span>
<span class="nt">&lt;/container&gt;</span>
</pre></div>
</td></tr></table></div></div>
</li>
<li><em>PHP</em><div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// app/config/config.php</span>
<span class="nv">$container</span><span class="o">-&gt;</span><span class="na">loadFromExtension</span><span class="p">(</span><span class="s1">&#39;framework&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;validation&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;enabled&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
    <span class="p">),</span>
<span class="p">));</span>
</pre></div>
</td></tr></table></div></div>
</li>
</ul>
</div>
<p>Кроме того, если вы планируете использовать аннотации для конфигруации валидации,
замените предыдущую конфигурацию следующим:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="literal-block"><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># app/config/config.yml</span>
<span class="l l-Scalar l-Scalar-Plain">framework</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">validation</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span> <span class="nv">enable_annotations</span><span class="p p-Indicator">:</span> <span class="nv">true</span> <span class="p p-Indicator">}</span>
</pre></div>
</td></tr></table></div></div>
</li>
<li><em>XML</em><div class="literal-block"><div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">&lt;!-- app/config/config.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;container</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/dic/services&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xmlns:framework=</span><span class="s">&quot;http://symfony.com/schema/dic/symfony&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/dic/services</span>
<span class="s">        http://symfony.com/schema/dic/services/services-1.0.xsd</span>
<span class="s">        http://symfony.com/schema/dic/symfony http://symfony.com/schema/dic/symfony/symfony-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;framework:config&gt;</span>
        <span class="nt">&lt;framework:validation</span> <span class="na">enable-annotations=</span><span class="s">&quot;true&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/framework:config&gt;</span>
<span class="nt">&lt;/container&gt;</span>
</pre></div>
</td></tr></table></div></div>
</li>
<li><em>PHP</em><div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// app/config/config.php</span>
<span class="nv">$container</span><span class="o">-&gt;</span><span class="na">loadFromExtension</span><span class="p">(</span><span class="s1">&#39;framework&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;validation&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;enable_annotations&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
    <span class="p">),</span>
<span class="p">));</span>
</pre></div>
</td></tr></table></div></div>
</li>
</ul>
</div>
</div>
<div class="section" id="validation-constraints-ru">
<span id="index-4"></span><span id="id4"></span><h2>Ограничения<a class="headerlink" href="#validation-constraints-ru" title="Permalink to this headline">¶</a></h2>
<p><tt class="docutils literal"><code>Validator</code></tt> создан для того, чтобы проверять объекты на соответствие <em>ограничениям</em>
(т.е. правилам). Для того чтобы валидировать объект, просто укажите для его класса
одно или несколько ограничений, и передайте его сервису валидации (<tt class="docutils literal"><code>validator</code></tt>).</p>
<p>По сути, ограничение - это просто PHP-объект, который выполняет проверочное выражение.
В настоящей жизни, ограничение может выглядеть так: &quot;пирог не должен подгореть&quot;. В
Symfony ограничения выглядят похожим образом: это утверждения, что некоторое условие
истинно. Учитывая значение, ограничение скажет вам, соответствует ли это значение
правилам ограничения.</p>
<div class="section" id="id5">
<h3>Поддерживаемые ограничения<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<p>Symfony содержит большое количество самых необходимых ограничений:</p>
</div>
<div class="section" id="basic-constraints">
<h3>Basic Constraints<a class="headerlink" href="#basic-constraints" title="Permalink to this headline">¶</a></h3>
<p>These are the basic constraints: use them to assert very basic things about
the value of properties or the return value of methods on your object.</p>
<ul class="simple">
<li><a class="reference internal" href="reference\constraints\NotBlank.html"><em>NotBlank</em></a></li>
<li><a class="reference internal" href="reference\constraints\Blank.html"><em>Blank</em></a></li>
<li><a class="reference internal" href="reference\constraints\NotNull.html"><em>NotNull</em></a></li>
<li><a class="reference internal" href="reference\constraints\IsNull.html"><em>IsNull</em></a></li>
<li><a class="reference internal" href="reference\constraints\IsTrue.html"><em>IsTrue</em></a></li>
<li><a class="reference internal" href="reference\constraints\IsFalse.html"><em>IsFalse</em></a></li>
<li><a class="reference internal" href="reference\constraints\Type.html"><em>Type</em></a></li>
</ul>
</div>
<div class="section" id="string-constraints">
<h3>String Constraints<a class="headerlink" href="#string-constraints" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="reference\constraints\Email.html"><em>Email</em></a></li>
<li><a class="reference internal" href="reference\constraints\Length.html"><em>Length</em></a></li>
<li><a class="reference internal" href="reference\constraints\Url.html"><em>Url</em></a></li>
<li><a class="reference internal" href="reference\constraints\Regex.html"><em>Regex</em></a></li>
<li><a class="reference internal" href="reference\constraints\Ip.html"><em>Ip</em></a></li>
<li><a class="reference internal" href="reference\constraints\Uuid.html"><em>Uuid</em></a></li>
</ul>
</div>
<div class="section" id="number-constraints">
<h3>Number Constraints<a class="headerlink" href="#number-constraints" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="reference\constraints\Range.html"><em>Range</em></a></li>
</ul>
</div>
<div class="section" id="comparison-constraints">
<h3>Comparison Constraints<a class="headerlink" href="#comparison-constraints" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="reference\constraints\EqualTo.html"><em>EqualTo</em></a></li>
<li><a class="reference internal" href="reference\constraints\NotEqualTo.html"><em>NotEqualTo</em></a></li>
<li><a class="reference internal" href="reference\constraints\IdenticalTo.html"><em>IdenticalTo</em></a></li>
<li><a class="reference internal" href="reference\constraints\NotIdenticalTo.html"><em>NotIdenticalTo</em></a></li>
<li><a class="reference internal" href="reference\constraints\LessThan.html"><em>LessThan</em></a></li>
<li><a class="reference internal" href="reference\constraints\LessThanOrEqual.html"><em>LessThanOrEqual</em></a></li>
<li><a class="reference internal" href="reference\constraints\GreaterThan.html"><em>GreaterThan</em></a></li>
<li><a class="reference internal" href="reference\constraints\GreaterThanOrEqual.html"><em>GreaterThanOrEqual</em></a></li>
</ul>
</div>
<div class="section" id="date-constraints">
<h3>Date Constraints<a class="headerlink" href="#date-constraints" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="reference\constraints\Date.html"><em>Date</em></a></li>
<li><a class="reference internal" href="reference\constraints\DateTime.html"><em>DateTime</em></a></li>
<li><a class="reference internal" href="reference\constraints\Time.html"><em>Time</em></a></li>
</ul>
</div>
<div class="section" id="collection-constraints">
<h3>Collection Constraints<a class="headerlink" href="#collection-constraints" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="reference\constraints\Choice.html"><em>Choice</em></a></li>
<li><a class="reference internal" href="reference\constraints\Collection.html"><em>Collection</em></a></li>
<li><a class="reference internal" href="reference\constraints\Count.html"><em>Count</em></a></li>
<li><a class="reference internal" href="reference\constraints\UniqueEntity.html"><em>UniqueEntity</em></a></li>
<li><a class="reference internal" href="reference\constraints\Language.html"><em>Language</em></a></li>
<li><a class="reference internal" href="reference\constraints\Locale.html"><em>Locale</em></a></li>
<li><a class="reference internal" href="reference\constraints\Country.html"><em>Country</em></a></li>
</ul>
</div>
<div class="section" id="file-constraints">
<h3>File Constraints<a class="headerlink" href="#file-constraints" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="reference\constraints\File.html"><em>File</em></a></li>
<li><a class="reference internal" href="reference\constraints\Image.html"><em>Image</em></a></li>
</ul>
</div>
<div class="section" id="financial-and-other-number-constraints">
<h3>Financial and other Number Constraints<a class="headerlink" href="#financial-and-other-number-constraints" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="reference\constraints\Bic.html"><em>Bic</em></a></li>
<li><a class="reference internal" href="reference\constraints\CardScheme.html"><em>CardScheme</em></a></li>
<li><a class="reference internal" href="reference\constraints\Currency.html"><em>Currency</em></a></li>
<li><a class="reference internal" href="reference\constraints\Luhn.html"><em>Luhn</em></a></li>
<li><a class="reference internal" href="reference\constraints\Iban.html"><em>Iban</em></a></li>
<li><a class="reference internal" href="reference\constraints\Isbn.html"><em>Isbn</em></a></li>
<li><a class="reference internal" href="reference\constraints\Issn.html"><em>Issn</em></a></li>
</ul>
</div>
<div class="section" id="other-constraints">
<h3>Other Constraints<a class="headerlink" href="#other-constraints" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="reference\constraints\Callback.html"><em>Callback</em></a></li>
<li><a class="reference internal" href="reference\constraints\Expression.html"><em>Expression</em></a></li>
<li><a class="reference internal" href="reference\constraints\All.html"><em>All</em></a></li>
<li><a class="reference internal" href="reference\constraints\UserPassword.html"><em>UserPassword</em></a></li>
<li><a class="reference internal" href="reference\constraints\Valid.html"><em>Valid</em></a></li>
</ul>
<p>Вы также можете создавать свои собственные ограничения. Эта тема раскрыта в
статье <a class="reference internal" href="validation\custom_constraint.html"><em>Индивидуальные ограничения</em></a></p>
</div>
<div class="section" id="validation-constraint-configuration-ru">
<span id="index-5"></span><span id="id6"></span><h3>Конфигурация ограничений<a class="headerlink" href="#validation-constraint-configuration-ru" title="Permalink to this headline">¶</a></h3>
<p>Некоторые ограничения, как например <a class="reference internal" href="reference\constraints\NotBlank.html"><em>NotBlank</em></a> просты,
в то время как другие, например Choice - имеют несколько опций конфигурации. Предположим,
что класс <tt class="docutils literal"><code>Author</code></tt> имеет свойство  <tt class="docutils literal"><code>genre</code></tt> (жанр), которое определяет жанр литератры,
который в основном ассоциируется с автором, и которое можно установить в значение &quot;беллетристика&quot;
или &quot;не беллетристика&quot; (&quot;fiction&quot; или &quot;non-fiction&quot;):</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Annotations</em><div class="literal-block"><div class="highlight-php-annotations"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/AppBundle/Entity/Author.php</span>

<span class="c1">// ...</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Validator\Constraints</span> <span class="k">as</span> <span class="nx">Assert</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Author</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @Assert\Choice(</span>
<span class="sd">     *     choices = { &quot;fiction&quot;, &quot;non-fiction&quot; },</span>
<span class="sd">     *     message = &quot;Choose a valid genre.&quot;</span>
<span class="sd">     * )</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="nv">$genre</span><span class="p">;</span>

    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
</li>
<li><em>YAML</em><div class="literal-block"><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># src/AppBundle/Resources/config/validation.yml</span>
<span class="l l-Scalar l-Scalar-Plain">AppBundle\Entity\Author</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">properties</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">genre</span><span class="p p-Indicator">:</span>
            <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">Choice</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span> <span class="nv">choices</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">[</span><span class="nv">fiction</span><span class="p p-Indicator">,</span> <span class="nv">non-fiction</span><span class="p p-Indicator">],</span> <span class="nv">message</span><span class="p p-Indicator">:</span> <span class="nv">Choose a valid genre.</span> <span class="p p-Indicator">}</span>
        <span class="c1"># ...</span>
</pre></div>
</td></tr></table></div></div>
</li>
<li><em>XML</em><div class="literal-block"><div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">&lt;!-- src/AppBundle/Resources/config/validation.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;constraint-mapping</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/dic/constraint-mapping&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/dic/constraint-mapping</span>
<span class="s">        http://symfony.com/schema/dic/constraint-mapping/constraint-mapping-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;class</span> <span class="na">name=</span><span class="s">&quot;AppBundle\Entity\Author&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;genre&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;constraint</span> <span class="na">name=</span><span class="s">&quot;Choice&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;option</span> <span class="na">name=</span><span class="s">&quot;choices&quot;</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;value&gt;</span>fiction<span class="nt">&lt;/value&gt;</span>
                    <span class="nt">&lt;value&gt;</span>non-fiction<span class="nt">&lt;/value&gt;</span>
                <span class="nt">&lt;/option&gt;</span>
                <span class="nt">&lt;option</span> <span class="na">name=</span><span class="s">&quot;message&quot;</span><span class="nt">&gt;</span>Choose a valid genre.<span class="nt">&lt;/option&gt;</span>
            <span class="nt">&lt;/constraint&gt;</span>
        <span class="nt">&lt;/property&gt;</span>

        <span class="c">&lt;!-- ... --&gt;</span>
    <span class="nt">&lt;/class&gt;</span>
<span class="nt">&lt;/constraint-mapping&gt;</span>
</pre></div>
</td></tr></table></div></div>
</li>
<li><em>PHP</em><div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/AppBundle/Entity/Author.php</span>

<span class="c1">// ...</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Validator\Mapping\ClassMetadata</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Validator\Constraints</span> <span class="k">as</span> <span class="nx">Assert</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Author</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="nv">$genre</span><span class="p">;</span>

    <span class="c1">// ...</span>

    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">loadValidatorMetadata</span><span class="p">(</span><span class="nx">ClassMetadata</span> <span class="nv">$metadata</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>

        <span class="nv">$metadata</span><span class="o">-&gt;</span><span class="na">addPropertyConstraint</span><span class="p">(</span><span class="s1">&#39;genre&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">Assert\Choice</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;choices&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;fiction&#39;</span><span class="p">,</span> <span class="s1">&#39;non-fiction&#39;</span><span class="p">),</span>
            <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Choose a valid genre.&#39;</span><span class="p">,</span>
        <span class="p">)));</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
</li>
</ul>
</div>
<p id="validation-default-option-ru">Опции ограничения всегда могут быть переданы в виде массива. Однако, некоторые
ограничения также позволяют вам передать значение одной опции <em>«по умолчанию»</em>
вместо массива. В случае с ограничением <tt class="docutils literal"><code>Choice</code></tt>, опции <tt class="docutils literal"><code>choices</code></tt> можно
указать таким образом.</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Annotations</em><div class="literal-block"><div class="highlight-php-annotations"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/AppBundle/Entity/Author.php</span>

<span class="c1">// ...</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Validator\Constraints</span> <span class="k">as</span> <span class="nx">Assert</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Author</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @Assert\Choice({&quot;fiction&quot;, &quot;non-fiction&quot;})</span>
<span class="sd">     */</span>
    <span class="k">protected</span> <span class="nv">$genre</span><span class="p">;</span>

    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
</li>
<li><em>YAML</em><div class="literal-block"><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># src/AppBundle/Resources/config/validation.yml</span>
<span class="l l-Scalar l-Scalar-Plain">AppBundle\Entity\Author</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">properties</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">genre</span><span class="p p-Indicator">:</span>
            <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">Choice</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">[</span><span class="nv">fiction</span><span class="p p-Indicator">,</span> <span class="nv">non-fiction</span><span class="p p-Indicator">]</span>
        <span class="c1"># ...</span>
</pre></div>
</td></tr></table></div></div>
</li>
<li><em>XML</em><div class="literal-block"><div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">&lt;!-- src/AppBundle/Resources/config/validation.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;constraint-mapping</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/dic/constraint-mapping&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/dic/constraint-mapping</span>
<span class="s">        http://symfony.com/schema/dic/constraint-mapping/constraint-mapping-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;class</span> <span class="na">name=</span><span class="s">&quot;AppBundle\Entity\Author&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;genre&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;constraint</span> <span class="na">name=</span><span class="s">&quot;Choice&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;value&gt;</span>fiction<span class="nt">&lt;/value&gt;</span>
                <span class="nt">&lt;value&gt;</span>non-fiction<span class="nt">&lt;/value&gt;</span>
            <span class="nt">&lt;/constraint&gt;</span>
        <span class="nt">&lt;/property&gt;</span>

        <span class="c">&lt;!-- ... --&gt;</span>
    <span class="nt">&lt;/class&gt;</span>
<span class="nt">&lt;/constraint-mapping&gt;</span>
</pre></div>
</td></tr></table></div></div>
</li>
<li><em>PHP</em><div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/AppBundle/Entity/Author.php</span>

<span class="c1">// ...</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Validator\Mapping\ClassMetadata</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Validator\Constraints</span> <span class="k">as</span> <span class="nx">Assert</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Author</span>
<span class="p">{</span>
    <span class="k">protected</span> <span class="nv">$genre</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">loadValidatorMetadata</span><span class="p">(</span><span class="nx">ClassMetadata</span> <span class="nv">$metadata</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>

        <span class="nv">$metadata</span><span class="o">-&gt;</span><span class="na">addPropertyConstraint</span><span class="p">(</span>
            <span class="s1">&#39;genre&#39;</span><span class="p">,</span>
            <span class="k">new</span> <span class="nx">Assert\Choice</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;fiction&#39;</span><span class="p">,</span> <span class="s1">&#39;non-fiction&#39;</span><span class="p">))</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
</li>
</ul>
</div>
<p>Такая возможность позволяет сделать настройку самых распространенных опций
ограничения короче и быстрее.</p>
<p>Если вы не уверены, как нужно указывать опцию, сверьтесь с документацией API для
ограничения или же поступайте безопасно - всегда передавая массив опций (как
показано в первом примере выше).</p>
</div>
</div>
<div class="section" id="id7">
<h2>Ограничения в классах формы<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h2>
<p>Ограничения могут быть обозначены во время построения форм с помощью опции
<tt class="docutils literal"><code>constraints</code></tt> полей формы:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">function</span> <span class="nf">buildForm</span><span class="p">(</span><span class="nx">FormBuilderInterface</span> <span class="nv">$builder</span><span class="p">,</span> <span class="k">array</span> <span class="nv">$options</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nv">$builder</span>
        <span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;myField&#39;</span><span class="p">,</span> <span class="nx">TextType</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;required&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
            <span class="s1">&#39;constraints&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="k">new</span> <span class="nx">Length</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;min&#39;</span> <span class="o">=&gt;</span> <span class="mi">3</span><span class="p">)))</span>
        <span class="p">))</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
<p>Опция <tt class="docutils literal"><code>constraints</code></tt> доступна только в случае, если <tt class="docutils literal"><code>ValidatorExtension</code></tt>
была активирована в постройщике формы:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nx">Forms</span><span class="o">::</span><span class="na">createFormFactoryBuilder</span><span class="p">()</span>
    <span class="o">-&gt;</span><span class="na">addExtension</span><span class="p">(</span><span class="k">new</span> <span class="nx">ValidatorExtension</span><span class="p">(</span><span class="nx">Validation</span><span class="o">::</span><span class="na">createValidator</span><span class="p">()))</span>
    <span class="o">-&gt;</span><span class="na">getFormFactory</span><span class="p">()</span>
<span class="p">;</span>
</pre></div>
</td></tr></table></div></div>
</div>
<div class="section" id="validator-constraint-targets-ru">
<span id="index-6"></span><span id="id8"></span><h2>Цели ограничения<a class="headerlink" href="#validator-constraint-targets-ru" title="Permalink to this headline">¶</a></h2>
<p>Ограничения могут быть применены к свойству класса (например, <tt class="docutils literal"><code>name</code></tt>),
публичному геттер-методу (например, <tt class="docutils literal"><code>getFullName()</code></tt>) или целому классу.
Первый вариант наиболее распространенный и легкий. Однако ограничения геттера
позволяют вам указывать более сложные правила валидации. И, наконец, ограничения
класса предназначены для случаев, когда вы хотите валидировать класс в качестве
единого целого.</p>
<div class="section" id="validation-property-target-ru">
<span id="index-7"></span><span id="id9"></span><h3>Свойства<a class="headerlink" href="#validation-property-target-ru" title="Permalink to this headline">¶</a></h3>
<p>Валидация свойств класса - самая простая техника валидации. Symfony позволяет
вам проверять приватные, защищенные или публичные свойства. Ниже вы увидите,
как сделать так, чтобы свойство <tt class="docutils literal"><code>$firstName</code></tt> класса <tt class="docutils literal"><code>Author</code></tt> имело как минимум
3 символа.</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Annotations</em><div class="literal-block"><div class="highlight-php-annotations"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/AppBundle/Entity/Author.php</span>

<span class="c1">// ...</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Validator\Constraints</span> <span class="k">as</span> <span class="nx">Assert</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Author</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @Assert\NotBlank()</span>
<span class="sd">     * @Assert\Length(min=3)</span>
<span class="sd">     */</span>
    <span class="k">private</span> <span class="nv">$firstName</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
</li>
<li><em>YAML</em><div class="literal-block"><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># src/AppBundle/Resources/config/validation.yml</span>
<span class="l l-Scalar l-Scalar-Plain">AppBundle\Entity\Author</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">properties</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">firstName</span><span class="p p-Indicator">:</span>
            <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">NotBlank</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">~</span>
            <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">Length</span><span class="p p-Indicator">:</span>
                <span class="l l-Scalar l-Scalar-Plain">min</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">3</span>
</pre></div>
</td></tr></table></div></div>
</li>
<li><em>XML</em><div class="literal-block"><div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">&lt;!-- src/AppBundle/Resources/config/validation.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;constraint-mapping</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/dic/constraint-mapping&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/dic/constraint-mapping</span>
<span class="s">        http://symfony.com/schema/dic/constraint-mapping/constraint-mapping-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;class</span> <span class="na">name=</span><span class="s">&quot;AppBundle\Entity\Author&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;firstName&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;constraint</span> <span class="na">name=</span><span class="s">&quot;NotBlank&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;constraint</span> <span class="na">name=</span><span class="s">&quot;Length&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;option</span> <span class="na">name=</span><span class="s">&quot;min&quot;</span><span class="nt">&gt;</span>3<span class="nt">&lt;/option&gt;</span>
            <span class="nt">&lt;/constraint&gt;</span>
        <span class="nt">&lt;/property&gt;</span>
    <span class="nt">&lt;/class&gt;</span>
<span class="nt">&lt;/constraint-mapping&gt;</span>
</pre></div>
</td></tr></table></div></div>
</li>
<li><em>PHP</em><div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/AppBundle/Entity/Author.php</span>

<span class="c1">// ...</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Validator\Mapping\ClassMetadata</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Validator\Constraints</span> <span class="k">as</span> <span class="nx">Assert</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Author</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="nv">$firstName</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">loadValidatorMetadata</span><span class="p">(</span><span class="nx">ClassMetadata</span> <span class="nv">$metadata</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$metadata</span><span class="o">-&gt;</span><span class="na">addPropertyConstraint</span><span class="p">(</span><span class="s1">&#39;firstName&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">Assert\NotBlank</span><span class="p">());</span>
        <span class="nv">$metadata</span><span class="o">-&gt;</span><span class="na">addPropertyConstraint</span><span class="p">(</span>
            <span class="s1">&#39;firstName&#39;</span><span class="p">,</span>
            <span class="k">new</span> <span class="nx">Assert\Length</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s2">&quot;min&quot;</span> <span class="o">=&gt;</span> <span class="mi">3</span><span class="p">))</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
</li>
</ul>
</div>
</div>
<div class="section" id="index-8">
<span id="id10"></span><h3>Геттеры<a class="headerlink" href="#index-8" title="Permalink to this headline">¶</a></h3>
<p>Ограничения также могут применяться для того, чтобы вернуть значение метода.
Symfony позволяет вам добавлять ограничение к любому публичному методу, имя
которого начинается с «get», «is» или «has». В этой книге, подобные методы
называются общим словом «геттеры».</p>
<p>Преимуществом этой техники является то, что она позволяет вам валидировать ваш
объект динамично. Например, представьте, что вам нужно убедиться, что поле пароля
не совпадает с именем пользователя (из соображений безопасности). Вы можете
сделать это создав метод <tt class="docutils literal"><code>isPasswordLegal()</code></tt> и указав, что этот метод должен
вернуться как <tt class="docutils literal"><code>true</code></tt>:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Annotations</em><div class="literal-block"><div class="highlight-php-annotations"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/AppBundle/Entity/Author.php</span>

<span class="c1">// ...</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Validator\Constraints</span> <span class="k">as</span> <span class="nx">Assert</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Author</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @Assert\IsTrue(message = &quot;The password cannot match your first name&quot;)</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">isPasswordLegal</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// ... return true or false</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
</li>
<li><em>YAML</em><div class="literal-block"><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># src/AppBundle/Resources/config/validation.yml</span>
<span class="l l-Scalar l-Scalar-Plain">AppBundle\Entity\Author</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">getters</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">passwordLegal</span><span class="p p-Indicator">:</span>
            <span class="p p-Indicator">-</span> <span class="s">&#39;IsTrue&#39;</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span> <span class="nv">message</span><span class="p p-Indicator">:</span> <span class="s">&#39;The</span><span class="nv"> </span><span class="s">password</span><span class="nv"> </span><span class="s">cannot</span><span class="nv"> </span><span class="s">match</span><span class="nv"> </span><span class="s">your</span><span class="nv"> </span><span class="s">first</span><span class="nv"> </span><span class="s">name&#39;</span> <span class="p p-Indicator">}</span>
</pre></div>
</td></tr></table></div></div>
</li>
<li><em>XML</em><div class="literal-block"><div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">&lt;!-- src/AppBundle/Resources/config/validation.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;constraint-mapping</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/dic/constraint-mapping&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/dic/constraint-mapping</span>
<span class="s">        http://symfony.com/schema/dic/constraint-mapping/constraint-mapping-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;class</span> <span class="na">name=</span><span class="s">&quot;AppBundle\Entity\Author&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;getter</span> <span class="na">property=</span><span class="s">&quot;passwordLegal&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;constraint</span> <span class="na">name=</span><span class="s">&quot;IsTrue&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;option</span> <span class="na">name=</span><span class="s">&quot;message&quot;</span><span class="nt">&gt;</span>The password cannot match your first name<span class="nt">&lt;/option&gt;</span>
            <span class="nt">&lt;/constraint&gt;</span>
        <span class="nt">&lt;/getter&gt;</span>
    <span class="nt">&lt;/class&gt;</span>
<span class="nt">&lt;/constraint-mapping&gt;</span>
</pre></div>
</td></tr></table></div></div>
</li>
<li><em>PHP</em><div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/AppBundle/Entity/Author.php</span>

<span class="c1">// ...</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Validator\Mapping\ClassMetadata</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Validator\Constraints</span> <span class="k">as</span> <span class="nx">Assert</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Author</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">loadValidatorMetadata</span><span class="p">(</span><span class="nx">ClassMetadata</span> <span class="nv">$metadata</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$metadata</span><span class="o">-&gt;</span><span class="na">addGetterConstraint</span><span class="p">(</span><span class="s1">&#39;passwordLegal&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">Assert\IsTrue</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;The password cannot match your first name&#39;</span><span class="p">,</span>
        <span class="p">)));</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
</li>
</ul>
</div>
<p>Теперь создайте метод <tt class="docutils literal"><code>isPasswordLegal()</code></tt> и добавьте его в нужную вам логику:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">function</span> <span class="nf">isPasswordLegal</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">firstName</span> <span class="o">!==</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">password</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
<div class="admonition-wrapper">
<div class="note"></div><div class="admonition admonition-note"><p class="first admonition-title">Note</p>
<p class="last">Самые внимательные из вас заметили, что префикс геттера («get», «is» или «has»)
опущен при отображении. Это позволит вам применить ограничение к свойству с
таким же именем позже ( или наоборот), не изменяя логики валидации.</p>
</div></div>
</div>
<div class="section" id="validation-class-target-ru">
<span id="id11"></span><h3>Классы<a class="headerlink" href="#validation-class-target-ru" title="Permalink to this headline">¶</a></h3>
<p>Некоторые ограничения применяются к целому валидируемому классу. Например
ограничение  <a class="reference internal" href="reference\constraints\Callback.html"><em>Callback</em></a> (возвратный вызов)
- это универсальное ограничение, которое применяется к самому классу. Когда этот
класс валидируется, методы, указанные ограничением, просто выполняются, что
позволяет проводить более избирательную валидацию.</p>
</div>
</div>
<div class="section" id="id12">
<h2>Заключение<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h2>
<p><tt class="docutils literal"><code>Validator</code></tt> Symfony - это мощный инструмент, который используется для получения
гарантий, что данные некоторого объекта &quot;валидные&quot;. Сила валидации - в ограничениях,
которые являются правилами, которые вы можете применить к свойствам или геттер-методам
вашего объекта. И несмотря на то, что вы большей частью будете использовать фреймворк
валидации косвенно при использовании форм, помните, что он может быть использован
где угодно для валидации любого объекта.</p>
</div>
<div class="section" id="id13">
<h2>Узнать больше<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="validation\custom_constraint.html">How to Create a custom Validation Constraint</a></li>
<li class="toctree-l1"><a class="reference internal" href="validation/custom_constraint-ru.html">Как создать пользовательское ограничение валидации</a></li>
<li class="toctree-l1"><a class="reference internal" href="validation\groups.html">How to Apply only a Subset of all Your Validation Constraints (Validation Groups)</a></li>
<li class="toctree-l1"><a class="reference internal" href="validation/groups-ru.html">Как применить только подмножество всех ваших ограничений валидации (группы валидации)</a></li>
<li class="toctree-l1"><a class="reference internal" href="validation\raw_values.html">How to Validate Raw Values (Scalar Values and Arrays)</a></li>
<li class="toctree-l1"><a class="reference internal" href="validation/raw_values-ru.html">Как валидировать необработанные значения (скалярные значения и массивы)</a></li>
<li class="toctree-l1"><a class="reference internal" href="validation\sequence_provider.html">How to Sequentially Apply Validation Groups</a></li>
<li class="toctree-l1"><a class="reference internal" href="validation/sequence_provider-ru.html">Как применять группы валидации последовательно</a></li>
<li class="toctree-l1"><a class="reference internal" href="validation\severity.html">How to Handle Different Error Levels</a></li>
<li class="toctree-l1"><a class="reference internal" href="validation/severity-ru.html">Как справляться с разными уровнями ошибок</a></li>
<li class="toctree-l1"><a class="reference internal" href="validation\translations.html">How to Translate Validation Constraint Messages</a></li>
<li class="toctree-l1"><a class="reference internal" href="validation/translations-ru.html">Как переводить сообщения ограничений валидации</a></li>
</ul>
</div>
</div>
</div>


            </div>

            

            <div id="license">
                <p>Эта документация является переводом <a href="http://symfony.com/doc/current/index.html">официальной документации Symfony</a> и предоставляется по свободной лицензии <a rel="license nofollow" href="https://creativecommons.org/licenses/by-sa/3.0/deed.ru">CC BY-SA 3.0</a>.</p>
            </div>
        </div>
    </div>
</div></div>


  </body>
</body></html>