<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    
    <title>Обновление стороннего пакета для старшей версии Symfony &mdash; Symfony Framework Documentation  documentation</title>
    
    <link rel="stylesheet" href="../_static/" type="text/css">
    <link rel="stylesheet" href="..\_static\pygments.css" type="text/css">
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <link rel="top" title="Symfony Framework Documentation  documentation" href="..\index.html">
    <link rel="up" title="Installing &amp; Setting up the Symfony Framework" href="..\setup.html">
    <link rel="next" title="Установка Composer" href="composer-ru.html">
    <link rel="prev" title="Upgrading a Third-Party Bundle for a Major Symfony Version" href="bundles.html">

<link rel="stylesheet" href="..\_assets\app.css?v=8d6d457a0820d7c245bddae16bfd4c75">
<script src="..\_assets\manifest.js?v=d41d8cd98f00b204e980"></script>
<script src="..\_assets\app.js?v=900984040c7cb4dca514"></script>
<style>
    .header__top .container {
        overflow: hidden;
        padding-top: 10px;
        padding-bottom: 10px;
    }
    .header__top .header__logo {
        float: left;
    }
    .header__top .header__support {
        float: right;
    }

    .highlight .k, .highlight .gh, .highlight .gp,
    .highlight .gu, .highlight .kc, .highlight .kd,
    .highlight .kn, .highlight .kr, .highlight .nc,
    .highlight .nd, .highlight .ni, .highlight .nl,
    .highlight .nn, .highlight .nt, .highlight .ow,
    .highlight .se { font-weight: normal; }

    .highlight .c, .highlight .cm, .highlight .c1,
    .highlight .sd, .highlight .si { font-style: normal; }

    .doc { background: none; }
    #demo-warning {
        border: 3px dashed #c00;
        padding: 10px;
        margin-bottom: 30px;
    }
    #demo-warning h4 { font-size: 1.7em;font-weight: bold; }
    #demo-warning p { margin-bottom: 0; }
</style>

<!-- Global Site Tag (gtag.js) - Google Analytics -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-107764519-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-107764519-1');
</script>

<!-- Facebook Pixel Code -->
<script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
        n.callMethod.apply(n,arguments):n.queue.push(arguments)};
        if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
        n.queue=[];t=b.createElement(e);t.async=!0;
        t.src=v;s=b.getElementsByTagName(e)[0];
        s.parentNode.insertBefore(t,s)}(window, document,'script',
        'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '250281335689441');
    fbq('track', 'PageView');
</script>
<img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=250281335689441&ev=PageView&noscript=1">
<!-- End Facebook Pixel Code -->

<script type="text/javascript">!function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="https://vk.com/js/api/openapi.js?159",t.onload=function(){VK.Retargeting.Init("VK-RTRG-279161-8p6Jv"),VK.Retargeting.Hit()},document.head.appendChild(t)}();</script><img src="https://vk.com/rtrg?p=VK-RTRG-279161-8p6Jv" style="position:fixed; left:-999px;" alt="">


  </head>
  <body role="document">

<body class="setup doc_article doc">

<header>
    <section class="header__top">
        <div class="container">
            <div class="header__logo">
                <a href="..\..\..\index.html">
                    <img src="..\..\..\_images\header-logo.svg" alt="Symfony.com.ua logo">
                </a>
            </div>
            <div class="header__support hidden-xs">
                <a href="http://playtini.ua/" title="Компания Playtini">
                    <img height="69" src="..\..\..\_images\support.png" alt="Symfony is a SensioLabs product">
                </a>
            </div>
        </div>
    </section>
</header>

<div class="container"><div id="page-content">
    <div class="row">
        <div id="sidebar" class="col-sm-3">
            <div id="sidebar-content"><div class="submenu">
    
    
    <ul class="list_submenu list-unstyled">
    
        <li class="first">
            <a href="..\index.html">Главная</a>
        </li>
    
        <li>
            <a href="..\components\index.html">Компоненты</a>
        </li>
    
        <li>
            <a href="..\best_practices\index.html">Лучшие практики</a>
        </li>
    
        <li>
            <a href="..\quick_tour\index.html">Быстрый старт</a>
        </li>
    
        <li>
            <a href="..\reference\index.html">Справочник</a>
        </li>
    
        <li>
            <a href="..\genindex.html">Индекс</a>
        </li>
    
        <li>
            <a href="..\contributing\index.html">Участие</a>
        </li>
    
    </ul>
</div>

                <div class="toc"> 
    <h4>Содержание</h4>
    <div class="toc-content">
        <ul>
<li><a class="reference internal" href="#">Обновление стороннего пакета для старшей версии Symfony</a><ul>
<li><a class="reference internal" href="#symfony-3">Разрешение на установку компонентов Symfony 3</a></li>
<li><a class="reference internal" href="#id1">Ищите возражения и исправляйте их</a><ul>
<li><a class="reference internal" href="#id2">Полезные ресурсы</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id3">Тестирование вашего пакет в Symfony 3</a><ul>
<li><a class="reference internal" href="#travis-ci">Обновление конфигурации Travis CI</a></li>
</ul>
</li>
<li><a class="reference internal" href="#symfony-2-x-3-x">Обновление вашего кода для поддержки Symfony 2.x и 3.x одновременно</a></li>
</ul>
</li>
</ul>

    </div>
</div>
                
            </div>

            <div class="ads m-b-30">
                <h2>Вакансии Playtini</h2>
                <div class="ad m-b-15">
                    <h3>
                        <a href="http://playtini.ua/careers/php-dev">
                            Middle+ PHP Developer/Symfony
                        </a>
                    </h3>
                    <div><b>Playtini</b> активно поддерживает и развивает свои продукты, и профессионализм команды. И на данный момент в поиске специалиста на позицию <b>«Middle+ PHP Developer/Symfony»,</b> который улучшит качество внутренних сервисов компании и увеличит их количество.</div>
                </div>
                <!--
                <div class="ad m-b-15">
                    <h3>
                        <a href="http://playtini.ua/careers/symfony-senior">
                            Senior PHP Developer/Symfony
                        </a>
                    </h3>
                    <div>We are looking for strong, experienced <b>Senior PHP Developer/Symfony.</b> We expect him/her to participate in improving and extending a system built using microservice architecture by means of modern technologies.</div>
                </div>
                -->
                <div class="ad">
                    <h3><a href="http://playtini.ua/careers">
                        Остальные вакансии компании
                        <img src="..\..\..\_images\logo-playtini.png" alt="Playtini">
                    </a></h3>
                </div>
            </div>
        </div>

        <div id="main" class="col-sm-9">
            <ol class="breadcrumb">
                
                <li><a href="..\index.html">Документация</a></li>
                
                <li><a href="..\getting_started\index.html">Getting Started</a></li>
                
                <li><a href="..\setup.html">Installing &amp; Setting up the Symfony Framework</a></li>
                
                <li class="active">Обновление стороннего пакета для старшей версии Symfony</li>
            </ol>

            <div class="page">
                
  <div class="section" id="symfony">
<span id="index-0"></span><h1>Обновление стороннего пакета для старшей версии Symfony<a class="headerlink" href="#symfony" title="Permalink to this headline">¶</a></h1>
<p>Symfony 3 была выпущена в ноябре 2015 года. Несмотря на то, что эта версия не
содержит никаких новых функций, она удаляет все слои обратной совместимости,
включенные в предыдущей версии 2.8. Если ваш пакет использует любую осуждённую
функцию и он был опубликован в качестве стороннего пакета, приложения, обновляющиеся
до Symfony 3, больше не смогут его использовать.</p>
<div class="section" id="symfony-3">
<h2>Разрешение на установку компонентов Symfony 3<a class="headerlink" href="#symfony-3" title="Permalink to this headline">¶</a></h2>
<p>БОльшинство сторонних пакетов определяют свои зависимости Symfony, используя
ограничения <tt class="docutils literal"><code>~2.N</code></tt> или <tt class="docutils literal"><code>^2.N</code></tt> в файле <tt class="docutils literal"><code>composer.json</code></tt>. Например:</p>
<div class="literal-block"><div class="highlight-json"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;require&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;symfony/framework-bundle&quot;</span><span class="p">:</span> <span class="s2">&quot;~2.7&quot;</span><span class="p">,</span>
        <span class="nt">&quot;symfony/finder&quot;</span><span class="p">:</span> <span class="s2">&quot;~2.7&quot;</span><span class="p">,</span>
        <span class="nt">&quot;symfony/validator&quot;</span><span class="p">:</span> <span class="s2">&quot;~2.7&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
<p>Эти ограничения предотвращают использование пакетом компонентов Symfony 3, так
что становится невозможно установить его в приложение, основанное на Symfony 3.
Эту проблему очень легко решить благодаря гибкости ограничений зависимости Композера
(Composer). Просто замените <tt class="docutils literal"><code>~2.N</code></tt> на <tt class="docutils literal"><code>~2.N|~3.0</code></tt> (или <tt class="docutils literal"><code>^2.N</code></tt> на <tt class="docutils literal"><code>^2.N|~3.0</code></tt>).</p>
<p>Вышеописанные пример можно обновить так, чтобы он работал с Symfony 3
следующим образом:</p>
<div class="literal-block"><div class="highlight-json"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;require&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;symfony/framework-bundle&quot;</span><span class="p">:</span> <span class="s2">&quot;~2.7|~3.0&quot;</span><span class="p">,</span>
        <span class="nt">&quot;symfony/finder&quot;</span><span class="p">:</span> <span class="s2">&quot;~2.7|~3.0&quot;</span><span class="p">,</span>
        <span class="nt">&quot;symfony/validator&quot;</span><span class="p">:</span> <span class="s2">&quot;~2.7|~3.0&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
<div class="admonition-wrapper">
<div class="tip"></div><div class="admonition admonition-tip"><p class="first admonition-title">Tip</p>
<p class="last">Еще одним общим ограничением версий, которое часто бывает в сторонних пакетах,
является <tt class="docutils literal"><code>&gt;=2.N</code></tt>. Вы должны избегать использования этого ограничения, потому
что оно слишком общее (что означает, что ваш пакет совместим с любой последующей
версией Symfony). Используйте вместо этого <tt class="docutils literal"><code>~2.N|~3.0</code></tt> или <tt class="docutils literal"><code>^2.N|~3.0</code></tt>, чтобы
укрепить ваш пакет для будущего.</p>
</div></div>
</div>
<div class="section" id="id1">
<h2>Ищите возражения и исправляйте их<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>Кроме того, чтоб позволить пользователям испгользовать ваш пакет в Symfony 3, ваш пакет
должен перестать использовать любые функции, осуждённые в версии 2.8, потому что в версии
3.0 они были удалены (вы будете получать исключени или PHP-ошибки). Наиболее лёгким способом
определить возражения является установка <a class="reference external" href="https://github.com/symfony/phpunit-bridge">symfony/phpunit-bridge package</a> и последующий
запуск набора тестов.</p>
<p>Для начала, установите компонент в качестве зависимости <tt class="docutils literal"><code>dev</code></tt> вашего пакета:</p>
<div class="literal-block"><div class="highlight-terminal"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">$</span> composer require --dev symfony/phpunit-bridge
</pre></div>
</td></tr></table></div></div>
<p>Потом, запустите ваш набор тестов и ищите перечень возражений, отображённый после
отчета о тестировании PHPUnit:</p>
<div class="literal-block"><div class="highlight-terminal"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">$</span> phpunit

<span class="c1"># ... PHPUnit output</span>

<span class="go">Оставшиеся уведомления о возраженияж (3)</span>

<span class="go">Опция &quot;шаблон&quot; (pattern) в файле ... осуждается с версии 2.2 и будет удалена в версии</span>
<span class="go">3.0. Используйте опцию &quot;путь&quot; (path) в определении маршрута вместо этого ...</span>

<span class="go">Функция Twig &quot;form_enctype&quot; осуждается. Вместо неё используйте &quot;form_start&quot; в ...</span>

<span class="go">Класс Symfony\Component\Security\Core\SecurityContext осуждается с вресии 2.6 и будет</span>
<span class="go">удалён в версии 3.0. Используйте ...</span>
</pre></div>
</td></tr></table></div></div>
<p>Исправьте найденные возражения, запустите набор тестов снова и повторяйте процесс
до тех пор, пока не получите отчёт без возражений.</p>
<div class="section" id="id2">
<h3>Полезные ресурсы<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>Существует несколько ресурсов, которые могут помочь вам найти, понять и исправить
использование осуждённых функций:</p>
<dl class="docutils">
<dt><a class="reference external" href="https://github.com/symfony/symfony/blob/2.8/UPGRADE-3.0.md">Официальное руководство Symfony по обновлению с версий 2.x до 3.0</a></dt>
<dd>Полный перечень изменений, необходимых для обновления до Symfony 3.0, сгрупированные
по компонентам.</dd>
<dt><a class="reference external" href="https://github.com/sensiolabs-de/deprecation-detector">SensioLabs DeprecationDetector</a></dt>
<dd>Запускает анализ статического кода в сравнении с исходным кодом вашего проекта,
чтобы найти использование осуждённых методов, классов и интерфейсов. Работает
для любого PHP-приложения, но включает специальные детекторы для приложений
Symfony, где он также может определять использование осуждённых сервисов.</dd>
<dt><a class="reference external" href="https://github.com/umpirsky/Symfony-Upgrade-Fixer">Наладчик обновления Symfony</a></dt>
<dd>Анализирует проекты Symfony, чтобы найти возражения. В дополнение также автоматически
решает некоторые из них благодаря растущему списку поддерживаемых &quot;наладчиков&quot;.</dd>
</dl>
</div>
</div>
<div class="section" id="id3">
<h2>Тестирование вашего пакет в Symfony 3<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<p>Теперь, когда ваш пакет был избавлен от всех возражений, пора тестировать его
по-настоящему в приложении Symfony 3. Если предположить, что у вас уже есть приложение
Symfony 3, то вы можете протестировать обновлённый пакет, без необходимости его
установки через Composer.</p>
<p>Если ваша операционная система поддерживает символические ссылки, просто направьте
необходимый каталог-поставщик к вашему локальному корневому каталогу пакета:</p>
<div class="literal-block"><div class="highlight-terminal"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">$</span> ln -s /path/to/your/local/bundle/ vendor/you-vendor-name/your-bundle-name
</pre></div>
</td></tr></table></div></div>
<p>Если ваша операционная система не поддерживает символьные ссылки, вам понадобится
скопироваь ваш локальный каталог пакета в соответствующий каталог внутри <tt class="docutils literal"><code>vendor/</code></tt>.</p>
<div class="section" id="travis-ci">
<h3>Обновление конфигурации Travis CI<a class="headerlink" href="#travis-ci" title="Permalink to this headline">¶</a></h3>
<p>В дополенение к запуску инструментов локально, рекомендуется установить сервис Travis CI,
чтобы выполнять тесты вашего пакета, используя разные конфигурации Symfony. Используйте
слелующую рекомендуемую конфигурацию в качестве отправной точки вашей собственной конфгурации:</p>
<div class="literal-block"><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">language</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">php</span>
<span class="l l-Scalar l-Scalar-Plain">sudo</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="l l-Scalar l-Scalar-Plain">php</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">5.3</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">5.6</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">7.0</span>

<span class="l l-Scalar l-Scalar-Plain">matrix</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">include</span><span class="p p-Indicator">:</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">php</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">5.3.3</span>
          <span class="l l-Scalar l-Scalar-Plain">env</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">COMPOSER_FLAGS=&#39;--prefer-lowest --prefer-stable&#39; SYMFONY_DEPRECATIONS_HELPER=weak</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">php</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">5.6</span>
          <span class="l l-Scalar l-Scalar-Plain">env</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">SYMFONY_VERSION=&#39;2.7.*&#39;</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">php</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">5.6</span>
          <span class="l l-Scalar l-Scalar-Plain">env</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">SYMFONY_VERSION=&#39;2.8.*&#39;</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">php</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">5.6</span>
          <span class="l l-Scalar l-Scalar-Plain">env</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">SYMFONY_VERSION=&#39;3.0.*&#39;</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">php</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">5.6</span>
          <span class="l l-Scalar l-Scalar-Plain">env</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">SYMFONY_VERSION=&#39;3.1.*&#39;</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">php</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">5.6</span>
          <span class="l l-Scalar l-Scalar-Plain">env</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">DEPENDENCIES=&#39;dev&#39; SYMFONY_VERSION=&#39;3.2.*@dev&#39;</span>

<span class="l l-Scalar l-Scalar-Plain">before_install</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">composer self-update</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">if [ &quot;$DEPENDENCIES&quot; == &quot;dev&quot; ]; then perl -pi -e &#39;s/^}$/,&quot;minimum-stability&quot;:&quot;dev&quot;}/&#39; composer.json; fi;</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">if [ &quot;$SYMFONY_VERSION&quot; != &quot;&quot; ]; then composer --no-update require symfony/symfony:${SYMFONY_VERSION}; fi;</span>

<span class="l l-Scalar l-Scalar-Plain">install</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">composer update $COMPOSER_FLAGS</span>

<span class="l l-Scalar l-Scalar-Plain">script</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">phpunit</span>
</pre></div>
</td></tr></table></div></div>
</div>
</div>
<div class="section" id="symfony-2-x-3-x">
<h2>Обновление вашего кода для поддержки Symfony 2.x и 3.x одновременно<a class="headerlink" href="#symfony-2-x-3-x" title="Permalink to this headline">¶</a></h2>
<p>Настоящей сложностью добавления поддержки Symfony 3 в ваши пакеты является ситуация,
когда вы хотите, чтобы пакет поддерживал обе версии Symfony 2.x и 3.x одновременно,
используя один код. Есть несколько острых углов, где вам понадобится расправиться с
различиями API.</p>
<p>Перед тем, как углубляться в специфику наиболее распространённых крайних случаев,
общей рекомендацией является <strong>не пологаться на версию Symfony Kernel</strong>, чтобы
решить, какой код использовать:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="nx">Kernel</span><span class="o">::</span><span class="na">VERSION_ID</span> <span class="o">&lt;</span> <span class="mi">20800</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// код для Symfony 2.x</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// код для Symfony 3.x</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
<p>Вместо того, чтобы проверять версию Symfony Kernel, проверьте версию конкретного
компонента. Например, OptionsResolver API изменился в версии 2.6, путём добавления
метода <tt class="docutils literal"><code>setDefined()</code></tt>. Рекомендуемой проверкой в этом случае будет:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Symfony\Component\OptionsResolver\OptionsResolver</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">method_exists</span><span class="p">(</span><span class="nx">OptionsResolver</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;setDefined&#39;</span><span class="p">))</span> <span class="p">{</span>
    <span class="c1">// код для старого OptionsResolver API</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// код для нового OptionsResolver API</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
<div class="admonition-wrapper">
<div class="tip"></div><div class="admonition admonition-tip"><p class="first admonition-title">Tip</p>
<p class="last">Существует один случай, когда вы действительно можете положиться на константу
<tt class="docutils literal"><code>Symfony\Component\HttpKernel\Kernel::VERSION_ID</code></tt>: при попыке определить
версию компонента <tt class="docutils literal"><code>symfony/http-kernel</code></tt>, так как это тот компонент, где определяется
константа.</p>
</div></div>
</div>
</div>


            </div>

            
            <div class="navigation">
                <a href="bundles.html">« Upgrading a Third-Party Bundle for a Major Symfony Version</a>
                <span class="separator">|</span>
                <a href="composer-ru.html">Установка Composer »</a>
            </div>
            

            <div id="license">
                <p>Эта документация является переводом <a href="http://symfony.com/doc/current/index.html">официальной документации Symfony</a> и предоставляется по свободной лицензии <a rel="license nofollow" href="https://creativecommons.org/licenses/by-sa/3.0/deed.ru">CC BY-SA 3.0</a>.</p>
            </div>
        </div>
    </div>
</div></div>


  </body>
</body></html>