<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    
    <title>Тесты &mdash; Symfony Framework Documentation  documentation</title>
    
    <link rel="stylesheet" href="../_static/" type="text/css">
    <link rel="stylesheet" href="..\_static\pygments.css" type="text/css">
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <link rel="top" title="Symfony Framework Documentation  documentation" href="..\index.html">

<link rel="stylesheet" href="..\_assets\app.css?v=8d6d457a0820d7c245bddae16bfd4c75">
<script src="..\_assets\manifest.js?v=d41d8cd98f00b204e980"></script>
<script src="..\_assets\app.js?v=900984040c7cb4dca514"></script>
<style>
    .header__top .container {
        overflow: hidden;
        padding-top: 10px;
        padding-bottom: 10px;
    }
    .header__top .header__logo {
        float: left;
    }
    .header__top .header__support {
        float: right;
    }

    .highlight .k, .highlight .gh, .highlight .gp,
    .highlight .gu, .highlight .kc, .highlight .kd,
    .highlight .kn, .highlight .kr, .highlight .nc,
    .highlight .nd, .highlight .ni, .highlight .nl,
    .highlight .nn, .highlight .nt, .highlight .ow,
    .highlight .se { font-weight: normal; }

    .highlight .c, .highlight .cm, .highlight .c1,
    .highlight .sd, .highlight .si { font-style: normal; }

    .doc { background: none; }
    #demo-warning {
        border: 3px dashed #c00;
        padding: 10px;
        margin-bottom: 30px;
    }
    #demo-warning h4 { font-size: 1.7em;font-weight: bold; }
    #demo-warning p { margin-bottom: 0; }
</style>

<!-- Global Site Tag (gtag.js) - Google Analytics -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-107764519-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-107764519-1');
</script>

<!-- Facebook Pixel Code -->
<script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
        n.callMethod.apply(n,arguments):n.queue.push(arguments)};
        if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
        n.queue=[];t=b.createElement(e);t.async=!0;
        t.src=v;s=b.getElementsByTagName(e)[0];
        s.parentNode.insertBefore(t,s)}(window, document,'script',
        'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '250281335689441');
    fbq('track', 'PageView');
</script>
<img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=250281335689441&ev=PageView&noscript=1">
<!-- End Facebook Pixel Code -->

<script type="text/javascript">!function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="https://vk.com/js/api/openapi.js?159",t.onload=function(){VK.Retargeting.Init("VK-RTRG-279161-8p6Jv"),VK.Retargeting.Hit()},document.head.appendChild(t)}();</script><img src="https://vk.com/rtrg?p=VK-RTRG-279161-8p6Jv" style="position:fixed; left:-999px;" alt="">


  </head>
  <body role="document">

<body class="best_practices doc_article doc">

<header>
    <section class="header__top">
        <div class="container">
            <div class="header__logo">
                <a href="..\..\..\index.html">
                    <img src="..\..\..\_images\header-logo.svg" alt="Symfony.com.ua logo">
                </a>
            </div>
            <div class="header__support hidden-xs">
                <a href="http://playtini.ua/" title="Компания Playtini">
                    <img height="69" src="..\..\..\_images\support.png" alt="Symfony is a SensioLabs product">
                </a>
            </div>
        </div>
    </section>
</header>

<div class="container"><div id="page-content">
    <div class="row">
        <div id="sidebar" class="col-sm-3">
            <div id="sidebar-content"><div class="submenu">
    
    
    <ul class="list_submenu list-unstyled">
    
        <li class="first">
            <a href="..\index.html">Главная</a>
        </li>
    
        <li>
            <a href="..\components\index.html">Компоненты</a>
        </li>
    
        <li>
            <a href="index.html">Лучшие практики</a>
        </li>
    
        <li>
            <a href="..\quick_tour\index.html">Быстрый старт</a>
        </li>
    
        <li>
            <a href="..\reference\index.html">Справочник</a>
        </li>
    
        <li>
            <a href="..\genindex.html">Индекс</a>
        </li>
    
        <li>
            <a href="..\contributing\index.html">Участие</a>
        </li>
    
    </ul>
</div>

                <div class="toc"> 
    <h4>Содержание</h4>
    <div class="toc-content">
        <ul>
<li><a class="reference internal" href="#">Тесты</a><ul>
<li><a class="reference internal" href="#id2">Модульные тесты</a></li>
<li><a class="reference internal" href="#id3">Функциональные тесты</a><ul>
<li><a class="reference internal" href="#url">Жёстко закодированные URL в функциональном тесте</a></li>
</ul>
</li>
<li><a class="reference internal" href="#javascript">Тестирование функциональности JavaScript</a></li>
<li><a class="reference internal" href="#id4">Узнайте больше о функциональных тестах</a></li>
</ul>
</li>
</ul>

    </div>
</div>
                
            </div>

            <div class="ads m-b-30">
                <h2>Вакансии Playtini</h2>
                <div class="ad m-b-15">
                    <h3>
                        <a href="http://playtini.ua/careers/php-dev">
                            Middle+ PHP Developer/Symfony
                        </a>
                    </h3>
                    <div><b>Playtini</b> активно поддерживает и развивает свои продукты, и профессионализм команды. И на данный момент в поиске специалиста на позицию <b>«Middle+ PHP Developer/Symfony»,</b> который улучшит качество внутренних сервисов компании и увеличит их количество.</div>
                </div>
                <!--
                <div class="ad m-b-15">
                    <h3>
                        <a href="http://playtini.ua/careers/symfony-senior">
                            Senior PHP Developer/Symfony
                        </a>
                    </h3>
                    <div>We are looking for strong, experienced <b>Senior PHP Developer/Symfony.</b> We expect him/her to participate in improving and extending a system built using microservice architecture by means of modern technologies.</div>
                </div>
                -->
                <div class="ad">
                    <h3><a href="http://playtini.ua/careers">
                        Остальные вакансии компании
                        <img src="..\..\..\_images\logo-playtini.png" alt="Playtini">
                    </a></h3>
                </div>
            </div>
        </div>

        <div id="main" class="col-sm-9">
            <ol class="breadcrumb">
                
                <li><a href="..\index.html">Документация</a></li>
                
                <li class="active">Тесты</li>
            </ol>

            <div class="page">
                
  <div class="section" id="id1">
<h1>Тесты<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<p>Из всех доступных видов тестов, данные лучшие практики фокусируются исключительно
на модульных и функциональных тестах. Модульное тестирование позволяет вам тестировать
ввод и вывод конкретных функций. Функциональное тестирование позволяет вам командовать
&quot;браузеру&quot;, где вы загружаете страницы на вашем сайте, переходите по ссылкам, заполняете
формы и убеждаетесь, что вы видите на странице определённые вещи.</p>
<div class="section" id="id2">
<h2>Модульные тесты<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>Модульные тесты используются для тестирования вашей &quot;бизнес-логики&quot;, которая
должна жить в классах, независимых от Symfony. По этой причине, Symfony на самом
деле не имеет мнения о том, какие инструменты использовать для модульного
тестирования. Однако, наиболее популярными являются <a class="reference external" href="https://phpunit.de/">PHPUnit</a> и <a class="reference external" href="http://www.phpspec.net/">PHPSpec</a>.</p>
</div>
<div class="section" id="id3">
<h2>Функциональные тесты<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<p>Создание очень хороших функциональных тестов может быть сложным, поэтому
некоторые разработчики полностью их пропускают. Не пропускайте функциональные
тесты! Определив некоторые <em>простые</em> функциональные тесты, вы можете быстро
найти любые большие ошибки перед их развёртыванием:</p>
<div class="admonition-best-practice admonition best-practice">
<p class="first admonition-title">Best Practice</p>
<p class="last">Определите функциональный тест, который хотя бы проверяет, успешно ли
загружаются страницы вашего приложения.</p>
</div></div>
<p>Функциональный тест может быть настолько простым:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// tests/ApplicationAvailabilityFunctionalTest.php</span>
<span class="k">namespace</span> <span class="nx">App\Tests</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Symfony\Bundle\FrameworkBundle\Test\WebTestCase</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">ApplicationAvailabilityFunctionalTest</span> <span class="k">extends</span> <span class="nx">WebTestCase</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @dataProvider urlProvider</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">testPageIsSuccessful</span><span class="p">(</span><span class="nv">$url</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$client</span> <span class="o">=</span> <span class="nx">self</span><span class="o">::</span><span class="na">createClient</span><span class="p">();</span>
        <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">(</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="nv">$url</span><span class="p">);</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertTrue</span><span class="p">(</span><span class="nv">$client</span><span class="o">-&gt;</span><span class="na">getResponse</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">isSuccessful</span><span class="p">());</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">urlProvider</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">yield</span> <span class="p">[</span><span class="s1">&#39;/&#39;</span><span class="p">];</span>
        <span class="k">yield</span> <span class="p">[</span><span class="s1">&#39;/posts&#39;</span><span class="p">];</span>
        <span class="k">yield</span> <span class="p">[</span><span class="s1">&#39;/post/fixture-post-1&#39;</span><span class="p">];</span>
        <span class="k">yield</span> <span class="p">[</span><span class="s1">&#39;/blog/category/fixture-category&#39;</span><span class="p">];</span>
        <span class="k">yield</span> <span class="p">[</span><span class="s1">&#39;/archives&#39;</span><span class="p">];</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
<p>Этот код проверяет, чтобы все заданные URL загружались успешно, что означает,
что статус-код их HTTP-ответа будет между <tt class="docutils literal"><code>200</code></tt> и <tt class="docutils literal"><code>299</code></tt>. Это может выглядеть
не очень полезным, но учитывая, как мало усилий это потребовало, его стоит иметь
в вашем приложении.</p>
<p>В компьютерном ПО такой вид теста называется <a class="reference external" href="https://ru.wikipedia.org/wiki/Smoke_test">дымовым тестированием</a> и состоит
из <em>&quot;предварительного тестирования для обнаружения простых ошибок, достаточно
тяжелых для того, чтобы отказаться от релиза ПО&quot;</em>.</p>
<div class="section" id="url">
<h3>Жёстко закодированные URL в функциональном тесте<a class="headerlink" href="#url" title="Permalink to this headline">¶</a></h3>
<p>Некоторые из вас могут задаваться вопросом, почему предыдущий функциональный тест
не использвует сервис генерирования URL:</p>
<div class="admonition-best-practice admonition best-practice">
<p class="first admonition-title">Best Practice</p>
<p class="last">Жёстко кодируйте URL, используемые в функциональных тестах вместо использовани
URL-генератора.</p>
</div></div>
<p>Рассмотрите следующий функциональный тест, который использует сервис <tt class="docutils literal"><code>router</code></tt>,
чтобы сгенерировать URL тестируемой страницы:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">function</span> <span class="nf">testBlogArchives</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nv">$client</span> <span class="o">=</span> <span class="nx">self</span><span class="o">::</span><span class="na">createClient</span><span class="p">();</span>
    <span class="nv">$url</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">getContainer</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;router&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">generate</span><span class="p">(</span><span class="s1">&#39;blog_archives&#39;</span><span class="p">);</span>
    <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">(</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="nv">$url</span><span class="p">);</span>

    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
<p>Это будет работать, но имеет один <em>огромный</em> недостаток. Если разработчик
случайно изменить путь маршрута <tt class="docutils literal"><code>blog_archives</code></tt>, тест всё равно будет пройден,
но оригинальный (старый) URL не будет работать! Это означает, что все
закладки для этого URL будут поломаны и вы потеряете рейтинг страницы в поисковой
системе.</p>
</div>
</div>
<div class="section" id="javascript">
<h2>Тестирование функциональности JavaScript<a class="headerlink" href="#javascript" title="Permalink to this headline">¶</a></h2>
<p>Встроенный клиент функционального тестирования прекрасен, но он не может быть
использован для тестирования JavaScript поведения на ваших страницах. Если вам
нужно протестировать это, рассмотрите использование библиотеки <a class="reference external" href="http://mink.behat.org">Mink</a> изнутри
PHPUnit.</p>
<p>Конечно, если у вас тяжелый JavaScript фронт-энд, то вам стоит подумать об
использовании чистых инструментов тестирования, основанных на JavaScript.</p>
</div>
<div class="section" id="id4">
<h2>Узнайте больше о функциональных тестах<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<p>Рассмотрите использование <a class="reference external" href="https://github.com/hautelook/AliceBundle">HautelookAliceBundle</a> для генерирования реально выглядящих
данных для ваших фиксаторов теста, используя <a class="reference external" href="https://github.com/fzaninotto/Faker">Faker</a> и <a class="reference external" href="https://github.com/nelmio/alice">Alice</a>.</p>
</div>
</div>


            </div>

            

            <div id="license">
                <p>Эта документация является переводом <a href="http://symfony.com/doc/current/index.html">официальной документации Symfony</a> и предоставляется по свободной лицензии <a rel="license nofollow" href="https://creativecommons.org/licenses/by-sa/3.0/deed.ru">CC BY-SA 3.0</a>.</p>
            </div>
        </div>
    </div>



  </body>
</body></html>