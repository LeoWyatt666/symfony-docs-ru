<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    
    <title>Конфигурация &mdash; Symfony Framework Documentation  documentation</title>
    
    <link rel="stylesheet" href="../_static/" type="text/css">
    <link rel="stylesheet" href="..\_static\pygments.css" type="text/css">
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <link rel="top" title="Symfony Framework Documentation  documentation" href="..\index.html">

<link rel="stylesheet" href="..\_assets\app.css?v=8d6d457a0820d7c245bddae16bfd4c75">
<script src="..\_assets\manifest.js?v=d41d8cd98f00b204e980"></script>
<script src="..\_assets\app.js?v=900984040c7cb4dca514"></script>
<style>
    .header__top .container {
        overflow: hidden;
        padding-top: 10px;
        padding-bottom: 10px;
    }
    .header__top .header__logo {
        float: left;
    }
    .header__top .header__support {
        float: right;
    }

    .highlight .k, .highlight .gh, .highlight .gp,
    .highlight .gu, .highlight .kc, .highlight .kd,
    .highlight .kn, .highlight .kr, .highlight .nc,
    .highlight .nd, .highlight .ni, .highlight .nl,
    .highlight .nn, .highlight .nt, .highlight .ow,
    .highlight .se { font-weight: normal; }

    .highlight .c, .highlight .cm, .highlight .c1,
    .highlight .sd, .highlight .si { font-style: normal; }

    .doc { background: none; }
    #demo-warning {
        border: 3px dashed #c00;
        padding: 10px;
        margin-bottom: 30px;
    }
    #demo-warning h4 { font-size: 1.7em;font-weight: bold; }
    #demo-warning p { margin-bottom: 0; }
</style>

<!-- Global Site Tag (gtag.js) - Google Analytics -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-107764519-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-107764519-1');
</script>

<!-- Facebook Pixel Code -->
<script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
        n.callMethod.apply(n,arguments):n.queue.push(arguments)};
        if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
        n.queue=[];t=b.createElement(e);t.async=!0;
        t.src=v;s=b.getElementsByTagName(e)[0];
        s.parentNode.insertBefore(t,s)}(window, document,'script',
        'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '250281335689441');
    fbq('track', 'PageView');
</script>
<img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=250281335689441&ev=PageView&noscript=1">
<!-- End Facebook Pixel Code -->

<script type="text/javascript">!function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="https://vk.com/js/api/openapi.js?159",t.onload=function(){VK.Retargeting.Init("VK-RTRG-279161-8p6Jv"),VK.Retargeting.Hit()},document.head.appendChild(t)}();</script><img src="https://vk.com/rtrg?p=VK-RTRG-279161-8p6Jv" style="position:fixed; left:-999px;" alt="">


  </head>
  <body role="document">

<body class="best_practices doc_article doc">

<header>
    <section class="header__top">
        <div class="container">
            <div class="header__logo">
                <a href="..\..\..\index.html">
                    <img src="..\..\..\_images\header-logo.svg" alt="Symfony.com.ua logo">
                </a>
            </div>
            <div class="header__support hidden-xs">
                <a href="http://playtini.ua/" title="Компания Playtini">
                    <img height="69" src="..\..\..\_images\support.png" alt="Symfony is a SensioLabs product">
                </a>
            </div>
        </div>
    </section>
</header>

<div class="container"><div id="page-content">
    <div class="row">
        <div id="sidebar" class="col-sm-3">
            <div id="sidebar-content"><div class="submenu">
    
    
    <ul class="list_submenu list-unstyled">
    
        <li class="first">
            <a href="..\index.html">Главная</a>
        </li>
    
        <li>
            <a href="..\components\index.html">Компоненты</a>
        </li>
    
        <li>
            <a href="index.html">Лучшие практики</a>
        </li>
    
        <li>
            <a href="..\quick_tour\index.html">Быстрый старт</a>
        </li>
    
        <li>
            <a href="..\reference\index.html">Справочник</a>
        </li>
    
        <li>
            <a href="..\genindex.html">Индекс</a>
        </li>
    
        <li>
            <a href="..\contributing\index.html">Участие</a>
        </li>
    
    </ul>
</div>

                <div class="toc"> 
    <h4>Содержание</h4>
    <div class="toc-content">
        <ul>
<li><a class="reference internal" href="#">Конфигурация</a><ul>
<li><a class="reference internal" href="#config-parameters-yml-ru">Конфигурация, связанная с инфраструктурой</a><ul>
<li><a class="reference internal" href="#best-practices-canonical-parameters-ru">Каноничные параметры</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id4">Конфигурация, связанная с приложением</a><ul>
<li><a class="reference internal" href="#id5">Константы против опций конфигурации</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id6">Именование параметров</a></li>
</ul>
</li>
</ul>

    </div>
</div>
                
            </div>

            <div class="ads m-b-30">
                <h2>Вакансии Playtini</h2>
                <div class="ad m-b-15">
                    <h3>
                        <a href="http://playtini.ua/careers/php-dev">
                            Middle+ PHP Developer/Symfony
                        </a>
                    </h3>
                    <div><b>Playtini</b> активно поддерживает и развивает свои продукты, и профессионализм команды. И на данный момент в поиске специалиста на позицию <b>«Middle+ PHP Developer/Symfony»,</b> который улучшит качество внутренних сервисов компании и увеличит их количество.</div>
                </div>
                <!--
                <div class="ad m-b-15">
                    <h3>
                        <a href="http://playtini.ua/careers/symfony-senior">
                            Senior PHP Developer/Symfony
                        </a>
                    </h3>
                    <div>We are looking for strong, experienced <b>Senior PHP Developer/Symfony.</b> We expect him/her to participate in improving and extending a system built using microservice architecture by means of modern technologies.</div>
                </div>
                -->
                <div class="ad">
                    <h3><a href="http://playtini.ua/careers">
                        Остальные вакансии компании
                        <img src="..\..\..\_images\logo-playtini.png" alt="Playtini">
                    </a></h3>
                </div>
            </div>
        </div>

        <div id="main" class="col-sm-9">
            <ol class="breadcrumb">
                
                <li><a href="..\index.html">Документация</a></li>
                
                <li class="active">Конфигурация</li>
            </ol>

            <div class="page">
                
  <div class="section" id="id1">
<h1>Конфигурация<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<p>Конфигурация обычно касается разных частей приложения (таких, как инфраструктураи
сертификаты безопасности) и разных окружений (разработки, производства). Поэтому
Symfony рекомендует вам разделять конфигурацию приложения на три части.</p>
<div class="section" id="config-parameters-yml-ru">
<span id="id2"></span><h2>Конфигурация, связанная с инфраструктурой<a class="headerlink" href="#config-parameters-yml-ru" title="Permalink to this headline">¶</a></h2>
<p>Это опции, которые изменяются от машины к машине (например, от вашей машины
разработки к серверу производства), но которые не изменяют поведение приложения.</p>
<div class="admonition-best-practice admonition best-practice">
<p class="first admonition-title">Best Practice</p>
<p class="last">Определите опции конфигурации, связанной с инфраструктурой, в качестве
переменных окружения. Во время разработки, используйте файл <tt class="docutils literal"><code>.env</code></tt> в
корне вашего проекта для того, чтобы установить их.</p>
</div></div>
<p>По умолчанию, Symfony добавляет эти типы опций к файлу <tt class="docutils literal"><code>.env</code></tt> при установке
новых зависимостей в приложении:</p>
<div class="literal-block"><div class="highlight-bash"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># .env</span>
<span class="c1">###&gt; doctrine/doctrine-bundle ###</span>
<span class="nv">DATABASE_URL</span><span class="o">=</span>sqlite:///%kernel.project_dir%/var/data/blog.sqlite
<span class="c1">###&lt; doctrine/doctrine-bundle ###</span>

<span class="c1">###&gt; symfony/swiftmailer-bundle ###</span>
<span class="nv">MAILER_URL</span><span class="o">=</span>smtp://localhost?encryption<span class="o">=</span>ssl<span class="p">&amp;</span><span class="nv">auth_mode</span><span class="o">=</span>login<span class="p">&amp;</span><span class="nv">username</span><span class="o">=</span><span class="p">&amp;</span><span class="nv">password</span><span class="o">=</span>
<span class="c1">###&lt; symfony/swiftmailer-bundle ###</span>

<span class="c1"># ...</span>
</pre></div>
</td></tr></table></div></div>
<p>Эти опции не определены внутри файла <tt class="docutils literal"><code>config/services.yaml</code></tt>, так как они не имеют
ничего общего с поведением приложения. Другими словами, вашему приложению наплевать на
локацию вашей БД или сертификаты для доступа к ней, если БД сконфигурирована корректно.</p>
<div class="admonition-wrapper">
<div class="caution"></div><div class="admonition admonition-caution"><p class="first admonition-title">Caution</p>
<p class="last">Имейте в виду, что сброс содержания переменных <tt class="docutils literal"><code>$_SERVER</code></tt> или <tt class="docutils literal"><code>$_ENV</code></tt>, или
вывод содержания <tt class="docutils literal"><code>phpinfo()</code></tt> отобразит значения переменных окружения, отображая
чувствительную информацию вроде аккредитации БД.</p>
</div></div>
<div class="section" id="best-practices-canonical-parameters-ru">
<span id="id3"></span><h3>Каноничные параметры<a class="headerlink" href="#best-practices-canonical-parameters-ru" title="Permalink to this headline">¶</a></h3>
<div class="admonition-best-practice admonition best-practice">
<p class="first admonition-title">Best Practice</p>
<p class="last">Определите всепеременные окружения вашего приложения в файле <tt class="docutils literal"><code>.env.dist</code></tt>.</p>
</div></div>
<p>Symfony  включает в себя файл конфигурации под названием <tt class="docutils literal"><code>.env.dist</code></tt> в корне
проекта, который хранит каноничный список параметров конфигурации приложения.</p>
<p>Когда определяется новая переменная окружения для приложения, вам также стоит добавить
её в этот файл и зафиксировать изменения вашей системе контроля версий, чтобы ваши
коллеги могли обновить свои файлы <tt class="docutils literal"><code>.env</code></tt>.</p>
</div>
</div>
<div class="section" id="id4">
<h2>Конфигурация, связанная с приложением<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<div class="admonition-best-practice admonition best-practice">
<p class="first admonition-title">Best Practice</p>
<p class="last">Определите опции конфигурации, связанные с поведением приложения в файле
<tt class="docutils literal"><code>config/services.yaml</code></tt>.</p>
</div></div>
<p>Файл <tt class="docutils literal"><code>services.yaml</code></tt> содержит опции, используемые приложением для изменения его
поведения, такие как отправка уведомлений по электронной почте, или включение
<a class="reference external" href="https://en.wikipedia.org/wiki/Feature_toggle">переключателей функций</a>. Определение этих значений в файле <tt class="docutils literal"><code>.env</code></tt> добавит
дополнительный слой конфигурации, который не нужен, так как вам не нужно,чтобы
эти значения конфигурации изменялись на каждом сервере.</p>
<p>Опции конфигурации, определённые в <tt class="docutils literal"><code>services.yaml</code></tt> могут отличаться от
<a class="reference internal" href="..\configuration\environments.html"><em>окружения</em></a> к окружению. Поэтому Symfony
поддерживает определения файлов <tt class="docutils literal"><code>config/services_dev.yaml</code></tt> и <tt class="docutils literal"><code>config/services_prod.yaml</code></tt>,
чтобы вы могли переопределять конкретные значения для каждого окружения.</p>
<div class="section" id="id5">
<h3>Константы против опций конфигурации<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<p>Одна из наиболее распространённых ошибок при определении конфигурации приложения
- создавать новые опции для значений, которые никогда не изменяются, например,
количество объектов для пронумерованных результатов.</p>
<div class="admonition-best-practice admonition best-practice">
<p class="first admonition-title">Best Practice</p>
<p class="last">Используйте константы для определния опций конфигурации, которые
редко изменяются.</p>
</div></div>
<p>Традиционный подход для определения опций конфигурации привёл к тому, что многие
приложения Symfony включают в себя следующую опцию, которая будет использована для
контроля количества постов, отображаемых на домашней странице блога:</p>
<div class="literal-block"><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># config/services.yaml</span>
<span class="l l-Scalar l-Scalar-Plain">parameters</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">homepage.number_of_items</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">10</span>
</pre></div>
</td></tr></table></div></div>
<p>Если вы делали что-то подобное в прошлом, то есть вероятность, что вам на самом
деле <em>никогда</em> не нужно было изменять это значение. Создание опции конфигурации
для значения, которое вы не собираетесь когда-либо конфигурировать просто бессмысленно.
Мы рекомендуем определять эти значения в качестве констант в вашем приложении.
Вы можете, например, определить константу <tt class="docutils literal"><code>NUMBER_OF_ITEMS</code></tt> в сущности <tt class="docutils literal"><code>Post</code></tt>:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Entity/Post.php</span>
<span class="k">namespace</span> <span class="nx">App\Entity</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Post</span>
<span class="p">{</span>
    <span class="k">const</span> <span class="no">NUMBER_OF_ITEMS</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>

    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
<p>Главное преимущество в определении констант заключается в том, что вы можете
использовать их значения всюду в вашем приложении. При использовании параметров,
они доступны только из мест с доступом к контейнеру Symfony.</p>
<p>Константы могут быть использованы, к примеру, в ваших шаблонах Twig, благодаря
<a class="reference external" href="http://twig.sensiolabs.org/doc/functions/constant.html">функции constant()</a>:</p>
<div class="literal-block"><div class="highlight-html+twig"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    Displaying the <span class="cp">{{</span> <span class="nv">constant</span><span class="o">(</span><span class="s1">&#39;NUM_ITEMS&#39;</span><span class="o">,</span> <span class="nv">post</span><span class="o">)</span> <span class="cp">}}</span> most recent results.
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</pre></div>
</td></tr></table></div></div>
<p>А сущности Doctrine и хранилища теперь могут с лёгкостью получать доступ
к этим значениям, в то время, как к параметрам контейнера - нет:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">namespace</span> <span class="nx">AppBundle\Repository</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Doctrine\ORM\EntityRepository</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">AppBundle\Entity\Post</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">PostRepository</span> <span class="k">extends</span> <span class="nx">EntityRepository</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">findLatest</span><span class="p">(</span><span class="nv">$limit</span> <span class="o">=</span> <span class="nx">Post</span><span class="o">::</span><span class="na">NUMBER_OF_ITEMS</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
<p>Единственным заметным недостатком использования констант для такого типа значений
конфигурации является то, что вы не можете легко переопределить их в ваших тестах.</p>
</div>
</div>
<div class="section" id="id6">
<h2>Именование параметров<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h2>
<div class="admonition-best-practice admonition best-practice">
<p class="first admonition-title">Best Practice</p>
<p class="last">Имя ваших параметров конфигурации должно быть максимально коротким и включать
в себя общий префикс для всего приложения.</p>
</div></div>
<p>Использование <tt class="docutils literal"><code>app.</code></tt> в качестве префикса ваших параметров является общей практикой
для избежания коллизий Symfony и параметров сторонних пакетов и библиотек. Далее,
используйте одно или два слова, чтобы описать цель параметра:</p>
<div class="literal-block"><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># config/services.yaml</span>
<span class="l l-Scalar l-Scalar-Plain">параметры</span><span class="p p-Indicator">:</span>
    <span class="c1"># не делайте так: &#39;dir&#39; слишком общий и не несёт никакого значения</span>
    <span class="l l-Scalar l-Scalar-Plain">app.dir</span><span class="p p-Indicator">:</span> <span class="s">&#39;...&#39;</span>
    <span class="c1"># делайте так: короткие, но лёгкие для понимания имена</span>
    <span class="l l-Scalar l-Scalar-Plain">app.contents_dir</span><span class="p p-Indicator">:</span> <span class="s">&#39;...&#39;</span>
    <span class="c1"># можно использовать точки, нижние подчёркивания, дефисы или ничего из этого,</span>
    <span class="c1"># но всегда используйте один и тот же формат для всех параметров</span>
    <span class="l l-Scalar l-Scalar-Plain">app.dir.contents</span><span class="p p-Indicator">:</span> <span class="s">&#39;...&#39;</span>
    <span class="l l-Scalar l-Scalar-Plain">app.contents-dir</span><span class="p p-Indicator">:</span> <span class="s">&#39;...&#39;</span>
</pre></div>
</td></tr></table></div></div>
<hr class="docutils">
<p>Далее: <a class="reference internal" href="business-logic.html"><em>Organizing Your Business Logic</em></a></p>
</div>
</div>


            

            

            <div id="license">
                <p>Эта документация является переводом <a href="http://symfony.com/doc/current/index.html">официальной документации Symfony</a> и предоставляется по свободной лицензии <a rel="license nofollow" href="https://creativecommons.org/licenses/by-sa/3.0/deed.ru">CC BY-SA 3.0</a>.</p>
            </div>
        
    



  </body>
</body></html>