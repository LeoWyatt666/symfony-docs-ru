<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    
    <title>Маршрутизация &mdash; Symfony Framework Documentation  documentation</title>
    
    <link rel="stylesheet" href="_static/" type="text/css">
    <link rel="stylesheet" href="_static\pygments.css" type="text/css">
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <link rel="top" title="Symfony Framework Documentation  documentation" href="index.html">

<link rel="stylesheet" href="_assets\app.css?v=8d6d457a0820d7c245bddae16bfd4c75">
<script src="_assets\manifest.js?v=d41d8cd98f00b204e980"></script>
<script src="_assets\app.js?v=900984040c7cb4dca514"></script>
<style>
    .header__top .container {
        overflow: hidden;
        padding-top: 10px;
        padding-bottom: 10px;
    }
    .header__top .header__logo {
        float: left;
    }
    .header__top .header__support {
        float: right;
    }

    .highlight .k, .highlight .gh, .highlight .gp,
    .highlight .gu, .highlight .kc, .highlight .kd,
    .highlight .kn, .highlight .kr, .highlight .nc,
    .highlight .nd, .highlight .ni, .highlight .nl,
    .highlight .nn, .highlight .nt, .highlight .ow,
    .highlight .se { font-weight: normal; }

    .highlight .c, .highlight .cm, .highlight .c1,
    .highlight .sd, .highlight .si { font-style: normal; }

    .doc { background: none; }
    #demo-warning {
        border: 3px dashed #c00;
        padding: 10px;
        margin-bottom: 30px;
    }
    #demo-warning h4 { font-size: 1.7em;font-weight: bold; }
    #demo-warning p { margin-bottom: 0; }
</style>

<!-- Global Site Tag (gtag.js) - Google Analytics -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-107764519-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-107764519-1');
</script>

<!-- Facebook Pixel Code -->
<script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
        n.callMethod.apply(n,arguments):n.queue.push(arguments)};
        if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
        n.queue=[];t=b.createElement(e);t.async=!0;
        t.src=v;s=b.getElementsByTagName(e)[0];
        s.parentNode.insertBefore(t,s)}(window, document,'script',
        'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '250281335689441');
    fbq('track', 'PageView');
</script>
<img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=250281335689441&ev=PageView&noscript=1">
<!-- End Facebook Pixel Code -->

<script type="text/javascript">!function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="https://vk.com/js/api/openapi.js?159",t.onload=function(){VK.Retargeting.Init("VK-RTRG-279161-8p6Jv"),VK.Retargeting.Hit()},document.head.appendChild(t)}();</script><img src="https://vk.com/rtrg?p=VK-RTRG-279161-8p6Jv" style="position:fixed; left:-999px;" alt="">


  </head>
  <body role="document">

<body class="routing-r doc_article doc">

<header>
    <section class="header__top">
        <div class="container">
            <div class="header__logo">
                <a href="..\..\index.html">
                    <img src="..\..\_images\header-logo.svg" alt="Symfony.com.ua logo">
                </a>
            </div>
            <div class="header__support hidden-xs">
                <a href="http://playtini.ua/" title="Компания Playtini">
                    <img height="69" src="..\..\_images\support.png" alt="Symfony is a SensioLabs product">
                </a>
            </div>
        </div>
    </section>
</header>

<div class="container"><div id="page-content">
    <div class="row">
        <div id="sidebar" class="col-sm-3">
            <div id="sidebar-content"><div class="submenu">
    
    
    <ul class="list_submenu list-unstyled">
    
        <li class="first">
            <a href="index.html">Главная</a>
        </li>
    
        <li>
            <a href="components\index.html">Компоненты</a>
        </li>
    
        <li>
            <a href="best_practices\index.html">Лучшие практики</a>
        </li>
    
        <li>
            <a href="quick_tour\index.html">Быстрый старт</a>
        </li>
    
        <li>
            <a href="reference\index.html">Справочник</a>
        </li>
    
        <li>
            <a href="genindex.html">Индекс</a>
        </li>
    
        <li>
            <a href="contributing\index.html">Участие</a>
        </li>
    
    </ul>
</div>

                <div class="toc"> 
    <h4>Содержание</h4>
    <div class="toc-content">
        <ul>
<li><a class="reference internal" href="#">Маршрутизация</a><ul>
<li><a class="reference internal" href="#index-1">Создание маршрутов</a></li>
<li><a class="reference internal" href="#routing-requirements-ru">Добавляем ограничения {метасимволы}</a></li>
<li><a class="reference internal" href="#placeholder">Устанавливаем значение по умолчанию для {placeholder}</a></li>
<li><a class="reference internal" href="#id6">Список всех ваших маршрутов</a></li>
<li><a class="reference internal" href="#advanced-routing-example-ru">Пример продвинутой маршрутизации</a><ul>
<li><a class="reference internal" href="#id8">Специальные параметры маршрута</a></li>
</ul>
</li>
<li><a class="reference internal" href="#controller-string-syntax-ru">Шаблон именования контроллера</a></li>
<li><a class="reference internal" href="#url">Генерирование URL</a><ul>
<li><a class="reference internal" href="#index-5">Генерирование URL со строкой запроса</a></li>
<li><a class="reference internal" href="#id11">Генерирование URL из шаблона</a></li>
<li><a class="reference internal" href="#index-6">Генерирование абсолютных URL</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id13">Устранение проблем</a></li>
<li><a class="reference internal" href="#id14">Перевод маршрутов</a></li>
<li><a class="reference internal" href="#id15">Продолжайте!</a></li>
<li><a class="reference internal" href="#id16">Узнайте больше о маршрутизации</a><ul>
</ul>
</li>
</ul>
</li>
</ul>

    </div>
</div>
                
            </div>

            <div class="ads m-b-30">
                <h2>Вакансии Playtini</h2>
                <div class="ad m-b-15">
                    <h3>
                        <a href="http://playtini.ua/careers/php-dev">
                            Middle+ PHP Developer/Symfony
                        </a>
                    </h3>
                    <div><b>Playtini</b> активно поддерживает и развивает свои продукты, и профессионализм команды. И на данный момент в поиске специалиста на позицию <b>«Middle+ PHP Developer/Symfony»,</b> который улучшит качество внутренних сервисов компании и увеличит их количество.</div>
                </div>
                <!--
                <div class="ad m-b-15">
                    <h3>
                        <a href="http://playtini.ua/careers/symfony-senior">
                            Senior PHP Developer/Symfony
                        </a>
                    </h3>
                    <div>We are looking for strong, experienced <b>Senior PHP Developer/Symfony.</b> We expect him/her to participate in improving and extending a system built using microservice architecture by means of modern technologies.</div>
                </div>
                -->
                <div class="ad">
                    <h3><a href="http://playtini.ua/careers">
                        Остальные вакансии компании
                        <img src="..\..\_images\logo-playtini.png" alt="Playtini">
                    </a></h3>
                </div>
            </div>
        </div>

        <div id="main" class="col-sm-9">
            <ol class="breadcrumb">
                
                <li><a href="index.html">Документация</a></li>
                
                <li class="active">Маршрутизация</li>
            </ol>

            <div class="page">
                
  <div class="section" id="index-0">
<span id="id1"></span><h1>Маршрутизация<a class="headerlink" href="#index-0" title="Permalink to this headline">¶</a></h1>
<p>Каждое серьезное веб-приложение должно иметь «красивые» URL. Это значит забыть
о таких некрасивых URL, как <tt class="docutils literal"><code>index.php?article_id=57</code></tt>, и заменить
их на что-то типа <tt class="docutils literal"><code>/read/intro-to-symfony</code></tt>.</p>
<p>Однако гибкость имеет ещё большее значение. Что если вам нужно поменять URL
страницы с <tt class="docutils literal"><code>/blog</code></tt> на <tt class="docutils literal"><code>/news</code></tt>? Сколько ссылок вам нужно отыскать и обновить,
чтобы внести изменения? Если вы используете маршрутизатор Symfony, то изменения
сделать легко.</p>
<div class="section" id="index-1">
<span id="id2"></span><h2>Создание маршрутов<a class="headerlink" href="#index-1" title="Permalink to this headline">¶</a></h2>
<p>Для начала, установите пакет аннотаций:</p>
<div class="literal-block"><div class="highlight-terminal"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">$</span> composer require annotations
</pre></div>
</td></tr></table></div></div>
<p><em>Маршрут</em> - это карта от пути URL к контроллеру. Представьте, что вы хотите один
маршрут, точно совпадающий с <tt class="docutils literal"><code>/blog</code></tt>, а второй - более динамический, который
может совпадать с <em>любым</em> URL, вроде <tt class="docutils literal"><code>/blog/my-post</code></tt> или <tt class="docutils literal"><code>/blog/all-about-symfony</code></tt>:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Annotations</em><div class="literal-block"><div class="highlight-php-annotations"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Controller/BlogController.php</span>
<span class="k">namespace</span> <span class="nx">App\Controller</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Symfony\Bundle\FrameworkBundle\Controller\Controller</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Annotation\Route</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">BlogController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * Matches /blog exactly</span>
<span class="sd">     *</span>
<span class="sd">     * @Route(&quot;/blog&quot;, name=&quot;blog_list&quot;)</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">list</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * Matches /blog/*</span>
<span class="sd">     *</span>
<span class="sd">     * @Route(&quot;/blog/{slug}&quot;, name=&quot;blog_show&quot;)</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">show</span><span class="p">(</span><span class="nv">$slug</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// $slug будет равняться динамической части URL</span>
        <span class="c1">// e.g. at /blog/yay-routing, then $slug=&#39;yay-routing&#39;</span>

        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
</li>
<li><em>YAML</em><div class="literal-block"><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># config/routes.yaml</span>
<span class="l l-Scalar l-Scalar-Plain">blog_list</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">path</span><span class="p p-Indicator">:</span>     <span class="l l-Scalar l-Scalar-Plain">/blog</span>
    <span class="l l-Scalar l-Scalar-Plain">controller</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">App\Controller\BlogController::list</span>

<span class="l l-Scalar l-Scalar-Plain">blog_show</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">path</span><span class="p p-Indicator">:</span>     <span class="l l-Scalar l-Scalar-Plain">/blog/{slug}</span>
    <span class="l l-Scalar l-Scalar-Plain">controller</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">App\Controller\BlogController::show</span>
</pre></div>
</td></tr></table></div></div>
</li>
<li><em>XML</em><div class="literal-block"><div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">&lt;!-- config/routes.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;routes</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/routing&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/routing</span>
<span class="s">        http://symfony.com/schema/routing/routing-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;route</span> <span class="na">id=</span><span class="s">&quot;blog_list&quot;</span> <span class="na">controller=</span><span class="s">&quot;App\Controller\BlogController::list&quot;</span> <span class="na">path=</span><span class="s">&quot;/blog&quot;</span> <span class="nt">&gt;</span>
        <span class="c">&lt;!-- settings --&gt;</span>
    <span class="nt">&lt;/route&gt;</span>

    <span class="nt">&lt;route</span> <span class="na">id=</span><span class="s">&quot;blog_show&quot;</span> <span class="na">controller=</span><span class="s">&quot;App\Controller\BlogController::show&quot;</span> <span class="na">path=</span><span class="s">&quot;/blog/{slug}&quot;</span><span class="nt">&gt;</span>
        <span class="c">&lt;!-- settings --&gt;</span>
    <span class="nt">&lt;/route&gt;</span>
<span class="nt">&lt;/routes&gt;</span>
</pre></div>
</td></tr></table></div></div>
</li>
<li><em>PHP</em><div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// config/routes.php</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\RouteCollection</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Route</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">App\Controller\BlogController</span><span class="p">;</span>

<span class="nv">$collection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">RouteCollection</span><span class="p">();</span>
<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;blog_list&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">Route</span><span class="p">(</span><span class="s1">&#39;/blog&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;_controller&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="nx">BlogController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;list&#39;</span><span class="p">]</span>
<span class="p">)));</span>
<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;blog_show&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">Route</span><span class="p">(</span><span class="s1">&#39;/blog/{slug}&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;_controller&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="nx">BlogController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;show&#39;</span><span class="p">]</span>
<span class="p">)));</span>

<span class="k">return</span> <span class="nv">$collection</span><span class="p">;</span>
</pre></div>
</td></tr></table></div></div>
</li>
</ul>
</div>
<p>Благодаря этим двум маршрутам:</p>
<ul class="simple">
<li>Если пользователь переходит в <tt class="docutils literal"><code>/blog</code></tt>, первый маршрут подходит
и выполняется <tt class="docutils literal"><code>list()</code></tt>;</li>
<li>Если вользователь переходит в <tt class="docutils literal"><code>/blog/*</code></tt>, второй маршрут подходит и
выполняется <tt class="docutils literal"><code>show()</code></tt>. Так как путь маршрута <tt class="docutils literal"><code>/blog/{slug}</code></tt>,
в <tt class="docutils literal"><code>show()</code></tt> определяется переменная <tt class="docutils literal"><code>$slug</code></tt>, совпадающая с этим значением.
Например, если пользователь переходит на  <tt class="docutils literal"><code>/blog/yay-routing</code></tt>, тогда
<tt class="docutils literal"><code>$slug</code></tt> будет равняться <tt class="docutils literal"><code>yay-routing</code></tt>.</li>
</ul>
<p>Если в вашем маршруте есть <tt class="docutils literal"><code>{placeholder}</code></tt>, тогда эта часть становится метасимволом
(wildcard): она подходит под <em>любое</em> значение. Ваш контроллер теперь может <em>также</em> иметь
аргумент под названием <tt class="docutils literal"><code>$placeholder</code></tt> (названия метасимвола и аргумента
<em>должны</em> совпадать).</p>
<p>Каждый маршрут также имеет внутренне имя: <tt class="docutils literal"><code>blog_list</code></tt> и <tt class="docutils literal"><code>blog_show</code></tt>. Они
могут быть любыми (при условии, что каждое уникально) и пока не имеют никакого
значения. Вы будете использовать их позже, чтобы <a class="reference internal" href="routing.html#routing-generate"><span>генерировать URL</span></a>.</p>
<div class="admonition-wrapper">
<div class="sidebar"></div><div class="admonition admonition-sidebar"><p class="first sidebar-title">Маршрутизация в других форматах</p>
<p class="last"><tt class="docutils literal"><code>&#64;Route</code></tt> над каждым методом называется <em>аннотация</em>. Если вы предпочитаете
создавать ваши маршруты в YAML, XML или PHP, то в этом нет никакой проблемы!
Просто создайте новый файл маршрутизации (например, <tt class="docutils literal"><code>routes.xml</code></tt>) и Symfony
автоматически будет использовать его.</p>
</div></div>
</div>
<div class="section" id="routing-requirements-ru">
<span id="id3"></span><h2>Добавляем ограничения {метасимволы}<a class="headerlink" href="#routing-requirements-ru" title="Permalink to this headline">¶</a></h2>
<p>Представьте, что путь <tt class="docutils literal"><code>blog_list</code></tt> будет содержать список постов блога
с разбивкой по страницам, с URL типа <tt class="docutils literal"><code>/blog/2</code></tt> и <tt class="docutils literal"><code>/blog/3</code></tt> для страниц 2 и 3.
Если вы измените путь этого маршрута на <tt class="docutils literal"><code>/blog/{page}</code></tt>, у вас возникнет
проблема:</p>
<ul class="simple">
<li>blog_list: <tt class="docutils literal"><code>/blog/{page}</code></tt> будет подходить под <tt class="docutils literal"><code>/blog/*</code></tt>;</li>
<li>blog_show: <tt class="docutils literal"><code>/blog/{slug}</code></tt> будет <em>также</em> подходить под <tt class="docutils literal"><code>/blog/*</code></tt>.</li>
</ul>
<p>Когда два маршрута подходят под один и тот же URL, <em>первый</em> маршрут, который
загружается - выигрывает. К сожалению, это значит, что <tt class="docutils literal"><code>/blog/yay-routing</code></tt>
будет подходить с <a href="#id4"><span class="problematic" id="id5">``</span></a>blog_list`. Нехорошо!</p>
<p>Для того, чтобы это исправить, добавьте <em>ограничение</em>, указывающее, что
метасимвол <tt class="docutils literal"><code>{page}</code></tt> может подходить только под URL с набором цифр:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Annotations</em><div class="literal-block"><div class="highlight-php-annotations"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Controller/BlogController.php</span>
<span class="k">namespace</span> <span class="nx">App\Controller</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Symfony\Bundle\FrameworkBundle\Controller\Controller</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Annotation\Route</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">BlogController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @Route(&quot;/blog/{page}&quot;, name=&quot;blog_list&quot;, requirements={&quot;page&quot;=&quot;\d+&quot;})</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">list</span><span class="p">(</span><span class="nv">$page</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * @Route(&quot;/blog/{slug}&quot;, name=&quot;blog_show&quot;)</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">show</span><span class="p">(</span><span class="nv">$slug</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
</li>
<li><em>YAML</em><div class="literal-block"><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># config/routes.yaml</span>
<span class="l l-Scalar l-Scalar-Plain">blog_list</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">path</span><span class="p p-Indicator">:</span>      <span class="l l-Scalar l-Scalar-Plain">/blog/{page}</span>
    <span class="l l-Scalar l-Scalar-Plain">controller</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">App\Controller\BlogController::list</span>
    <span class="l l-Scalar l-Scalar-Plain">requirements</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">page</span><span class="p p-Indicator">:</span> <span class="s">&#39;\d+&#39;</span>

<span class="l l-Scalar l-Scalar-Plain">blog_show</span><span class="p p-Indicator">:</span>
    <span class="c1"># ...</span>
</pre></div>
</td></tr></table></div></div>
</li>
<li><em>XML</em><div class="literal-block"><div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">&lt;!-- config/routes.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;routes</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/routing&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/routing</span>
<span class="s">        http://symfony.com/schema/routing/routing-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;route</span> <span class="na">id=</span><span class="s">&quot;blog_list&quot;</span> <span class="na">path=</span><span class="s">&quot;/blog/{page}&quot;</span> <span class="na">controller=</span><span class="s">&quot;App\Controller\BlogController::list&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;requirement</span> <span class="na">key=</span><span class="s">&quot;page&quot;</span><span class="nt">&gt;</span>\d+<span class="nt">&lt;/requirement&gt;</span>
    <span class="nt">&lt;/route&gt;</span>

    <span class="c">&lt;!-- ... --&gt;</span>
<span class="nt">&lt;/routes&gt;</span>
</pre></div>
</td></tr></table></div></div>
</li>
<li><em>PHP</em><div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// config/routes.php</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\RouteCollection</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Route</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">App\Controller\BlogController</span><span class="p">;</span>

<span class="nv">$collection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">RouteCollection</span><span class="p">();</span>
<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;blog_list&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">Route</span><span class="p">(</span><span class="s1">&#39;/blog/{page}&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;_controller&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="nx">BlogController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;list&#39;</span><span class="p">],</span>
<span class="p">),</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;page&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;\d+&#39;</span>
<span class="p">)));</span>

<span class="c1">// ...</span>

<span class="k">return</span> <span class="nv">$collection</span><span class="p">;</span>
</pre></div>
</td></tr></table></div></div>
</li>
</ul>
</div>
<p><tt class="docutils literal"><code>\d+</code></tt> - это регулярное выражение, которое подходит под набор <em>цифр</em> любой длины. Теперь:</p>
<table border="1" class="docutils">
<colgroup>
<col width="35%">
<col width="19%">
<col width="46%">
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URL</th>
<th class="head">Route</th>
<th class="head">Parameters</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><code>/blog/2</code></tt></td>
<td><tt class="docutils literal"><code>blog_list</code></tt></td>
<td><tt class="docutils literal"><code>$page</code></tt> = <tt class="docutils literal"><code>2</code></tt></td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><code>/blog/yay-routing</code></tt></td>
<td><tt class="docutils literal"><code>blog_show</code></tt></td>
<td><tt class="docutils literal"><code>$slug</code></tt> = <tt class="docutils literal"><code>yay-routing</code></tt></td>
</tr>
</tbody>
</table>
<p>Чтобы узнать о других ограничениях маршрутов, например, HTTP-методе, имени хоста и
динамических выражениях, см. <a class="reference internal" href="routing\requirements.html"><em>Ограничения маршрутов</em></a>.</p>
</div>
<div class="section" id="placeholder">
<h2>Устанавливаем значение по умолчанию для {placeholder}<a class="headerlink" href="#placeholder" title="Permalink to this headline">¶</a></h2>
<p>В предыдущем примере, <tt class="docutils literal"><code>blog_list</code></tt> имеет путь <tt class="docutils literal"><code>/blog/{page}</code></tt>. Если
пользователь зайдет на <tt class="docutils literal"><code>/blog/1</code></tt>, он подойдёт. Но если пользователь
зайдет на <tt class="docutils literal"><code>/blog</code></tt>, то он <strong>не</strong> подойдёт. Как только вы добавите в
маршрут <tt class="docutils literal"><code>{placeholder}</code></tt>, он <em>должен</em> иметь значение.</p>
<p>Так как же сделать так, чтобы <tt class="docutils literal"><code>blog_list</code></tt> подходил, когда пользователь
заходит на <tt class="docutils literal"><code>/blog</code></tt>? Путем добавления значения <em>по умолчанию</em>:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Annotations</em><div class="literal-block"><div class="highlight-php-annotations"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Controller/BlogController.php</span>
<span class="k">namespace</span> <span class="nx">App\Controller</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Symfony\Bundle\FrameworkBundle\Controller\Controller</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Annotation\Route</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">BlogController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @Route(&quot;/blog/{page}&quot;, name=&quot;blog_list&quot;, requirements={&quot;page&quot;=&quot;\d+&quot;})</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">list</span><span class="p">(</span><span class="nv">$page</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
</li>
<li><em>YAML</em><div class="literal-block"><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># config/routes.yaml</span>
<span class="l l-Scalar l-Scalar-Plain">blog_list</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">path</span><span class="p p-Indicator">:</span>      <span class="l l-Scalar l-Scalar-Plain">/blog/{page}</span>
    <span class="l l-Scalar l-Scalar-Plain">controller</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">App\Controller\BlogController::list</span>
    <span class="l l-Scalar l-Scalar-Plain">defaults</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">page</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
    <span class="l l-Scalar l-Scalar-Plain">requirements</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">page</span><span class="p p-Indicator">:</span> <span class="s">&#39;\d+&#39;</span>

<span class="l l-Scalar l-Scalar-Plain">blog_show</span><span class="p p-Indicator">:</span>
    <span class="c1"># ...</span>
</pre></div>
</td></tr></table></div></div>
</li>
<li><em>XML</em><div class="literal-block"><div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">&lt;!-- config/routes.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;routes</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/routing&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/routing</span>
<span class="s">        http://symfony.com/schema/routing/routing-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;route</span> <span class="na">id=</span><span class="s">&quot;blog_list&quot;</span> <span class="na">path=</span><span class="s">&quot;/blog/{page}&quot;</span> <span class="na">controller=</span><span class="s">&quot;App\Controller\BlogController::list&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;default</span> <span class="na">key=</span><span class="s">&quot;page&quot;</span><span class="nt">&gt;</span>1<span class="nt">&lt;/default&gt;</span>

        <span class="nt">&lt;requirement</span> <span class="na">key=</span><span class="s">&quot;page&quot;</span><span class="nt">&gt;</span>\d+<span class="nt">&lt;/requirement&gt;</span>
    <span class="nt">&lt;/route&gt;</span>

    <span class="c">&lt;!-- ... --&gt;</span>
<span class="nt">&lt;/routes&gt;</span>
</pre></div>
</td></tr></table></div></div>
</li>
<li><em>PHP</em><div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// config/routes.php</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\RouteCollection</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Route</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">App\Controller\BlogController</span><span class="p">;</span>

<span class="nv">$collection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">RouteCollection</span><span class="p">();</span>
<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;blog_list&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">Route</span><span class="p">(</span>
    <span class="s1">&#39;/blog/{page}&#39;</span><span class="p">,</span>
    <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;_controller&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="nx">BlogController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;list&#39;</span><span class="p">],</span>
        <span class="s1">&#39;page&#39;</span>        <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;page&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;\d+&#39;</span>
    <span class="p">)</span>
<span class="p">));</span>

<span class="c1">// ...</span>

<span class="k">return</span> <span class="nv">$collection</span><span class="p">;</span>
</pre></div>
</td></tr></table></div></div>
</li>
</ul>
</div>
<p>Теперь, когда пользователь заходит на <tt class="docutils literal"><code>/blog</code></tt>, маршрут <tt class="docutils literal"><code>blog_list</code></tt>
будет подходить, а <tt class="docutils literal"><code>$page</code></tt> теперь по умолчанию будет иметь значение <tt class="docutils literal"><code>1</code></tt>.</p>
</div>
<div class="section" id="id6">
<h2>Список всех ваших маршрутов<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h2>
<p>По мере роста вашего приложения, у вас в итоге появится <em>много</em> маршрутов!
Чтобы увидеть их все, выполните:</p>
<div class="literal-block"><div class="highlight-terminal"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">$</span> php bin/console debug:router
</pre></div>
</td></tr></table></div></div>
<div class="literal-block"><div class="highlight-text"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span>------------------------------ -------- -------------------------------------
 Имя                           Метод    Путь
------------------------------ -------- -------------------------------------
 app_lucky_number              ANY    /lucky/number/{max}
 ...
------------------------------ -------- -------------------------------------
</pre></div>
</td></tr></table></div></div>
</div>
<div class="section" id="advanced-routing-example-ru">
<span id="index-2"></span><span id="id7"></span><h2>Пример продвинутой маршрутизации<a class="headerlink" href="#advanced-routing-example-ru" title="Permalink to this headline">¶</a></h2>
<p>Держа все это в уме, посмотрите на этот продвинутый пример:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Annotations</em><div class="literal-block"><div class="highlight-php-annotations"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Controller/ArticleController.php</span>

<span class="c1">// ...</span>
<span class="k">class</span> <span class="nc">ArticleController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @Route(</span>
<span class="sd">     *     &quot;/articles/{_locale}/{year}/{slug}.{_format}&quot;,</span>
<span class="sd">     *     defaults={&quot;_format&quot;: &quot;html&quot;},</span>
<span class="sd">     *     requirements={</span>
<span class="sd">     *         &quot;_locale&quot;: &quot;en|fr&quot;,</span>
<span class="sd">     *         &quot;_format&quot;: &quot;html|rss&quot;,</span>
<span class="sd">     *         &quot;year&quot;: &quot;\d+&quot;</span>
<span class="sd">     *     }</span>
<span class="sd">     * )</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">show</span><span class="p">(</span><span class="nv">$_locale</span><span class="p">,</span> <span class="nv">$year</span><span class="p">,</span> <span class="nv">$slug</span><span class="p">)</span>
    <span class="p">{</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
</li>
<li><em>YAML</em><div class="literal-block"><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># config/routes.yaml</span>
<span class="l l-Scalar l-Scalar-Plain">article_show</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">path</span><span class="p p-Indicator">:</span>     <span class="l l-Scalar l-Scalar-Plain">/articles/{_locale}/{year}/{slug}.{_format}</span>
  <span class="l l-Scalar l-Scalar-Plain">controller</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">App\Controller\ArticleController::show</span>
  <span class="l l-Scalar l-Scalar-Plain">defaults</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">_format</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">html</span>
  <span class="l l-Scalar l-Scalar-Plain">requirements</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">_locale</span><span class="p p-Indicator">:</span>  <span class="l l-Scalar l-Scalar-Plain">en|fr</span>
      <span class="l l-Scalar l-Scalar-Plain">_format</span><span class="p p-Indicator">:</span>  <span class="l l-Scalar l-Scalar-Plain">html|rss</span>
      <span class="l l-Scalar l-Scalar-Plain">year</span><span class="p p-Indicator">:</span>     <span class="l l-Scalar l-Scalar-Plain">\d+</span>
</pre></div>
</td></tr></table></div></div>
</li>
<li><em>XML</em><div class="literal-block"><div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">&lt;!-- config/routes.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;routes</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/routing&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/routing</span>
<span class="s">        http://symfony.com/schema/routing/routing-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;route</span> <span class="na">id=</span><span class="s">&quot;article_show&quot;</span>
        <span class="na">path=</span><span class="s">&quot;/articles/{_locale}/{year}/{slug}.{_format}&quot;</span>
        <span class="na">controller=</span><span class="s">&quot;App\Controller\ArticleController::show&quot;</span><span class="nt">&gt;</span>

        <span class="nt">&lt;default</span> <span class="na">key=</span><span class="s">&quot;_format&quot;</span><span class="nt">&gt;</span>html<span class="nt">&lt;/default&gt;</span>
        <span class="nt">&lt;requirement</span> <span class="na">key=</span><span class="s">&quot;_locale&quot;</span><span class="nt">&gt;</span>en|fr<span class="nt">&lt;/requirement&gt;</span>
        <span class="nt">&lt;requirement</span> <span class="na">key=</span><span class="s">&quot;_format&quot;</span><span class="nt">&gt;</span>html|rss<span class="nt">&lt;/requirement&gt;</span>
        <span class="nt">&lt;requirement</span> <span class="na">key=</span><span class="s">&quot;year&quot;</span><span class="nt">&gt;</span>\d+<span class="nt">&lt;/requirement&gt;</span>

    <span class="nt">&lt;/route&gt;</span>
<span class="nt">&lt;/routes&gt;</span>
</pre></div>
</td></tr></table></div></div>
</li>
<li><em>PHP</em><div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// config/routes.php</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\RouteCollection</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Route</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">App\Controller\ArticleController</span><span class="p">;</span>

<span class="nv">$collection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">RouteCollection</span><span class="p">();</span>
<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span>
    <span class="s1">&#39;article_show&#39;</span><span class="p">,</span>
    <span class="k">new</span> <span class="nx">Route</span><span class="p">(</span><span class="s1">&#39;/articles/{_locale}/{year}/{slug}.{_format}&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;_controller&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="nx">ArticleController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;show&#39;</span><span class="p">],</span>
        <span class="s1">&#39;_format&#39;</span>     <span class="o">=&gt;</span> <span class="s1">&#39;html&#39;</span><span class="p">,</span>
    <span class="p">),</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;_locale&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;en|fr&#39;</span><span class="p">,</span>
        <span class="s1">&#39;_format&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;html|rss&#39;</span><span class="p">,</span>
        <span class="s1">&#39;year&#39;</span>    <span class="o">=&gt;</span> <span class="s1">&#39;\d+&#39;</span><span class="p">,</span>
    <span class="p">))</span>
<span class="p">);</span>

<span class="k">return</span> <span class="nv">$collection</span><span class="p">;</span>
</pre></div>
</td></tr></table></div></div>
</li>
</ul>
</div>
<p>Как вы увидели, этот маршрут будет подходить только если часть <tt class="docutils literal"><code>{_locale}</code></tt>
URL будет либо <tt class="docutils literal"><code>en</code></tt>, либо <tt class="docutils literal"><code>fr</code></tt>, и если <tt class="docutils literal"><code>{year}</code></tt> будет числом. Этот
маршрут также показывает,как вы можете использовать точку вместо слеша
между заполнителями. URL, подходящие под этот маршрут, могут выглядеть так:</p>
<ul class="simple">
<li><tt class="docutils literal"><code>/articles/en/2010/my-post</code></tt></li>
<li><tt class="docutils literal"><code>/articles/fr/2010/my-post.rss</code></tt></li>
<li><tt class="docutils literal"><code>/articles/en/2013/my-latest-post.html</code></tt></li>
</ul>
<div class="admonition-wrapper" id="routing-format-param-ru">
<div class="sidebar"></div><div class="admonition admonition-sidebar"><p class="first sidebar-title">Особый параметр маршрутизации <tt class="docutils literal"><code>_format</code></tt></p>
<p>Этот пример также использует особый параметр маршрутизации <tt class="docutils literal"><code>_format</code></tt>.
При использовании этого параметра, соответствующее значение становится
«форматом запроса» объекта <tt class="docutils literal"><code>Request</code></tt>.</p>
<p class="last">В конечном счете, формат запроса используется для таких вещей, как установка
<tt class="docutils literal"><code>Content-Type</code></tt> для ответа (например запрос формата <tt class="docutils literal"><code>json</code></tt> меняет
<tt class="docutils literal"><code>Content-Type</code></tt> в <tt class="docutils literal"><code>application/json</code></tt>).</p>
</div></div>
<div class="admonition-wrapper">
<div class="note"></div><div class="admonition admonition-note"><p class="first admonition-title">Note</p>
<p class="last">Иногда мы можете захотеть сделать некоторые части ваших маршрутов настраиваемыми
глобально. Symfony предоставляет вам возможность сделать это путем ипользования
параметров контейнера служб. Прочитайте об этом подробнее в разделе
&quot;<a class="reference internal" href="routing\service_container_parameters.html"><em>Параметры контейнеров служб</em></a>&quot;.</p>
</div></div>
<div class="admonition-wrapper">
<div class="caution"></div><div class="admonition admonition-caution"><p class="first admonition-title">Caution</p>
<p class="last">Имя заполнителя маршрута (placeholder) не может начинаться с цифры и не может иметь больше 32 символов.</p>
</div></div>
<div class="section" id="id8">
<h3>Специальные параметры маршрута<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<p>Как вы уже видели, каждый параметр маршрута или значение по умолчанию в конечном итоге
доступен в виде аргумента в методе контроллера. В дополнение к этому есть также четыре
специальных параметра, каждый из которых добавляет уникальные возможности внутри вашего
приложения:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><code>_controller</code></tt></dt>
<dd>Как вы уже знаете, этот параметр используется для того, чтобы определить
какой контроллер будет выполнен, когда маршрут подходит под URL.</dd>
<dt><tt class="docutils literal"><code>_format</code></tt></dt>
<dd>Используется для определения запрашиваемого формата  (<a class="reference internal" href="#routing-format-param-ru"><span>узнать больше</span></a>).</dd>
<dt><tt class="docutils literal"><code>_fragment</code></tt></dt>
<dd>Используется для установки идентификатора фрагманта, необязательной последней
части URL, которая начинается с символа <tt class="docutils literal"><code>#</code></tt> и используется для идентификации
части документа.</dd>
<dt><tt class="docutils literal"><code>_locale</code></tt></dt>
<dd>Используется для установки локали запроса (<a class="reference internal" href="translation/locale-ru.html#translation-locale-url-ru"><span>узнать больше</span></a>).</dd>
</dl>
</div>
</div>
<div class="section" id="controller-string-syntax-ru">
<span id="index-3"></span><span id="id9"></span><h2>Шаблон именования контроллера<a class="headerlink" href="#controller-string-syntax-ru" title="Permalink to this headline">¶</a></h2>
<p>Значене <tt class="docutils literal"><code>controller</code></tt> в ваших маршрутах имеет очень простой формат
<tt class="docutils literal"><code>CONTROLLER_CLASS::METHOD</code></tt>. Если ваш контроллер зарегистрирован, как сервис,
то вы также можете использовать только одно двоеточие-разделитель
(например, <tt class="docutils literal"><code>service_name:index</code></tt>).</p>
<div class="admonition-wrapper">
<div class="tip"></div><div class="admonition admonition-tip"><p class="first admonition-title">Tip</p>
<p class="last">Чтобы сослаться на действие, реализуемое как метод <tt class="docutils literal"><code>__invoke()</code></tt> класса контроллера,
вам не нужно передавать имя метода, а вы можете просто использовать полное имя класса
(например, <tt class="docutils literal"><code>App\Controller\BlogController</code></tt>).</p>
</div></div>
</div>
<div class="section" id="url">
<span id="routing-generate-ru"></span><span id="index-4"></span><h2>Генерирование URL<a class="headerlink" href="#url" title="Permalink to this headline">¶</a></h2>
<p>Система маршрутизации также может генерировать URL. В действительности, маршрутизация
- это двусторонняя система: прокдадыване пути от URL к контроллеру, а также маршрута
обратно к URL.</p>
<p>Для генерации URL, вам нужно будет указать имя маршрута (например, <tt class="docutils literal"><code>blog_show</code></tt>)
и любые метасимволы (например, <tt class="docutils literal"><code>slug = my-blog-post</code></tt>), используемые в пути для этого
маршрута. С этой информацией, можно с легкостью сгенерировать любой URL:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MainController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">show</span><span class="p">(</span><span class="nv">$slug</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>

        <span class="c1">// /blog/my-blog-post</span>
        <span class="nv">$url</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">generateUrl</span><span class="p">(</span>
            <span class="s1">&#39;blog_show&#39;</span><span class="p">,</span>
            <span class="k">array</span><span class="p">(</span><span class="s1">&#39;slug&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;my-blog-post&#39;</span><span class="p">)</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
<p>Если вам нужно сгенерировать URL из сервиса, типизируйте сервис
<tt class="docutils literal"><code><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/Routing/Generator/UrlGeneratorInterface.html" title="Symfony\Component\Routing\Generator\UrlGeneratorInterface">UrlGeneratorInterface</a></code></tt>:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// src/Service/SomeService.php</span>

<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Generator\UrlGeneratorInterface</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">SomeService</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="nv">$router</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nx">UrlGeneratorInterface</span> <span class="nv">$router</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">router</span> <span class="o">=</span> <span class="nv">$router</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">someMethod</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$url</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">router</span><span class="o">-&gt;</span><span class="na">generate</span><span class="p">(</span>
            <span class="s1">&#39;blog_show&#39;</span><span class="p">,</span>
            <span class="k">array</span><span class="p">(</span><span class="s1">&#39;slug&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;my-blog-post&#39;</span><span class="p">)</span>
        <span class="p">);</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
<div class="section" id="index-5">
<span id="id10"></span><h3>Генерирование URL со строкой запроса<a class="headerlink" href="#index-5" title="Permalink to this headline">¶</a></h3>
<p>Метод <tt class="docutils literal"><code>generate()</code></tt> использует массив значений параметров для генерирования URL.
Но если вы укажете дополнительные параметры, то они будут добавлены в URL как параметры
запроса:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">router</span><span class="o">-&gt;</span><span class="na">generate</span><span class="p">(</span><span class="s1">&#39;blog&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;page&#39;</span> <span class="o">=&gt;</span> <span class="mi">2</span><span class="p">,</span>
    <span class="s1">&#39;category&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Symfony&#39;</span><span class="p">,</span>
<span class="p">));</span>
<span class="c1">// /blog/2?category=Symfony</span>
</pre></div>
</td></tr></table></div></div>
</div>
<div class="section" id="id11">
<h3>Генерирование URL из шаблона<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h3>
<p>Чтобы сгенерировать URL в Twig, см. статью по <span class="xref std std-ref">шаблонам</span>.
Если вам также надо сгенерировать URL в JavaScript, см <a class="reference internal" href="routing\generate_url_javascript.html"><em>Создание URL в JavaScript</em></a>.</p>
</div>
<div class="section" id="index-6">
<span id="id12"></span><h3>Генерирование абсолютных URL<a class="headerlink" href="#index-6" title="Permalink to this headline">¶</a></h3>
<p>По умолчанию, маршрутизатор генерирует относительные URL (например,``/blog``).
Чтобы сгенерировать абсолютный URL, укажите <tt class="docutils literal"><code>UrlGeneratorInterface::ABSOLUTE_URL</code></tt>
в качестве третьего аргумента метода <tt class="docutils literal"><code>generateUrl()</code></tt>:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Symfony\Component\Routing\Generator\UrlGeneratorInterface</span><span class="p">;</span>

<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">generateUrl</span><span class="p">(</span><span class="s1">&#39;blog_show&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;slug&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;my-blog-post&#39;</span><span class="p">),</span> <span class="nx">UrlGeneratorInterface</span><span class="o">::</span><span class="na">ABSOLUTE_URL</span><span class="p">);</span>
<span class="c1">// http://www.example.com/blog/my-blog-post</span>
</pre></div>
</td></tr></table></div></div>
<div class="admonition-wrapper">
<div class="note"></div><div class="admonition admonition-note"><p class="first admonition-title">Note</p>
<p class="last">Хост, который используется при генерации абсолютного URL, автоматически
определяется при помощи текущего объекта <tt class="docutils literal"><code>Request</code></tt>. При генерировании
абсолютных URL вне web-контекста (например, в консольной команде), этот
способ не работает. См. <a class="reference internal" href="console\request_context.html"><em>Как генерировать URL из консоли</em></a>,
чтобы научиться решать эту проблему.</p>
</div></div>
</div>
</div>
<div class="section" id="id13">
<h2>Устранение проблем<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h2>
<p>Вот некоторые самые распространенные ошибки, с которыми вы можете столкнуться
во время работы с маршрутизацией:</p>
<blockquote>
<div><p># Контроллер &quot;AppBundleControllerBlogController::showAction()&quot; требует, чтобы вы
предоставили значение для аргумента &quot;$slug&quot;.</p>
<p>Controller &quot;AppBundleControllerBlogController::showAction()&quot; requires that you
provide a value for the &quot;$slug&quot; argument.</p>
</div></blockquote>
<p>Это происходит, когда ваш метод контроллера имеет аргумент (например, <tt class="docutils literal"><code>$slug</code></tt>):</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">function</span> <span class="nf">show</span><span class="p">(</span><span class="nv">$slug</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// ..</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div>
<p>Но ваш путь маршрута <em>не</em> имеет метасимвола <tt class="docutils literal"><code>{slug}</code></tt> (например, он <tt class="docutils literal"><code>/blog/show</code></tt>).
Добавьте <tt class="docutils literal"><code>{slug}</code></tt> к вашему пути маршрута: <tt class="docutils literal"><code>/blog/show/{slug}</code></tt>, либо определите
значение по умолчанию для аргумента (например, <tt class="docutils literal"><code>$slug = null</code></tt>).</p>
<blockquote>
<div>Некоторым обязательным параметрам не хватает (&quot;slug&quot;) для генерирования URL
для маршрута  &quot;blog_show&quot;.</div></blockquote>
<p>Это означает, что вы пробуете создать URL маршруту <tt class="docutils literal"><code>blog_show</code></tt>, но вы <em>не</em> указываете
значение <tt class="docutils literal"><code>slug</code></tt> (которое является обязательным, так как оно имеет <tt class="docutils literal"><code>{slug}</code></tt>) для
метасимвола в пути маршрута. Чтобы исправить это, укажите значение <tt class="docutils literal"><code>slug</code></tt> при генерировани
маршрута:</p>
<div class="literal-block"><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">generateUrl</span><span class="p">(</span><span class="s1">&#39;blog_show&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;slug&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;slug-value&#39;</span><span class="p">));</span>

<span class="c1">// или, в Twig</span>
<span class="c1">// {{ path(&#39;blog_show&#39;, {&#39;slug&#39;: &#39;slug-value&#39;}) }}</span>
</pre></div>
</td></tr></table></div></div>
</div>
<div class="section" id="id14">
<h2>Перевод маршрутов<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h2>
<p>Symfony не поддерживает определение маршрутов с разным содержанием, в зависимости
от языка пользователя. В таких случаях, вы можете определить несколько маршрутов
в контроллере, один для каждого поддерживаемого языка; или использовать любой из
пакетов, созданных обществом для реализации этой функции, например, <a class="reference external" href="https://github.com/schmittjoh/JMSI18nRoutingBundle">JMSI18nRoutingBundle</a>
и <a class="reference external" href="https://github.com/BeSimple/BeSimpleI18nRoutingBundle">BeSimpleI18nRoutingBundle</a>.</p>
</div>
<div class="section" id="id15">
<h2>Продолжайте!<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h2>
<p>Маршрутизация - готово! Теперь, исследуйте силу <a class="reference internal" href="controller.html"><em>контроллеров</em></a>.</p>
</div>
<div class="section" id="id16">
<h2>Узнайте больше о маршрутизации<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
</div>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="routing\conditions.html">How to Restrict Route Matching through Conditions</a></li>
<li class="toctree-l1"><a class="reference internal" href="routing/conditions-ru.html">Как ограничить сопоставление маршрутов с помощью условий</a></li>
<li class="toctree-l1"><a class="reference internal" href="routing\custom_route_loader.html">How to Create a custom Route Loader</a></li>
<li class="toctree-l1"><a class="reference internal" href="routing/custom_route_loader-ru.html">Как создать пользовательский загрузчик маршрутов</a></li>
<li class="toctree-l1"><a class="reference internal" href="routing\debug.html">How to Visualize And Debug Routes</a></li>
<li class="toctree-l1"><a class="reference internal" href="routing/debug-ru.html">Как визуализиовать и отлаживать маршруты</a></li>
<li class="toctree-l1"><a class="reference internal" href="routing\external_resources.html">How to Include External Routing Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="routing/external_resources-ru.html">Как подключать внешние источники маршрутизации</a></li>
<li class="toctree-l1"><a class="reference internal" href="routing\extra_information.html">How to Pass Extra Information from a Route to a Controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="routing/extra_information-ru.html">Как передать дополнительную информацию из маршрута в контроллер</a></li>
<li class="toctree-l1"><a class="reference internal" href="routing\generate_url_javascript.html">How to Generate Routing URLs in JavaScript</a></li>
<li class="toctree-l1"><a class="reference internal" href="routing/generate_url_javascript-ru.html">Как генерировать URL маршрутизации в JavaScript</a></li>
<li class="toctree-l1"><a class="reference internal" href="routing\hostname_pattern.html">How to Match a Route Based on the Host</a></li>
<li class="toctree-l1"><a class="reference internal" href="routing/hostname_pattern-ru.html">Как сделать так, чтобы маршрут соответствовал на основании хоста</a></li>
<li class="toctree-l1"><a class="reference internal" href="routing\optional_placeholders.html">How to Define Optional Placeholders</a></li>
<li class="toctree-l1"><a class="reference internal" href="routing/optional_placeholders-ru.html">Как определять необязательные заполнители</a></li>
<li class="toctree-l1"><a class="reference internal" href="routing\redirect_in_config.html">How to Configure a Redirect without a custom Controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="routing/redirect_in_config-ru.html">Как сконфигурировать перенаправление без пользовательского контроллера</a></li>
<li class="toctree-l1"><a class="reference internal" href="routing\redirect_trailing_slash.html">Redirect URLs with a Trailing Slash</a></li>
<li class="toctree-l1"><a class="reference internal" href="routing/redirect_trailing_slash-ru.html">Перенаправление URL с замыкающим слешем</a></li>
<li class="toctree-l1"><a class="reference internal" href="routing\requirements.html">How to Define Route Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="routing/requirements-ru.html">Как определять требования маршрутов</a></li>
<li class="toctree-l1"><a class="reference internal" href="routing\routing_from_database.html">Looking up Routes from a Database: Symfony CMF DynamicRouter</a></li>
<li class="toctree-l1"><a class="reference internal" href="routing/routing_from_database-ru.html">Поиск маршрутов из базы данных: Symfony CMF DynamicRouter</a></li>
<li class="toctree-l1"><a class="reference internal" href="routing\scheme.html">How to Force Routes to Always Use HTTPS or HTTP</a></li>
<li class="toctree-l1"><a class="reference internal" href="routing/scheme-ru.html">Как заставить маршруты всегда использовать HTTPS или HTTP</a></li>
<li class="toctree-l1"><a class="reference internal" href="routing\service_container_parameters.html">How to Use Service Container Parameters in your Routes</a></li>
<li class="toctree-l1"><a class="reference internal" href="routing/service_container_parameters-ru.html">Как использовать параметры сервис-контейнера в ваших маршрутах</a></li>
<li class="toctree-l1"><a class="reference internal" href="routing\slash_in_parameter.html">How to Allow a &quot;/&quot; Character in a Route Parameter</a></li>
<li class="toctree-l1"><a class="reference internal" href="routing/slash_in_parameter-ru.html">Как позволить знак &quot;/&quot; в параметре маршрута</a></li>
</ul>
</div>
</div>
</div>


            </div>

            

            <div id="license">
                <p>Эта документация является переводом <a href="http://symfony.com/doc/current/index.html">официальной документации Symfony</a> и предоставляется по свободной лицензии <a rel="license nofollow" href="https://creativecommons.org/licenses/by-sa/3.0/deed.ru">CC BY-SA 3.0</a>.</p>
            </div>
        </div>
    </div>
</div></div>


  </body>
</body></html>